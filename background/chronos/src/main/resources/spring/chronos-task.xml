<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:reg="http://www.dangdang.com/schema/ddframe/reg"
       xmlns:job="http://www.dangdang.com/schema/ddframe/job"
       xmlns:task="http://www.springframework.org/schema/task"
       xmlns="http://www.springframework.org/schema/beans"

       xsi:schemaLocation="http://www.springframework.org/schema/context
       http://www.springframework.org/schema/context/spring-context.xsd
       http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans.xsd
       http://www.dangdang.com/schema/ddframe/reg
       http://www.dangdang.com/schema/ddframe/reg/reg.xsd
       http://www.dangdang.com/schema/ddframe/job
       http://www.dangdang.com/schema/ddframe/job/job.xsd
       http://www.springframework.org/schema/task
       http://www.springframework.org/schema/task/spring-task.xsd">

    <import resource="classpath:/spring/chronos-db.xml"/>
    <!--引入所有需要的xml文件-->
    <!--<import resource="classpath:/spring/*.xml"/>-->

    <context:annotation-config/>
    <context:component-scan base-package="com.jkm.chronos.task"/>
    <context:component-scan base-package="com.jkm.base.common.spring"/>

    <context:property-placeholder location="classpath:*.properties"/>

    <task:annotation-driven/>

    <reg:zookeeper id="regCenter"
                   serverLists="${serverLists}"
                   namespace="${namespace}"
                   baseSleepTimeMilliseconds="${baseSleepTimeMilliseconds}"
                   maxSleepTimeMilliseconds="${maxSleepTimeMilliseconds}"
                   maxRetries="${maxRetries}"/>

    <job:bean id="repayTask"
        class="com.jkm.chronos.task.TestTask"
        description="定时还款任务"
        regCenter="regCenter"
        cron="0 0 18,23 * * ?"
        shardingTotalCount="1"
        failover="true"
        overwrite="true"
        monitorExecution="true"/>
</beans>
