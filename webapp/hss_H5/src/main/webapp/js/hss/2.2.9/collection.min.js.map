{"version":3,"sources":["collection.js"],"names":["browser","_require","elastic_touch","http","message","Keyboard","spanId","inputId","keyboardId","know","document","getElementById","layer","layer_x","submit","addEventListener","style","display","know_channel","layer_channel","layer_x_channel","submit_channel","channelBox","channel","checkBusinessRegistration","code","amount","Promise","resolve","reject","load_show","post","channelTypeSign","load_hide","data","i","group","createElement","className","onclick","getAttribute","channelSign","then","check","payMethod","totalFee","payChannel","window","location","replace","url","encodeURIComponent","payUrl","subMerName","prompt_show","console","log","name","innerHTML","channelName","time","settleType","fee","channelRate","toFixed","limitAmount","appendChild","length"],"mappings":"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","file":"collection.min.js","sourcesContent":["/**\n * Created by administrator on 2016/12/6.\n */\n\n// 引入浏览器特性处理\nconst browser = _require('browser');\nbrowser.elastic_touch();\n// 引入http message\nconst http = _require('http');\nconst message = _require('message');\nconst Keyboard = _require('keyboard');\nnew Keyboard({\n  spanId: 'key-span',\n  inputId: 'key-input',\n  keyboardId: 'keyboard'\n});\n\nlet know = document.getElementById('know');\nlet layer = document.getElementById('layer');\nlet layer_x = document.getElementById('layer-x');\nlet submit = document.getElementById('submit');\n\nknow.addEventListener('click', function () {\n  layer.style.display = 'block';\n});\n\nlayer_x.addEventListener('click', function () {\n  layer.style.display = 'none';\n});\n\nsubmit.addEventListener('click', function () {\n  layer.style.display = 'none';\n});\n\nlet know_channel = document.getElementById('know-channel');\nlet layer_channel = document.getElementById('layer-channel');\nlet layer_x_channel = document.getElementById('layer-x-channel');\nlet submit_channel = document.getElementById('submit-channel');\n\nknow_channel.addEventListener('click', function () {\n  layer_channel.style.display = 'block';\n});\n\nlayer_x_channel.addEventListener('click', function () {\n  layer_channel.style.display = 'none';\n});\n\nsubmit_channel.addEventListener('click', function () {\n  layer_channel.style.display = 'none';\n});\n\n// 多通道获取\nlet channelBox = document.getElementById('channelBox');\nlet channel = document.getElementById('channel');\nconst checkBusinessRegistration = (code, amount) => {\n  return new Promise(function (resolve, reject) {\n    message.load_show('正在支付');\n    http.post('/wx/checkMerchantInfo1', {\n      amount: amount,\n      channelTypeSign: code\n    }, function () {\n      message.load_hide();\n      resolve(true);\n    });\n  });\n};\nhttp.post('/channel/list', {}, function (data) {\n  for (let i = 0; i < data.length; i++) {\n    let group = document.createElement('div');\n    group.className = 'channel-group';\n    group.onclick = function () {\n      let amount = channelBox.getAttribute('payAmount');\n      if (amount > 0) {\n        checkBusinessRegistration(data[i].channelSign, amount).then(function (check) {\n          if (check) {\n            message.load_show('正在支付');\n            switch (data[i].payMethod) {\n              case '快捷':\n                http.post('/trade/unionPayRoute', {  // /wx/receipt\n                  totalFee: amount,\n                  payChannel: data[i].channelSign\n                }, function (data) {\n                  message.load_hide();\n                  window.location.replace(data.url);\n                });\n                break;\n              default:\n                http.post('/trade/dcReceipt', {  // /wx/receipt\n                  totalFee: amount,\n                  payChannel: data[i].channelSign\n                }, function (data) {\n                  message.load_hide();\n                  window.location.replace(\"/sqb/charge?qrCode=\" + encodeURIComponent(data.payUrl) + \"&name=\" + data.subMerName + \"&money=\" + data.amount);\n                });\n                break;\n            }\n          } else {\n            message.load_hide();\n          }\n        });\n      } else {\n        message.prompt_show('请输入正确的收款金额');\n      }\n    };\n    console.log(data[i]);\n    let name = document.createElement('div');\n    name.className = 'channel-con name';\n    name.innerHTML = data[i].channelName;\n    let time = document.createElement('div');\n    time.className = 'channel-con';\n    time.innerHTML = data[i].settleType + '到账';\n    let fee = document.createElement('div');\n    fee.className = 'channel-con';\n    fee.innerHTML = (data[i].channelRate * 100).toFixed(2) + '%';\n    let amount = document.createElement('div');\n    amount.className = 'channel-con';\n    amount.innerHTML = data[i].limitAmount + '元';\n    group.appendChild(name);\n    group.appendChild(time);\n    group.appendChild(fee);\n    group.appendChild(amount);\n    channel.appendChild(group);\n  }\n});"]}