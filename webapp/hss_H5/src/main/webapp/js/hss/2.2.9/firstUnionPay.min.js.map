{"version":3,"sources":["firstUnionPay.js"],"names":["browser","_require","elastic_touch","AnimationCountdown","countdown","DatePicker","http","validate","message","fmoney","s","n","parseFloat","replace","toFixed","l","split","reverse","r","t","i","length","join","getQueryString","name","reg","RegExp","window","location","search","substr","match","unescape","chooseBank","document","getElementById","sendCode","submit","check_cvv","example_cvv","cancel_cvv","addEventListener","style","display","check_validity","example_validity","cancel_validity","test","cardNo","cache","cardNoArr","temp","cardNoTemp","cardNoArrLen","sum","cacheLen","lastnumber","cacuIndex","curIndex","mod","push","parseInt","toString","ceil","Math","amount","channel","bankName","bankCode","bankCodeBtn","expireDate","cvv2","mobile","code","orderId","supportBankCardList","support","prompt_show","e","ev","target","value","post","bankNo","data","allow","status","empty","phone","load_show","load_hide","check","expire","bankCardNo","submit_start","bankNameList","channelSign","bankNameObject","label","singleLimitAmount","weui","picker","onConfirm","result","format","removeAttribute","id"],"mappings":"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","file":"firstUnionPay.min.js","sourcesContent":["/**\n * Created by administrator on 2016/12/6.\n */\n\n// 引入浏览器特性处理\nconst browser = _require('browser');\nbrowser.elastic_touch();\n// 引入动画模版 处理验证码\nconst AnimationCountdown = _require('art-countdown');\nlet countdown = new AnimationCountdown('sendCode', '重新获取');\n// 时间选择器\nconst DatePicker = _require('datePicker');\nnew DatePicker('expireDate');\n// 引入http message\nconst http = _require('http');\nconst validate = _require('validate');\nconst message = _require('message');\n\nfunction fmoney(s, n) {\n  n = n > 0 && n <= 20 ? n : 2;\n  s = parseFloat((s + \"\").replace(/[^\\d\\.-]/g, \"\")).toFixed(n) + \"\";\n  let l = s.split(\".\")[0].split(\"\").reverse(), r = s.split(\".\")[1];\n  let t = \"\";\n  for (let i = 0; i < l.length; i++) {\n    t += l[i] + ((i + 1) % 3 == 0 && (i + 1) != l.length ? \",\" : \"\");\n  }\n  return t.split(\"\").reverse().join(\"\") + \".\" + r;\n}\n\nfunction getQueryString(name) {\n  let reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\", \"i\");\n  let r = window.location.search.substr(1).match(reg);\n  if (r != null) return unescape(r[2]);\n  return null;\n}\n\n// 定义变量\nlet chooseBank = document.getElementById('chooseBank');\nlet sendCode = document.getElementById('sendCode');\nlet submit = document.getElementById('submit');\n\nlet check_cvv = document.getElementById('check_cvv');\nlet example_cvv = document.getElementById('example_cvv');\nlet cancel_cvv = document.getElementById('cancel_cvv');\n\ncheck_cvv.addEventListener('click', function () {\n  example_cvv.style.display = 'block';\n});\n\ncancel_cvv.addEventListener('click', function () {\n  example_cvv.style.display = 'none';\n});\n\nlet check_validity = document.getElementById('check_validity');\nlet example_validity = document.getElementById('example_validity');\nlet cancel_validity = document.getElementById('cancel_validity');\n\ncheck_validity.addEventListener('click', function () {\n  example_validity.style.display = 'block';\n});\n\ncancel_validity.addEventListener('click', function () {\n  example_validity.style.display = 'none';\n});\n\n// 定义信用卡号 正确性校验\nlet test = function (cardNo) {\n  cardNo = cardNo || '';\n  let cache = [], cardNoArr = cardNo.split(''),\n    temp, cardNoTemp, cardNoArrLen = cardNoArr.length,\n    sum = 0, cacheLen;\n  /*信用卡校验规则：\n   *1、从倒数第二位开始，每相隔一位*2，如果乘积为两位数则数字相加\n   *2、得到的乘积与1中未处理的数字相加（除了最后一位），取和向上最近的以0结尾的数字\n   *3、用2得到的数字减去2中相加的和，得到的数字等于信用卡最后一位\n   */\n  if (cardNoArrLen < 1) {\n    return false;\n  }\n  let lastnumber = cardNoArr[cardNoArrLen - 1];\n  let cacuIndex = cardNoArrLen - 2;\n  let curIndex = cardNoArrLen - 1;\n  while (curIndex--) {\n    let mod = cacuIndex - curIndex;\n    if (mod % 2) {\n      cache.push(parseInt(cardNoArr[curIndex]));\n    } else {\n      cardNoTemp = cardNoArr[curIndex] * 2;\n\n      if (cardNoTemp.toString().length == 1) {\n        cache.push(cardNoArr[curIndex] * 2);\n      } else {\n        temp = cardNoTemp.toString().split('');\n        cache.push(parseInt(temp[0], 10) + parseInt(temp[1], 10));\n      }\n    }\n  }\n  cacheLen = cache.length;\n  while (cacheLen--) {\n    sum += cache[cacheLen];\n  }\n  let ceil = Math.ceil(sum / 10);\n  return (ceil * 10 - sum) == lastnumber;\n};\n\nlet amount = getQueryString('amount');\nlet channel = getQueryString('channel');\nlet bankName = '';\nlet bankCode = '';\nlet bankCodeBtn = document.getElementById('bankCode');\nlet expireDate = document.getElementById('expireDate');\nlet cvv2 = document.getElementById('cvv2');\nlet mobile = document.getElementById('mobile');\nlet code = document.getElementById('code');\nlet orderId = '';\nlet supportBankCardList = {};\nlet support = false;\n// 定义信用卡号校验\nbankCodeBtn.addEventListener('click', function () {\n  if (!bankName || bankName == '') {\n    message.prompt_show('请先选择所属银行');\n  }\n});\nbankCodeBtn.addEventListener('change', function (e) {\n  let ev = e.target;\n  if (ev.value.length >= 13 && ev.value.length <= 24 && test(ev.value)) {\n    http.post('/merchantInfo/selectBankNameByBankNo', {\n      bankNo: ev.value\n    }, function (data) {\n      if (!data || data == '') {\n        support = false;\n        message.prompt_show('暂不支持使用储蓄卡');\n      } else {\n        let allow = false;\n        for (let i = 0; i < supportBankCardList.length; i++) {\n          if (data == supportBankCardList[i].bankCode && supportBankCardList[i].status == 1) {\n            allow = true;\n            support = true;\n            if (supportBankCardList[i].bankName != bankName) {\n              bankName = supportBankCardList[i].bankName;\n              bankCode = supportBankCardList[i].bankCode;\n              chooseBank.value = supportBankCardList[i].bankName;\n            }\n          }\n        }\n        if (!allow) {\n          support = false;\n          message.prompt_show('暂时不支持该银行的卡');\n        }\n      }\n    })\n  } else {\n    message.prompt_show('请输入正确的信用卡号');\n  }\n});\n// 定义支付\nsubmit.addEventListener('click', function () {\n  if (!support) {\n    message.prompt_show('请输入正确的信用卡号');\n  } else if (validate.empty(expireDate.value, '信用卡有效期') &&\n    validate.empty(cvv2.value, 'CVV2') &&\n    validate.phone(mobile.value) &&\n    validate.empty(code.value, '验证码')) {\n    if (cvv2.value.length == 3) {\n      message.load_show('正在支付');\n      http.post('/trade/confirmUnionPay', {\n        orderId: orderId,\n        code: code.value,\n      }, function () {\n        message.load_hide();\n        window.location.replace('/trade/unionPaySuccess/' + orderId);\n      })\n    } else {\n      message.prompt_show('请输入正确的CVV2');\n    }\n  }\n});\n// 定义验证码\nsendCode.addEventListener('click', function () {\n  if (countdown.check()) {\n    if (!support) {\n      message.prompt_show('请输入正确的信用卡号');\n    } else if (validate.empty(expireDate.value, '信用卡有效期') &&\n      validate.empty(cvv2.value, 'CVV2') &&\n      validate.phone(mobile.value)) {\n      message.load_show('正在发送');\n      let expire = expireDate.value.split('/');\n      http.post('/trade/firstUnionPay', {\n        amount: amount,\n        channel: channel,\n        bankCode: bankCode,\n        bankCardNo: bankCodeBtn.value,\n        expireDate: expire[1] + expire[0],\n        cvv2: cvv2.value,\n        mobile: mobile.value\n      }, function (data) {\n        orderId = data.orderId;\n        message.load_hide();\n        message.prompt_show('验证码发送成功');\n        countdown.submit_start();\n      })\n    }\n  }\n});\n\n// 获取支持的银行卡列表\nlet bankNameList = [];\nhttp.post('/channel/queryChannelSupportBank', {\n  channelSign: '301'\n}, function (data) {\n  supportBankCardList = data;\n  for (let i = 0; i < data.length; i++) {\n    let bankNameObject = {};\n    bankNameObject.label = '<span style=\"color: #5a5a5a\">' + data[i].bankName + '</span><span style=\"font-size: 14px;color: #5a5a5a\"> (单笔限额' + fmoney(data[i].singleLimitAmount, 2) + '元)</span>';\n    bankNameObject.value = data[i].bankName + '/' + data[i].bankCode;\n    if (data[i].status == 1) {\n      bankNameList.push(bankNameObject);\n    }\n  }\n  chooseBank.addEventListener('click', () => {\n    weui.picker(bankNameList, {\n      onConfirm: (result) => {\n        let format = result[0].split('/');\n        chooseBank.value = format[0];\n        bankName = format[0];\n        bankCode = format[1];\n        bankCodeBtn.removeAttribute('readonly');\n      },\n      id: 'chooseBank'\n    });\n  });\n});"]}