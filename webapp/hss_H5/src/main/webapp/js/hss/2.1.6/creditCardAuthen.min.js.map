{"version":3,"sources":["creditCardAuthen.js"],"names":["http","_require","message","browser","elastic_touch","getQueryString","name","reg","RegExp","r","window","location","search","substr","match","unescape","ipt","document","getElementById","submit","layer","cancel","addEventListener","href","value","length","post","bankNo","data","prompt_show","creditCard","style","display"],"mappings":";;AAAA;;;;AAIA;AACA,IAAMA,OAAOC,SAAS,MAAT,CAAb;AACA,IAAMC,UAAUD,SAAS,SAAT,CAAhB;AACA,IAAME,UAAUF,SAAS,SAAT,CAAhB;AACAE,QAAQC,aAAR;;AAEA,SAASC,cAAT,CAAwBC,IAAxB,EAA8B;AAC5B,MAAIC,MAAM,IAAIC,MAAJ,CAAW,UAAUF,IAAV,GAAiB,eAA5B,EAA6C,GAA7C,CAAV;AACA,MAAIG,IAAIC,OAAOC,QAAP,CAAgBC,MAAhB,CAAuBC,MAAvB,CAA8B,CAA9B,EAAiCC,KAAjC,CAAuCP,GAAvC,CAAR;AACA,MAAIE,KAAK,IAAT,EAAe,OAAOM,SAASN,EAAE,CAAF,CAAT,CAAP;AACf,SAAO,IAAP;AACD;;AAED;AACA,IAAIO,MAAMC,SAASC,cAAT,CAAwB,KAAxB,CAAV;AACA,IAAIC,SAASF,SAASC,cAAT,CAAwB,QAAxB,CAAb;;AAEA,IAAIE,QAAQH,SAASC,cAAT,CAAwB,OAAxB,CAAZ;AACA,IAAIG,SAASJ,SAASC,cAAT,CAAwB,QAAxB,CAAb;;AAEAG,OAAOC,gBAAP,CAAwB,OAAxB,EAAiC,YAAY;AAC3CZ,SAAOC,QAAP,CAAgBY,IAAhB,GAAuB,aAAvB;AACD,CAFD;;AAIAJ,OAAOG,gBAAP,CAAwB,OAAxB,EAAiC,YAAY;AAC3C,MAAIN,IAAIQ,KAAJ,CAAUC,MAAV,IAAoB,EAApB,IAA0BT,IAAIQ,KAAJ,CAAUC,MAAV,IAAoB,EAAlD,EAAsD;AACpDzB,SAAK0B,IAAL,CAAU,yBAAV,EAAqC,EAACC,QAAQX,IAAIQ,KAAb,EAArC,EAA0D,UAAUI,IAAV,EAAgB;AACxE,UAAIA,QAAQ,CAAZ,EAAe;AACb1B,gBAAQ2B,WAAR,CAAoB,YAApB;AACD,OAFD,MAEO;AACL7B,aAAK0B,IAAL,CAAU,sBAAV,EAAkC;AAChCI,sBAAYd,IAAIQ;AADgB,SAAlC,EAEG,YAAY;AACb,cAAInB,eAAe,MAAf,CAAJ,EAA4B;AAC1Be,kBAAMW,KAAN,CAAYC,OAAZ,GAAsB,OAAtB;AACD,WAFD,MAEO;AACLtB,mBAAOC,QAAP,CAAgBY,IAAhB,GAAuB,qBAAvB;AACD;AACF,SARD;AASD;AACF,KAdD;AAeD,GAhBD,MAgBO;AACLrB,YAAQ2B,WAAR,CAAoB,YAApB;AACD;AACF,CApBD","file":"creditCardAuthen.min.js","sourcesContent":["/**\n * Created by administrator on 2016/12/8.\n */\n\n// 引入浏览器特性处理\nconst http = _require('http');\nconst message = _require('message');\nconst browser = _require('browser');\nbrowser.elastic_touch();\n\nfunction getQueryString(name) {\n  let reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\", \"i\");\n  let r = window.location.search.substr(1).match(reg);\n  if (r != null) return unescape(r[2]);\n  return null;\n}\n\n// 定义变量\nlet ipt = document.getElementById('ipt');\nlet submit = document.getElementById('submit');\n\nlet layer = document.getElementById('layer');\nlet cancel = document.getElementById('cancel');\n\ncancel.addEventListener('click', function () {\n  window.location.href = '/sqb/wallet';\n});\n\nsubmit.addEventListener('click', function () {\n  if (ipt.value.length >= 15 && ipt.value.length <= 20) {\n    http.post('/merchantInfo/queryBank', {bankNo: ipt.value}, function (data) {\n      if (data != 1) {\n        message.prompt_show('请输入正确的信用卡号');\n      } else {\n        http.post('/wx/creditCardAuthen', {\n          creditCard: ipt.value\n        }, function () {\n          if (getQueryString('card')) {\n            layer.style.display = 'block';\n          } else {\n            window.location.href = '/sqb/authentication';\n          }\n        })\n      }\n    })\n  } else {\n    message.prompt_show('请输入正确的信用卡号');\n  }\n});\n"]}