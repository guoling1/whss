{"version":3,"sources":["upload.js"],"names":["validate","_require","message","http","browser","elastic_touch","Upload","submit","document","getElementById","identityFacePic_src","identityOppositePic_src","identityHandPic_src","bankHandPic_src","wx","error","res","alert","ua","navigator","userAgent","toLowerCase","getLocalImg","id","localId","getLocalImgData","success","setAttribute","localData","upload_identityFacePic","indexOf","upload_identityOppositePic","upload_identityHandPic","upload_bankHandPic","addEventListener","identityFacePic","getServerId","identityOppositePic","identityHandPic","bankHandPic","empty","post","window","location","href"],"mappings":";;AAAA;;;;AAKA;AACA,IAAMA,WAAWC,SAAS,UAAT,CAAjB;AACA,IAAMC,UAAUD,SAAS,SAAT,CAAhB;AACA,IAAME,OAAOF,SAAS,MAAT,CAAb;AACA;AACA,IAAMG,UAAUH,SAAS,SAAT,CAAhB;AACAG,QAAQC,aAAR,CAAsB,QAAtB;AACA;AACA,IAAMC,SAASL,SAAS,QAAT,CAAf;AACA;AACA,IAAIM,SAASC,SAASC,cAAT,CAAwB,QAAxB,CAAb;AACA,IAAIC,sBAAsBF,SAASC,cAAT,CAAwB,qBAAxB,CAA1B;AACA,IAAIE,0BAA0BH,SAASC,cAAT,CAAwB,yBAAxB,CAA9B;AACA,IAAIG,sBAAsBJ,SAASC,cAAT,CAAwB,qBAAxB,CAA1B;AACA,IAAII,kBAAkBL,SAASC,cAAT,CAAwB,iBAAxB,CAAtB;;AAEAK,GAAGC,KAAH,CAAS,UAASC,GAAT,EAAa;AACpBC,QAAMD,GAAN;AACA;AACD,CAHD;;AAKA,IAAIE,KAAKC,UAAUC,SAAV,CAAoBC,WAApB,EAAT;AACA;AACA,IAAIC,cAAc,SAAdA,WAAc,CAAUC,EAAV,EAAcC,OAAd,EAAuB;AACvCV,KAAGW,eAAH,CAAmB;AACjBD,aAASA,OADQ;AAEjBE,aAAS,iBAAUV,GAAV,EAAe;AACtBR,eAASC,cAAT,CAAwBc,EAAxB,EAA4BI,YAA5B,CAAyC,KAAzC,EAAgDX,IAAIY,SAApD;AACD;AAJgB,GAAnB;AAMD,CAPD;;AASA,IAAIC,yBAAyB,IAAIvB,MAAJ,CAAW,iBAAX,EAA8B,UAAUkB,OAAV,EAAmB;AAC5E,MAAIN,GAAGY,OAAH,CAAW,QAAX,KAAwB,CAA5B,EAA+B;AAC7BR,gBAAY,qBAAZ,EAAmCE,OAAnC;AACA;AACD;AACDhB,WAASC,cAAT,CAAwB,qBAAxB,EAA+CkB,YAA/C,CAA4D,KAA5D,EAAmEH,OAAnE;AACD,CAN4B,CAA7B;;AAQA,IAAIO,6BAA6B,IAAIzB,MAAJ,CAAW,qBAAX,EAAkC,UAAUkB,OAAV,EAAmB;AACpF,MAAIN,GAAGY,OAAH,CAAW,QAAX,KAAwB,CAA5B,EAA+B;AAC7BR,gBAAY,yBAAZ,EAAuCE,OAAvC;AACA;AACD;AACDhB,WAASC,cAAT,CAAwB,yBAAxB,EAAmDkB,YAAnD,CAAgE,KAAhE,EAAuEH,OAAvE;AACD,CANgC,CAAjC;;AAQA,IAAIQ,yBAAyB,IAAI1B,MAAJ,CAAW,iBAAX,EAA8B,UAAUkB,OAAV,EAAmB;AAC5E,MAAIN,GAAGY,OAAH,CAAW,QAAX,KAAwB,CAA5B,EAA+B;AAC7BR,gBAAY,qBAAZ,EAAmCE,OAAnC;AACA;AACD;AACDhB,WAASC,cAAT,CAAwB,qBAAxB,EAA+CkB,YAA/C,CAA4D,KAA5D,EAAmEH,OAAnE;AACD,CAN4B,CAA7B;;AAQA,IAAIS,qBAAqB,IAAI3B,MAAJ,CAAW,aAAX,EAA0B,UAAUkB,OAAV,EAAmB;AACpE,MAAIN,GAAGY,OAAH,CAAW,QAAX,KAAwB,CAA5B,EAA+B;AAC7BR,gBAAY,iBAAZ,EAA+BE,OAA/B;AACA;AACD;AACDhB,WAASC,cAAT,CAAwB,iBAAxB,EAA2CkB,YAA3C,CAAwD,KAAxD,EAA+DH,OAA/D;AACD,CANwB,CAAzB;;AAQAjB,OAAO2B,gBAAP,CAAwB,OAAxB,EAAiC,YAAY;AAC3C,MAAIC,kBAAkBN,uBAAuBO,WAAvB,EAAtB;AACA,MAAIC,sBAAsBN,2BAA2BK,WAA3B,EAA1B;AACA,MAAIE,kBAAkBN,uBAAuBI,WAAvB,EAAtB;AACA,MAAIG,cAAcN,mBAAmBG,WAAnB,EAAlB;AACA,MAAIpC,SAASwC,KAAT,CAAeL,eAAf,EAAgC,SAAhC,KACCnC,SAASwC,KAAT,CAAeH,mBAAf,EAAoC,SAApC,CADD,IAECrC,SAASwC,KAAT,CAAeF,eAAf,EAAgC,WAAhC,CAFD,IAGCtC,SAASwC,KAAT,CAAeD,WAAf,EAA4B,WAA5B,CAHL,EAG+C;AAC7CpC,SAAKsC,IAAL,CAAU,uBAAV,EAAmC;AACjCN,uBAAiBA,eADgB;AAEjCE,2BAAqBA,mBAFY;AAGjCC,uBAAiBA,eAHgB;AAIjCC,mBAAaA;AAJoB,KAAnC,EAKG,YAAY;AACbG,aAAOC,QAAP,CAAgBC,IAAhB,GAAuB,aAAvB;AACD,KAPD;AAQD;AACF,CAlBD","file":"upload.min.js","sourcesContent":["/**\n * Created by administrator on 2016/12/15.\n */\n\n\n// 引入http message validate\nconst validate = _require('validate');\nconst message = _require('message');\nconst http = _require('http');\n// 引入浏览器特性处理\nconst browser = _require('browser');\nbrowser.elastic_touch('upload');\n// 引入wx_upload\nconst Upload = _require('upload');\n// 定义变量\nlet submit = document.getElementById('submit');\nlet identityFacePic_src = document.getElementById('identityFacePic_src');\nlet identityOppositePic_src = document.getElementById('identityOppositePic_src');\nlet identityHandPic_src = document.getElementById('identityHandPic_src');\nlet bankHandPic_src = document.getElementById('bankHandPic_src');\n\nwx.error(function(res){\n  alert(res);\n  // config信息验证失败会执行error函数，如签名过期导致验证失败，具体错误信息可以打开config的debug模式查看，也可以在返回的res参数中查看，对于SPA可以在这里更新签名。\n});\n\nlet ua = navigator.userAgent.toLowerCase();\n// 获取本地图片\nlet getLocalImg = function (id, localId) {\n  wx.getLocalImgData({\n    localId: localId,\n    success: function (res) {\n      document.getElementById(id).setAttribute('src', res.localData);\n    }\n  });\n};\n\nlet upload_identityFacePic = new Upload('identityFacePic', function (localId) {\n  if (ua.indexOf('iphone') >= 0) {\n    getLocalImg('identityFacePic_src', localId);\n    return;\n  }\n  document.getElementById('identityFacePic_src').setAttribute('src', localId);\n});\n\nlet upload_identityOppositePic = new Upload('identityOppositePic', function (localId) {\n  if (ua.indexOf('iphone') >= 0) {\n    getLocalImg('identityOppositePic_src', localId);\n    return;\n  }\n  document.getElementById('identityOppositePic_src').setAttribute('src', localId);\n});\n\nlet upload_identityHandPic = new Upload('identityHandPic', function (localId) {\n  if (ua.indexOf('iphone') >= 0) {\n    getLocalImg('identityHandPic_src', localId);\n    return;\n  }\n  document.getElementById('identityHandPic_src').setAttribute('src', localId);\n});\n\nlet upload_bankHandPic = new Upload('bankHandPic', function (localId) {\n  if (ua.indexOf('iphone') >= 0) {\n    getLocalImg('bankHandPic_src', localId);\n    return;\n  }\n  document.getElementById('bankHandPic_src').setAttribute('src', localId);\n});\n\nsubmit.addEventListener('click', function () {\n  let identityFacePic = upload_identityFacePic.getServerId();\n  let identityOppositePic = upload_identityOppositePic.getServerId();\n  let identityHandPic = upload_identityHandPic.getServerId();\n  let bankHandPic = upload_bankHandPic.getServerId();\n  if (validate.empty(identityFacePic, '身份证正面照片')\n    && validate.empty(identityOppositePic, '身份证背面照片')\n    && validate.empty(identityHandPic, '手持身份证正面照片')\n    && validate.empty(bankHandPic, '手持结算卡正面照片')) {\n    http.post('/merchantInfo/savePic', {\n      identityFacePic: identityFacePic,\n      identityOppositePic: identityOppositePic,\n      identityHandPic: identityHandPic,\n      bankHandPic: bankHandPic\n    }, function () {\n      window.location.href = \"/sqb/follow\";\n    })\n  }\n});"]}