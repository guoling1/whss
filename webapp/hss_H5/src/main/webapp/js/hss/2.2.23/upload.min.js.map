{"version":3,"sources":["upload.js"],"names":["validate","_require","message","http","browser","elastic_touch","Upload","submit","document","getElementById","identityFacePic_src","identityOppositePic_src","identityHandPic_src","bankHandPic_src","ua","navigator","userAgent","toLowerCase","getLocalImg","id","localId","wx","getLocalImgData","success","res","setAttribute","localData","upload_identityFacePic","indexOf","upload_identityOppositePic","upload_identityHandPic","upload_bankHandPic","addEventListener","identityFacePic","getServerId","identityOppositePic","identityHandPic","bankHandPic","empty","post","window","location","href"],"mappings":"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","file":"upload.min.js","sourcesContent":["/**\n * Created by administrator on 2016/12/15.\n */\n\n\n// 引入http message validate\nconst validate = _require('validate');\nconst message = _require('message');\nconst http = _require('http');\n// 引入浏览器特性处理\nconst browser = _require('browser');\nbrowser.elastic_touch('upload');\n// 引入wx_upload\nconst Upload = _require('upload');\n// 定义变量\nlet submit = document.getElementById('submit');\nlet identityFacePic_src = document.getElementById('identityFacePic_src');\nlet identityOppositePic_src = document.getElementById('identityOppositePic_src');\nlet identityHandPic_src = document.getElementById('identityHandPic_src');\nlet bankHandPic_src = document.getElementById('bankHandPic_src');\n\nlet ua = navigator.userAgent.toLowerCase();\n// 获取本地图片\nlet getLocalImg = function (id, localId) {\n  wx.getLocalImgData({\n    localId: localId,\n    success: function (res) {\n      document.getElementById(id).setAttribute('src', res.localData);\n    }\n  });\n};\n\nlet upload_identityFacePic = new Upload('identityFacePic', function (localId) {\n  if (ua.indexOf('iphone') >= 0) {\n    getLocalImg('identityFacePic_src', localId);\n    return;\n  }\n  document.getElementById('identityFacePic_src').setAttribute('src', localId);\n});\n\nlet upload_identityOppositePic = new Upload('identityOppositePic', function (localId) {\n  if (ua.indexOf('iphone') >= 0) {\n    getLocalImg('identityOppositePic_src', localId);\n    return;\n  }\n  document.getElementById('identityOppositePic_src').setAttribute('src', localId);\n});\n\nlet upload_identityHandPic = new Upload('identityHandPic', function (localId) {\n  if (ua.indexOf('iphone') >= 0) {\n    getLocalImg('identityHandPic_src', localId);\n    return;\n  }\n  document.getElementById('identityHandPic_src').setAttribute('src', localId);\n});\n\nlet upload_bankHandPic = new Upload('bankHandPic', function (localId) {\n  if (ua.indexOf('iphone') >= 0) {\n    getLocalImg('bankHandPic_src', localId);\n    return;\n  }\n  document.getElementById('bankHandPic_src').setAttribute('src', localId);\n});\n\nsubmit.addEventListener('click', function () {\n  let identityFacePic = upload_identityFacePic.getServerId();\n  let identityOppositePic = upload_identityOppositePic.getServerId();\n  let identityHandPic = upload_identityHandPic.getServerId();\n  let bankHandPic = upload_bankHandPic.getServerId();\n  if (validate.empty(identityFacePic, '身份证正面照片')\n    && validate.empty(identityOppositePic, '身份证背面照片')\n    && validate.empty(identityHandPic, '手持身份证正面照片')\n    && validate.empty(bankHandPic, '手持结算卡正面照片')) {\n    http.post('/merchantInfo/savePic', {\n      identityFacePic: identityFacePic,\n      identityOppositePic: identityOppositePic,\n      identityHandPic: identityHandPic,\n      bankHandPic: bankHandPic\n    }, function () {\n      window.location.href = \"/sqb/follow\";\n    })\n  }\n});"]}