{"version":3,"sources":["withdrawal.js"],"names":["Animation","_require","animation","validate","message","http","next","document","getElementById","layer","submit","sendCode","code","browser","elastic_touch","amount","bank","ipt","fee","come","mobile","reFee","reAcconut","post","data","innerHTML","available","toFixed","bankName","bankNo","withdrawFee","setAttribute","addEventListener","e","ev","target","val","value","sendcode","url","btn","prompt_show","style","display","click","load_show","channel","load_hide","window","location","replace"],"mappings":"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","file":"withdrawal.min.js","sourcesContent":["/**\n * Created by administrator on 2016/12/8.\n */\n\n// 引入动画模版 处理验证码\nconst Animation = _require('animation');\nconst animation = new Animation();\n// 引入http validate message\nconst validate = _require('validate');\nconst message = _require('message');\nconst http = _require('http');\n// 定义变量\nconst next = document.getElementById('next');\nconst layer = document.getElementById('layer');\nconst submit = document.getElementById('submit');\nconst sendCode = document.getElementById('sendCode');\nconst code = document.getElementById('code');\n// 引入浏览器特性处理\nconst browser = _require('browser');\nbrowser.elastic_touch();\n\n// 定义变量\nlet amount = document.getElementById('amount');\nlet bank = document.getElementById('bank');\nlet ipt = document.getElementById('ipt');\nlet fee = document.getElementById('fee');\nlet come = document.getElementById('come');\nlet mobile = document.getElementById('mobile');\nlet reFee = '';\nlet reAcconut = '';\n// 获取数据\nhttp.post('/account/info', {}, function (data) {\n  amount.innerHTML = data.available.toFixed(2);\n  bank.innerHTML = data.bankName + '(' + data.bankNo + ')';\n  fee.innerHTML = data.withdrawFee.toFixed(2);\n  mobile.innerHTML = data.mobile;\n  reFee = data.withdrawFee;\n  reAcconut = data.available;\n  if (data.available <= data.withdrawFee) {\n    next.setAttribute('disabled', 'true');\n  }\n});\n\nipt.addEventListener('input', function (e) {\n  let ev = e.target;\n  let val = ev.value;\n  come.innerHTML = (val - reFee) > 0 ? (val - reFee).toFixed(2) : '0.00';\n});\n\n// 定义验证码\nanimation.sendcode({\n  url: '/account/sendVerifyCode',\n  btn: 'sendCode'\n});\n\nnext.addEventListener('click', function () {\n  // 校验输入的值是否合法\n  if (ipt.value > reAcconut) {\n    message.prompt_show('可提现金额不足');\n    return;\n  }\n  if (ipt.value <= reFee) {\n    message.prompt_show('提现金额必须大于手续费');\n    return;\n  }\n  layer.style.display = 'block';\n  sendCode.click();\n});\n\nsubmit.addEventListener('click', function () {\n  if (validate.code(code.value)) {\n    message.load_show('正在校验');\n    http.post('/account/withdraw', {\n      amount: ipt.value,\n      channel: 101,\n      code: code.value\n    }, function () {\n      message.load_hide();\n      window.location.replace('/account/toHssWithdrawSuccess');\n    })\n  }\n});"]}