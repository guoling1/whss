{"version":3,"sources":["bank.js"],"names":["http","_require","message","browser","elastic_touch","bankCardBin","bankLogoColor","HasBank","bin","i","length","bankList","document","getElementById","layer","cancel","enter","bankId","addEventListener","style","display","post","getBankList","data","innerHTML","group","createElement","index","bankBin","className","top","logo","info","name","span","bankName","appendChild","cardType","a","hasBranch","href","b","onclick","type","branchName","bottom","XP1","XP2","XP3","p","word","bankNo","s","reserveMobile","small"],"mappings":";;AAAA;;;;AAIA;AACA,IAAMA,OAAOC,SAAS,MAAT,CAAb;AACA,IAAMC,UAAUD,SAAS,SAAT,CAAhB;AACA,IAAME,UAAUF,SAAS,SAAT,CAAhB;AACAE,QAAQC,aAAR;;AAEA;AACA,IAAIC,cAAc,CAAC,KAAD,EAAQ,UAAR,EAAoB,KAApB,EAA2B,KAA3B,EAAkC,KAAlC,EAAyC,KAAzC,EAAgD,KAAhD,EAAuD,OAAvD,EAAgE,KAAhE,EAAuE,MAAvE,EAA+E,MAA/E,EAAuF,QAAvF,EAAiG,MAAjG,EAAyG,QAAzG,CAAlB;AACA,IAAIC,gBAAgB,CAAC,OAAD,EAAU,MAAV,EAAkB,KAAlB,EAAyB,MAAzB,EAAiC,KAAjC,EAAwC,KAAxC,EAA+C,MAA/C,EAAuD,KAAvD,EAA8D,KAA9D,EAAqE,KAArE,EAA4E,KAA5E,EAAmF,KAAnF,EAA0F,OAA1F,EAAmG,KAAnG,CAApB;;AAEA,IAAIC,UAAU,SAAVA,OAAU,CAACC,GAAD,EAAS;AACrB,OAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIJ,YAAYK,MAAhC,EAAwCD,GAAxC,EAA6C;AAC3C,QAAIJ,YAAYI,CAAZ,KAAkBD,GAAtB,EAA2B;AACzB,aAAOC,CAAP;AACD;AACF;AACD,SAAO,CAAC,CAAR;AACD,CAPD;;AASA,IAAIE,WAAWC,SAASC,cAAT,CAAwB,UAAxB,CAAf;AACA,IAAIC,QAAQF,SAASC,cAAT,CAAwB,OAAxB,CAAZ;AACA,IAAIE,SAASH,SAASC,cAAT,CAAwB,QAAxB,CAAb;AACA,IAAIG,QAAQJ,SAASC,cAAT,CAAwB,OAAxB,CAAZ;AACA,IAAII,SAAS,EAAb;;AAEAF,OAAOG,gBAAP,CAAwB,OAAxB,EAAiC,YAAY;AAC3CJ,QAAMK,KAAN,CAAYC,OAAZ,GAAsB,MAAtB;AACD,CAFD;;AAIAJ,MAAME,gBAAN,CAAuB,OAAvB,EAAgC,YAAY;AAC1ClB,OAAKqB,IAAL,CAAU,sBAAV,EAAkC;AAChCJ,YAAQA;AADwB,GAAlC,EAEG,YAAY;AACbK;AACAR,UAAMK,KAAN,CAAYC,OAAZ,GAAsB,MAAtB;AACD,GALD;AAMD,CAPD;AAQA;AACA,IAAIE,cAAc,SAAdA,WAAc,GAAY;AAC5BtB,OAAKqB,IAAL,CAAU,gBAAV,EAA4B,EAA5B,EAAgC,UAAUE,IAAV,EAAgB;AAC9CZ,aAASa,SAAT,GAAqB,EAArB;;AAD8C,+BAErCf,CAFqC;AAG5C,UAAIgB,QAAQb,SAASc,aAAT,CAAuB,KAAvB,CAAZ;AACA,UAAIC,QAAQpB,QAAQgB,KAAKd,CAAL,EAAQmB,OAAhB,CAAZ;AACA,UAAID,SAAS,CAAC,CAAd,EAAiB;AACfF,cAAMI,SAAN,GAAkB,WAAWvB,cAAcqB,KAAd,CAA7B;AACD,OAFD,MAEO;AACLF,cAAMI,SAAN,GAAkB,WAAlB;AACD;AACD;AACA,UAAIC,MAAMlB,SAASc,aAAT,CAAuB,KAAvB,CAAV;AACAI,UAAID,SAAJ,GAAgB,KAAhB;AACA,UAAIE,OAAOnB,SAASc,aAAT,CAAuB,KAAvB,CAAX;AACA,UAAIC,SAAS,CAAC,CAAd,EAAiB;AACfI,aAAKF,SAAL,GAAiB,UAAUN,KAAKd,CAAL,EAAQmB,OAAnC;AACD,OAFD,MAEO;AACLG,aAAKF,SAAL,GAAiB,cAAjB;AACD;AACD,UAAIG,OAAOpB,SAASc,aAAT,CAAuB,KAAvB,CAAX;AACAM,WAAKH,SAAL,GAAiB,MAAjB;AACA,UAAII,OAAOrB,SAASc,aAAT,CAAuB,KAAvB,CAAX;AACAO,WAAKJ,SAAL,GAAiB,MAAjB;AACA,UAAIK,OAAOtB,SAASc,aAAT,CAAuB,MAAvB,CAAX;AACAQ,WAAKV,SAAL,GAAiBD,KAAKd,CAAL,EAAQ0B,QAAzB;AACAF,WAAKG,WAAL,CAAiBF,IAAjB;AACA,UAAIX,KAAKd,CAAL,EAAQ4B,QAAR,IAAoB,CAAxB,EAA2B;AACzB,YAAIC,IAAI1B,SAASc,aAAT,CAAuB,GAAvB,CAAR;AACA,YAAIC,SAAS,CAAC,CAAd,EAAiB;AACfW,YAAET,SAAF,GAAc,SAASvB,cAAcqB,KAAd,CAAvB;AACD,SAFD,MAEO;AACLW,YAAET,SAAF,GAAc,SAAd;AACD;AACD,YAAIN,KAAKd,CAAL,EAAQ8B,SAAR,IAAqB,CAAzB,EAA4B;AAC1BD,YAAEd,SAAF,GAAc,QAAd;AACD,SAFD,MAEO;AACLc,YAAEd,SAAF,GAAc,QAAd;AACD;AACDc,UAAEE,IAAF,GAAS,qBAAqBjB,KAAKd,CAAL,EAAQQ,MAAtC;AACAgB,aAAKG,WAAL,CAAiBE,CAAjB;AACD,OAdD,MAcO;AACL,YAAIG,IAAI7B,SAASc,aAAT,CAAuB,KAAvB,CAAR;AACA,YAAIC,SAAS,CAAC,CAAd,EAAiB;AACfc,YAAEZ,SAAF,GAAc,SAASvB,cAAcqB,KAAd,CAAvB;AACD,SAFD,MAEO;AACLc,YAAEZ,SAAF,GAAc,SAAd;AACD;AACDY,UAAEjB,SAAF,GAAc,IAAd;AACAiB,UAAEC,OAAF,GAAY,YAAY;AACtB5B,gBAAMK,KAAN,CAAYC,OAAZ,GAAsB,OAAtB;AACAH,mBAASM,KAAKd,CAAL,EAAQQ,MAAjB;AACD,SAHD;AAIAgB,aAAKG,WAAL,CAAiBK,CAAjB;AACD;AACD,UAAIE,OAAO/B,SAASc,aAAT,CAAuB,KAAvB,CAAX;AACAiB,WAAKd,SAAL,GAAiB,MAAjB;AACA,UAAIN,KAAKd,CAAL,EAAQ4B,QAAR,IAAoB,CAAxB,EAA2B;AACzB,YAAId,KAAKd,CAAL,EAAQ8B,SAAR,IAAqB,CAAzB,EAA4B;AAC1BI,eAAKnB,SAAL,GAAiB,KAAjB;AACD,SAFD,MAEO;AACLmB,eAAKnB,SAAL,GAAiB,SAAS,KAAT,GAAiBD,KAAKd,CAAL,EAAQmC,UAA1C;AACD;AACF,OAND,MAMO;AACLD,aAAKnB,SAAL,GAAiB,KAAjB;AACD;AACDQ,WAAKI,WAAL,CAAiBH,IAAjB;AACAD,WAAKI,WAAL,CAAiBO,IAAjB;AACAb,UAAIM,WAAJ,CAAgBL,IAAhB;AACAD,UAAIM,WAAJ,CAAgBJ,IAAhB;AACA;AACA;AACA,UAAIa,SAASjC,SAASc,aAAT,CAAuB,KAAvB,CAAb;AACAmB,aAAOhB,SAAP,GAAmB,QAAnB;AACA,UAAIiB,MAAMlC,SAASc,aAAT,CAAuB,KAAvB,CAAV;AACAoB,UAAIjB,SAAJ,GAAgB,GAAhB;AACAiB,UAAItB,SAAJ,GAAgB,0GAAhB;AACA,UAAIuB,MAAMnC,SAASc,aAAT,CAAuB,KAAvB,CAAV;AACAqB,UAAIlB,SAAJ,GAAgB,GAAhB;AACAkB,UAAIvB,SAAJ,GAAgB,0GAAhB;AACA,UAAIwB,MAAMpC,SAASc,aAAT,CAAuB,KAAvB,CAAV;AACAsB,UAAInB,SAAJ,GAAgB,GAAhB;AACAmB,UAAIxB,SAAJ,GAAgB,0GAAhB;AACA,UAAIyB,IAAIrC,SAASc,aAAT,CAAuB,KAAvB,CAAR;AACAuB,QAAEpB,SAAF,GAAc,GAAd;AACA,UAAIqB,OAAOtC,SAASc,aAAT,CAAuB,KAAvB,CAAX;AACAwB,WAAKrB,SAAL,GAAiB,MAAjB;AACAqB,WAAK1B,SAAL,GAAiBD,KAAKd,CAAL,EAAQ0C,MAAzB;AACAF,QAAEb,WAAF,CAAcc,IAAd;AACA,UAAIE,IAAIxC,SAASc,aAAT,CAAuB,KAAvB,CAAR;AACA0B,QAAEvB,SAAF,GAAc,GAAd;AACAuB,QAAE5B,SAAF,GAAcD,KAAKd,CAAL,EAAQ4C,aAAtB;AACAR,aAAOT,WAAP,CAAmBU,GAAnB;AACAD,aAAOT,WAAP,CAAmBW,GAAnB;AACAF,aAAOT,WAAP,CAAmBY,GAAnB;AACAH,aAAOT,WAAP,CAAmBa,CAAnB;AACAJ,aAAOT,WAAP,CAAmBgB,CAAnB;AACA;AACA3B,YAAMW,WAAN,CAAkBN,GAAlB;AACAL,YAAMW,WAAN,CAAkBS,MAAlB;AACA,UAAItB,KAAKd,CAAL,EAAQ4B,QAAR,IAAoB,CAAxB,EAA2B;AACzB;AACA,YAAIiB,QAAQ1C,SAASc,aAAT,CAAuB,KAAvB,CAAZ;AACA4B,cAAMzB,SAAN,GAAkB,OAAlB;AACAyB,cAAM9B,SAAN,GAAkB,mBAAlB;AACA;AACAC,cAAMW,WAAN,CAAkBkB,KAAlB;AACD;AACD3C,eAASyB,WAAT,CAAqBX,KAArB;AA3G4C;;AAE9C,SAAK,IAAIhB,IAAI,CAAb,EAAgBA,IAAIc,KAAKb,MAAzB,EAAiCD,GAAjC,EAAsC;AAAA,YAA7BA,CAA6B;AA0GrC;AACF,GA7GD;AA8GD,CA/GD;AAgHAa","file":"bank.min.js","sourcesContent":["/**\n * Created by administrator on 2016/12/8.\n */\n\n// 引入浏览器特性处理\nconst http = _require('http');\nconst message = _require('message');\nconst browser = _require('browser');\nbrowser.elastic_touch();\n\n// 卡bin和颜色一一对应\nlet bankCardBin = ['ABC', 'BANKCOMM', 'BOC', 'CCB', 'CEB', 'CGB', 'CIB', 'CITIC', 'CMB', 'CMBC', 'ICBC', 'PINGAN', 'PSBC', 'SHBANK'];\nlet bankLogoColor = ['green', 'blue', 'red', 'blue', 'red', 'red', 'blue', 'red', 'red', 'red', 'red', 'red', 'green', 'red'];\n\nlet HasBank = (bin) => {\n  for (let i = 0; i < bankCardBin.length; i++) {\n    if (bankCardBin[i] == bin) {\n      return i;\n    }\n  }\n  return -1;\n};\n\nlet bankList = document.getElementById('bankList');\nlet layer = document.getElementById('layer');\nlet cancel = document.getElementById('cancel');\nlet enter = document.getElementById('enter');\nlet bankId = '';\n\ncancel.addEventListener('click', function () {\n  layer.style.display = 'none';\n});\n\nenter.addEventListener('click', function () {\n  http.post('/wx/deleteCreditCard', {\n    bankId: bankId\n  }, function () {\n    getBankList();\n    layer.style.display = 'none';\n  })\n});\n// 获取银行卡列表\nlet getBankList = function () {\n  http.post('/wx/myCardList', {}, function (data) {\n    bankList.innerHTML = '';\n    for (let i = 0; i < data.length; i++) {\n      let group = document.createElement('div');\n      let index = HasBank(data[i].bankBin);\n      if (index != -1) {\n        group.className = 'group ' + bankLogoColor[index];\n      } else {\n        group.className = 'group red';\n      }\n      // group top-start\n      let top = document.createElement('div');\n      top.className = 'top';\n      let logo = document.createElement('div');\n      if (index != -1) {\n        logo.className = 'logo ' + data[i].bankBin;\n      } else {\n        logo.className = 'logo DEFAULT';\n      }\n      let info = document.createElement('div');\n      info.className = 'info';\n      let name = document.createElement('div');\n      name.className = 'name';\n      let span = document.createElement('span');\n      span.innerHTML = data[i].bankName;\n      name.appendChild(span);\n      if (data[i].cardType == 0) {\n        let a = document.createElement('a');\n        if (index != -1) {\n          a.className = 'btn ' + bankLogoColor[index];\n        } else {\n          a.className = 'btn red';\n        }\n        if (data[i].hasBranch == 0) {\n          a.innerHTML = '补充支行信息';\n        } else {\n          a.innerHTML = '修改支行信息';\n        }\n        a.href = '/sqb/bankBranch/' + data[i].bankId;\n        name.appendChild(a);\n      } else {\n        let b = document.createElement('div');\n        if (index != -1) {\n          b.className = 'btn ' + bankLogoColor[index];\n        } else {\n          b.className = 'btn red';\n        }\n        b.innerHTML = '删除';\n        b.onclick = function () {\n          layer.style.display = 'block';\n          bankId = data[i].bankId;\n        };\n        name.appendChild(b);\n      }\n      let type = document.createElement('div');\n      type.className = 'type';\n      if (data[i].cardType == 0) {\n        if (data[i].hasBranch == 0) {\n          type.innerHTML = '储蓄卡';\n        } else {\n          type.innerHTML = '储蓄卡 ' + ' | ' + data[i].branchName;\n        }\n      } else {\n        type.innerHTML = '信用卡';\n      }\n      info.appendChild(name);\n      info.appendChild(type);\n      top.appendChild(logo);\n      top.appendChild(info);\n      // group top-end\n      // group bottom-start\n      let bottom = document.createElement('div');\n      bottom.className = 'bottom';\n      let XP1 = document.createElement('div');\n      XP1.className = 'p';\n      XP1.innerHTML = '<div class=\"bank_x\"></div><div class=\"bank_x\"></div><div class=\"bank_x\"></div><div class=\"bank_x\"></div>';\n      let XP2 = document.createElement('div');\n      XP2.className = 'p';\n      XP2.innerHTML = '<div class=\"bank_x\"></div><div class=\"bank_x\"></div><div class=\"bank_x\"></div><div class=\"bank_x\"></div>';\n      let XP3 = document.createElement('div');\n      XP3.className = 'p';\n      XP3.innerHTML = '<div class=\"bank_x\"></div><div class=\"bank_x\"></div><div class=\"bank_x\"></div><div class=\"bank_x\"></div>';\n      let p = document.createElement('div');\n      p.className = 'p';\n      let word = document.createElement('div');\n      word.className = 'word';\n      word.innerHTML = data[i].bankNo;\n      p.appendChild(word);\n      let s = document.createElement('div');\n      s.className = 's';\n      s.innerHTML = data[i].reserveMobile;\n      bottom.appendChild(XP1);\n      bottom.appendChild(XP2);\n      bottom.appendChild(XP3);\n      bottom.appendChild(p);\n      bottom.appendChild(s);\n      // group bottom-end\n      group.appendChild(top);\n      group.appendChild(bottom);\n      if (data[i].cardType == 0) {\n        // group small-start\n        let small = document.createElement('div');\n        small.className = 'small';\n        small.innerHTML = '该卡用于收款后的自动结算与余额提现';\n        // group small-end\n        group.appendChild(small);\n      }\n      bankList.appendChild(group);\n    }\n  });\n};\ngetBankList();\n"]}