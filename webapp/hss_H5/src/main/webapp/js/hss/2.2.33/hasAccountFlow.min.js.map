{"version":3,"sources":["hasAccountFlow.js"],"names":["browser","_require","elastic_touch","AnimationCountdown","countdown","validate","message","http","empty","document","getElementById","content","list","createElement","nowPage","more","className","innerHTML","style","display","height","lineHeight","fontSize","color","backgroundColor","addEventListener","getData","appendChild","e","page","post","pageNo","pageSize","res","count","i","records","length","div_list","div_left","div_top","div_span","incomeAmount","div_spanS","remark","div_bottom","createTime","div_right","outAmount","hasNextPage","insertBefore","childNodes"],"mappings":"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","file":"hasAccountFlow.min.js","sourcesContent":["/**\r\n * Created by administrator on 2016/12/8.\r\n */\r\n\r\n// 引入浏览器特性处理\r\nconst browser = _require('browser');\r\nbrowser.elastic_touch('list');\r\n// 引入动画模版 处理验证码\r\nconst AnimationCountdown = _require('art-countdown');\r\nlet countdown = new AnimationCountdown('sendCode', '重新获取');\r\n// 引入http message\r\nconst validate = _require('validate');\r\nconst message = _require('message');\r\nconst http = _require('http');\r\n\r\n// 定义ajax事件\r\nlet empty = document.getElementById('empty');\r\nlet content = document.getElementById('content');\r\nlet list = document.createElement('list');\r\nlet nowPage = 1;\r\nlet more = document.createElement('div');\r\nmore.className = 'touch_more';\r\nmore.innerHTML = '加载更多';\r\nmore.style.display = 'none';\r\nmore.style.height = '50px';\r\nmore.style.lineHeight = '50px';\r\nmore.style.fontSize = '16px';\r\nmore.style.color = '#999';\r\nmore.style.backgroundColor = '#f4f5f8';\r\nmore.addEventListener('touchstart', function () {\r\n  more.style.backgroundColor = '#d8d7dc';\r\n});\r\nmore.addEventListener('touchend', function () {\r\n  more.style.backgroundColor = '#f4f5f8';\r\n});\r\nmore.addEventListener('click', function () {\r\n  getData(null, nowPage + 1);\r\n});\r\ncontent.appendChild(more);\r\n\r\nlet getData = function (e, page) {\r\n  // 检查page 如果page为1 清空content数据\r\n  nowPage = page || 1;\r\n  if (nowPage == 1) {\r\n    list.innerHTML = '';\r\n  }\r\n  http.post('/account/flowDetails', {\r\n    pageNo: nowPage,\r\n    pageSize: 20\r\n  }, function (res) {\r\n    if (res.count == 0) {\r\n      empty.style.display = 'block';\r\n      return;\r\n    }\r\n    empty.style.display = 'none';\r\n    for (let i = 0; i < res.records.length; i++) {\r\n      let div_list = document.createElement('div');\r\n      div_list.className = 'flow-group';\r\n      let div_left = document.createElement('div');\r\n      div_left.className = 'flow-left';\r\n      let div_top = document.createElement('div');\r\n      div_top.className = 'flow-top';\r\n      let div_span = document.createElement('span');\r\n      if (res.records[i].incomeAmount > 0) {\r\n        div_span.innerHTML = '收入';\r\n      } else {\r\n        div_span.innerHTML = '支出';\r\n      }\r\n      let div_spanS = document.createElement('span');\r\n      div_spanS.className = 's';\r\n      if (res.records[i].remark == '支付') {\r\n        div_spanS.innerHTML = '收款';\r\n      } else {\r\n        div_spanS.innerHTML = res.records[i].remark;\r\n      }\r\n      div_top.appendChild(div_span);\r\n      div_top.appendChild(div_spanS);\r\n      let div_bottom = document.createElement('div');\r\n      div_bottom.className = 'flow-bottom';\r\n      div_bottom.innerHTML = res.records[i].createTime;\r\n      div_left.appendChild(div_top);\r\n      div_left.appendChild(div_bottom);\r\n      let div_right = document.createElement('div');\r\n      if (res.records[i].incomeAmount > 0) {\r\n        div_right.className = 'flow-right green';\r\n        div_right.innerHTML = '+' + res.records[i].incomeAmount;\r\n      } else {\r\n        div_right.className = 'flow-right red';\r\n        div_right.innerHTML = '-' + res.records[i].outAmount;\r\n      }\r\n      div_list.appendChild(div_left);\r\n      div_list.appendChild(div_right);\r\n      list.appendChild(div_list);\r\n    }\r\n    // 判断是否还有下一页\r\n    if (res.hasNextPage) {\r\n      more.style.display = 'block';\r\n    } else {\r\n      more.style.display = 'none';\r\n    }\r\n    content.insertBefore(list, content.childNodes[0]);\r\n  })\r\n};\r\n// 初始化数据\r\ngetData();"]}