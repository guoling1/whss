{"version":3,"sources":["tradeRecord.js"],"names":["message","_require","http","tools","TimePicker","browser","elastic_touch","startDate","document","getElementById","endDate","query","unfold","cancel","submit","nowPage","payStatusCode","payTypeCode","content","list","createElement","more","className","innerHTML","style","display","height","lineHeight","fontSize","color","backgroundColor","addEventListener","getData","appendChild","payStatus","payType","e","page","post","pageNo","pageSize","orderNo","value","res","i","records","length","group","href","orderId","top","topLeft","topRight","amount","bottom","bottomLeft","payStatusValue","bottomRight","dateFormat","datetime","hasNextPage","insertBefore","childNodes","payVariable","paySuccess","type","status","payError","payWait","payWx","payAli","payQuick","li","getElementsByClassName","variable","getAttribute","prompt_show","indexOf","push"],"mappings":"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","file":"tradeRecord.min.js","sourcesContent":["/**\n * Created by administrator on 2016/12/13.\n */\n\n// 引入 message http\nconst message = _require('message');\nconst http = _require('http');\nconst tools = _require('tools');\n// 引入时间选择器\nconst TimePicker = _require('timePicker');\nnew TimePicker('dateFrom');\nnew TimePicker('dateTo');\n// 引入浏览器特性处理\nconst browser = _require('browser');\nbrowser.elastic_touch('list');\n// 定义变量\nlet startDate = document.getElementById('dateFrom');\nlet endDate = document.getElementById('dateTo');\n// 定义变量\nlet query = document.getElementById('query');\nlet unfold = document.getElementById('unfold');\nlet cancel = document.getElementById('cancel');\nlet submit = document.getElementById('submit');\n// 定义初始变量\nlet nowPage = 1;\nlet payStatusCode = ['4'];\nlet payTypeCode = ['1', '2', '3'];\n// 定义加载更多\nlet content = document.getElementById('content');\nlet list = document.createElement('div');\nlet more = document.createElement('div');\nmore.className = 'touch_more';\nmore.innerHTML = '加载更多';\nmore.style.display = 'none';\nmore.style.height = '50px';\nmore.style.lineHeight = '50px';\nmore.style.fontSize = '16px';\nmore.style.color = '#999';\nmore.style.backgroundColor = '#f0eff5';\nmore.addEventListener('touchstart', function () {\n  more.style.backgroundColor = '#d8d7dc';\n});\nmore.addEventListener('touchend', function () {\n  more.style.backgroundColor = '#f0eff5';\n});\nmore.addEventListener('click', function () {\n  getData(null, nowPage + 1);\n});\ncontent.appendChild(more);\n// 定义支付\nconst payStatus = {\n  1: '待支付',\n  3: '交易失败',\n  4: '交易成功'\n};\n// 定义支付方式\nconst payType = {\n  1: '微信',\n  2: '支付宝',\n  3: '快捷'\n};\n// 定义ajax事件\nlet getData = function (e, page) {\n  // 检查page 如果page为1 清空content数据\n  nowPage = page || 1;\n  if (nowPage == 1) {\n    list.innerHTML = '';\n  }\n  http.post('/trade/queryMerchantPayOrders', {\n    pageNo: nowPage,\n    pageSize: 20,\n    orderNo: '',  //交易订单号\n    payStatus: payStatusCode,   //支付状态（1：待支付，3：支付失败，4：支付成功）\n    payType: payTypeCode,    //支付方式\n    startDate: startDate.value,\n    endDate: endDate.value\n  }, function (res) {\n    for (let i = 0; i < res.records.length; i++) {\n      let group = document.createElement('a');\n      group.href = '/trade/detail/' + res.records[i].orderId;\n      group.className = 'group';\n      let top = document.createElement('div');\n      top.className = 'top';\n      let topLeft = document.createElement('div');\n      topLeft.className = 'left';\n      if (res.records[i].payStatus == '4') {\n        topLeft.innerHTML = payStatus[res.records[i].payStatus] + '-' + res.records[i].payType;\n      } else {\n        topLeft.innerHTML = payStatus[res.records[i].payStatus];\n      }\n      let topRight = document.createElement('div');\n      topRight.className = 'right';\n      topRight.innerHTML = '+' + res.records[i].amount + '元';\n      top.appendChild(topLeft);\n      top.appendChild(topRight);\n      let bottom = document.createElement('div');\n      bottom.className = 'bottom';\n      let bottomLeft = document.createElement('div');\n      bottomLeft.className = 'left';\n      bottomLeft.innerHTML = res.records[i].payStatusValue;\n      let bottomRight = document.createElement('div');\n      bottomRight.className = 'right';\n      bottomRight.innerHTML = tools.dateFormat('YYYY-MM-DD HH:mm:ss', res.records[i].datetime);\n      bottom.appendChild(bottomLeft);\n      bottom.appendChild(bottomRight);\n      group.appendChild(top);\n      group.appendChild(bottom);\n      list.appendChild(group);\n    }\n    // 判断是否还有下一页\n    if (res.hasNextPage) {\n      more.style.display = 'block';\n    } else {\n      more.style.display = 'none';\n    }\n    content.insertBefore(list, content.childNodes[0]);\n    // 根据 e 判断是否为 时间改变的change事件\n    if (!e) {\n      query.className = 'query';\n    }\n  })\n};\n// 初始化数据\ngetData();\nstartDate.addEventListener('change', getData);\nendDate.addEventListener('change', getData);\n\nunfold.addEventListener('click', function () {\n  query.className = 'query flexBox flex-box-column active';\n});\ncancel.addEventListener('click', function () {\n  query.className = 'query';\n});\n// 定义筛选条件\nlet payVariable = {\n  paySuccess: {\n    type: 'payStatusCode',\n    status: true,\n    value: 4\n  },\n  payError: {\n    type: 'payStatusCode',\n    status: false,\n    value: 3\n  },\n  payWait: {\n    type: 'payStatusCode',\n    status: false,\n    value: 1\n  },\n  payWx: {\n    type: 'payTypeCode',\n    status: true,\n    value: 1\n  },\n  payAli: {\n    type: 'payTypeCode',\n    status: true,\n    value: 2\n  },\n  payQuick: {\n    type: 'payTypeCode',\n    status: true,\n    value: 3\n  }\n};\nlet li = document.getElementsByClassName('li');\nfor (let i = 0; i < li.length; i++) {\n  li[i].addEventListener('click', function () {\n    // 处理变量\n    let variable = this.getAttribute('y-variable');\n    payVariable[variable]['status'] = !payVariable[variable]['status'];\n    // 处理变量唯一性\n    if (!payVariable.paySuccess.status && !payVariable.payError.status && !payVariable.payError.status) {\n      message.prompt_show('至少选择一种支付状态');\n      payVariable[variable]['status'] = !payVariable[variable]['status'];\n      return;\n    }\n    if (!payVariable.payWx.status && !payVariable.payAli.status && !payVariable.payQuick.status) {\n      message.prompt_show('至少选择一种支付方式');\n      payVariable[variable]['status'] = !payVariable[variable]['status'];\n      return;\n    }\n    // 处理样式\n    if (this.className.indexOf('active') > -1) {\n      this.className = 'li';\n    } else {\n      this.className = 'li active';\n    }\n  })\n}\nsubmit.addEventListener('click', function () {\n  // 处理请求数据\n  payStatusCode = [];\n  payTypeCode = [];\n  for (let i in payVariable) {\n    if (payVariable[i]['status']) {\n      if (payVariable[i]['type'] == 'payStatusCode') {\n        payStatusCode.push(payVariable[i]['value'])\n      } else if (payVariable[i]['type'] == 'payTypeCode') {\n        payTypeCode.push(payVariable[i]['value'])\n      }\n    }\n  }\n  // 唤起请求事件\n  getData();\n});\n"]}