{"version":3,"sources":["tradeRecord.js"],"names":["message","_require","http","tools","TimePicker","browser","elastic_touch","startDate","document","getElementById","endDate","query","unfold","cancel","submit","nowPage","payStatusCode","payTypeCode","content","list","createElement","more","className","innerHTML","style","display","height","lineHeight","fontSize","color","backgroundColor","addEventListener","getData","appendChild","payStatus","payType","S","N","H","B","Z","e","page","post","pageNo","pageSize","orderNo","value","res","i","records","length","group","href","orderId","top","topLeft","topRight","amount","bottom","bottomLeft","payStatusValue","bottomRight","dateFormat","datetime","hasNextPage","insertBefore","childNodes","payVariable","paySuccess","status","payError","payWait","payWx","payAli","payQuick","li","getElementsByClassName","variable","getAttribute","prompt_show","indexOf","push"],"mappings":";;AAAA;;;;AAIA;AACA,IAAMA,UAAUC,SAAS,SAAT,CAAhB;AACA,IAAMC,OAAOD,SAAS,MAAT,CAAb;AACA,IAAME,QAAQF,SAAS,OAAT,CAAd;AACA;AACA,IAAMG,aAAaH,SAAS,YAAT,CAAnB;AACA,IAAIG,UAAJ,CAAe,UAAf;AACA,IAAIA,UAAJ,CAAe,QAAf;AACA;AACA,IAAMC,UAAUJ,SAAS,SAAT,CAAhB;AACAI,QAAQC,aAAR,CAAsB,MAAtB;AACA;AACA,IAAIC,YAAYC,SAASC,cAAT,CAAwB,UAAxB,CAAhB;AACA,IAAIC,UAAUF,SAASC,cAAT,CAAwB,QAAxB,CAAd;AACA;AACA,IAAIE,QAAQH,SAASC,cAAT,CAAwB,OAAxB,CAAZ;AACA,IAAIG,SAASJ,SAASC,cAAT,CAAwB,QAAxB,CAAb;AACA,IAAII,SAASL,SAASC,cAAT,CAAwB,QAAxB,CAAb;AACA,IAAIK,SAASN,SAASC,cAAT,CAAwB,QAAxB,CAAb;AACA;AACA,IAAIM,UAAU,CAAd;AACA,IAAIC,gBAAgB,CAAC,GAAD,CAApB;AACA,IAAIC,cAAc,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAlB;AACA;AACA,IAAIC,UAAUV,SAASC,cAAT,CAAwB,SAAxB,CAAd;AACA,IAAIU,OAAOX,SAASY,aAAT,CAAuB,KAAvB,CAAX;AACA,IAAIC,OAAOb,SAASY,aAAT,CAAuB,KAAvB,CAAX;AACAC,KAAKC,SAAL,GAAiB,YAAjB;AACAD,KAAKE,SAAL,GAAiB,MAAjB;AACAF,KAAKG,KAAL,CAAWC,OAAX,GAAqB,MAArB;AACAJ,KAAKG,KAAL,CAAWE,MAAX,GAAoB,MAApB;AACAL,KAAKG,KAAL,CAAWG,UAAX,GAAwB,MAAxB;AACAN,KAAKG,KAAL,CAAWI,QAAX,GAAsB,MAAtB;AACAP,KAAKG,KAAL,CAAWK,KAAX,GAAmB,MAAnB;AACAR,KAAKG,KAAL,CAAWM,eAAX,GAA6B,SAA7B;AACAT,KAAKU,gBAAL,CAAsB,YAAtB,EAAoC,YAAY;AAC9CV,OAAKG,KAAL,CAAWM,eAAX,GAA6B,SAA7B;AACD,CAFD;AAGAT,KAAKU,gBAAL,CAAsB,UAAtB,EAAkC,YAAY;AAC5CV,OAAKG,KAAL,CAAWM,eAAX,GAA6B,SAA7B;AACD,CAFD;AAGAT,KAAKU,gBAAL,CAAsB,OAAtB,EAA+B,YAAY;AACzCC,UAAQ,IAAR,EAAcjB,UAAU,CAAxB;AACD,CAFD;AAGAG,QAAQe,WAAR,CAAoBZ,IAApB;AACA;AACA,IAAMa,YAAY;AAChB,KAAG,KADa;AAEhB,KAAG,MAFa;AAGhB,KAAG;AAHa,CAAlB;AAKA;AACA,IAAMC,UAAU;AACdC,KAAG,MADW;AAEdC,KAAG,OAFW;AAGdC,KAAG,MAHW,EAGH;AACXC,KAAG,MAJW;AAKdC,KAAG;AALW,CAAhB;AAOA;AACA,IAAIR,UAAU,SAAVA,OAAU,CAAUS,CAAV,EAAaC,IAAb,EAAmB;AAC/B;AACA3B,YAAU2B,QAAQ,CAAlB;AACA,MAAI3B,WAAW,CAAf,EAAkB;AAChBI,SAAKI,SAAL,GAAiB,EAAjB;AACD;AACDrB,OAAKyC,IAAL,CAAU,+BAAV,EAA2C;AACzCC,YAAQ7B,OADiC;AAEzC8B,cAAU,EAF+B;AAGzCC,aAAS,EAHgC,EAG3B;AACdZ,eAAWlB,aAJ8B,EAIb;AAC5BmB,aAASlB,WALgC,EAKhB;AACzBV,eAAWA,UAAUwC,KANoB;AAOzCrC,aAASA,QAAQqC;AAPwB,GAA3C,EAQG,UAAUC,GAAV,EAAe;AAChB,SAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAID,IAAIE,OAAJ,CAAYC,MAAhC,EAAwCF,GAAxC,EAA6C;AAC3C,UAAIG,QAAQ5C,SAASY,aAAT,CAAuB,GAAvB,CAAZ;AACAgC,YAAMC,IAAN,GAAa,sBAAsBL,IAAIE,OAAJ,CAAYD,CAAZ,EAAeK,OAAlD;AACAF,YAAM9B,SAAN,GAAkB,OAAlB;AACA,UAAIiC,MAAM/C,SAASY,aAAT,CAAuB,KAAvB,CAAV;AACAmC,UAAIjC,SAAJ,GAAgB,KAAhB;AACA,UAAIkC,UAAUhD,SAASY,aAAT,CAAuB,KAAvB,CAAd;AACAoC,cAAQlC,SAAR,GAAoB,MAApB;AACA,UAAI0B,IAAIE,OAAJ,CAAYD,CAAZ,EAAef,SAAf,IAA4B,GAAhC,EAAqC;AACnCsB,gBAAQjC,SAAR,GAAoBW,UAAUc,IAAIE,OAAJ,CAAYD,CAAZ,EAAef,SAAzB,IAAsC,GAAtC,GAA4CC,QAAQa,IAAIE,OAAJ,CAAYD,CAAZ,EAAed,OAAvB,CAAhE;AACD,OAFD,MAEO;AACLqB,gBAAQjC,SAAR,GAAoBW,UAAUc,IAAIE,OAAJ,CAAYD,CAAZ,EAAef,SAAzB,CAApB;AACD;AACD,UAAIuB,WAAWjD,SAASY,aAAT,CAAuB,KAAvB,CAAf;AACAqC,eAASnC,SAAT,GAAqB,OAArB;AACAmC,eAASlC,SAAT,GAAqB,MAAMyB,IAAIE,OAAJ,CAAYD,CAAZ,EAAeS,MAArB,GAA8B,GAAnD;AACAH,UAAItB,WAAJ,CAAgBuB,OAAhB;AACAD,UAAItB,WAAJ,CAAgBwB,QAAhB;AACA,UAAIE,SAASnD,SAASY,aAAT,CAAuB,KAAvB,CAAb;AACAuC,aAAOrC,SAAP,GAAmB,QAAnB;AACA,UAAIsC,aAAapD,SAASY,aAAT,CAAuB,KAAvB,CAAjB;AACAwC,iBAAWtC,SAAX,GAAuB,MAAvB;AACAsC,iBAAWrC,SAAX,GAAuByB,IAAIE,OAAJ,CAAYD,CAAZ,EAAeY,cAAtC;AACA,UAAIC,cAActD,SAASY,aAAT,CAAuB,KAAvB,CAAlB;AACA0C,kBAAYxC,SAAZ,GAAwB,OAAxB;AACAwC,kBAAYvC,SAAZ,GAAwBpB,MAAM4D,UAAN,CAAiB,qBAAjB,EAAwCf,IAAIE,OAAJ,CAAYD,CAAZ,EAAee,QAAvD,CAAxB;AACAL,aAAO1B,WAAP,CAAmB2B,UAAnB;AACAD,aAAO1B,WAAP,CAAmB6B,WAAnB;AACAV,YAAMnB,WAAN,CAAkBsB,GAAlB;AACAH,YAAMnB,WAAN,CAAkB0B,MAAlB;AACAxC,WAAKc,WAAL,CAAiBmB,KAAjB;AACD;AACD;AACA,QAAIJ,IAAIiB,WAAR,EAAqB;AACnB5C,WAAKG,KAAL,CAAWC,OAAX,GAAqB,OAArB;AACD,KAFD,MAEO;AACLJ,WAAKG,KAAL,CAAWC,OAAX,GAAqB,MAArB;AACD;AACDP,YAAQgD,YAAR,CAAqB/C,IAArB,EAA2BD,QAAQiD,UAAR,CAAmB,CAAnB,CAA3B;AACA;AACA,QAAI,CAAC1B,CAAL,EAAQ;AACN9B,YAAMW,SAAN,GAAkB,OAAlB;AACD;AACF,GApDD;AAqDD,CA3DD;AA4DA;AACAU;AACAzB,UAAUwB,gBAAV,CAA2B,QAA3B,EAAqCC,OAArC;AACAtB,QAAQqB,gBAAR,CAAyB,QAAzB,EAAmCC,OAAnC;;AAEApB,OAAOmB,gBAAP,CAAwB,OAAxB,EAAiC,YAAY;AAC3CpB,QAAMW,SAAN,GAAkB,sCAAlB;AACD,CAFD;AAGAT,OAAOkB,gBAAP,CAAwB,OAAxB,EAAiC,YAAY;AAC3CpB,QAAMW,SAAN,GAAkB,OAAlB;AACD,CAFD;AAGA;AACA,IAAI8C,cAAc;AAChBC,cAAY;AACVC,YAAQ,IADE;AAEVvB,WAAO;AAFG,GADI;AAKhBwB,YAAU;AACRD,YAAQ,KADA;AAERvB,WAAO;AAFC,GALM;AAShByB,WAAS;AACPF,YAAQ,KADD;AAEPvB,WAAO;AAFA,GATO;AAahB0B,SAAO;AACLH,YAAQ,IADH;AAELvB,WAAO;AAFF,GAbS;AAiBhB2B,UAAQ;AACNJ,YAAQ,IADF;AAENvB,WAAO;AAFD,GAjBQ;AAqBhB4B,YAAU;AACRL,YAAQ,IADA;AAERvB,WAAO;AAFC;AArBM,CAAlB;AA0BA,IAAI6B,KAAKpE,SAASqE,sBAAT,CAAgC,IAAhC,CAAT;AACA,KAAK,IAAI5B,IAAI,CAAb,EAAgBA,IAAI2B,GAAGzB,MAAvB,EAA+BF,GAA/B,EAAoC;AAClC2B,KAAG3B,CAAH,EAAMlB,gBAAN,CAAuB,OAAvB,EAAgC,YAAY;AAC1C;AACA,QAAI+C,WAAW,KAAKC,YAAL,CAAkB,YAAlB,CAAf;AACAX,gBAAYU,QAAZ,EAAsB,QAAtB,IAAkC,CAACV,YAAYU,QAAZ,EAAsB,QAAtB,CAAnC;AACA;AACA,QAAI,CAACV,YAAYC,UAAZ,CAAuBC,MAAxB,IAAkC,CAACF,YAAYG,QAAZ,CAAqBD,MAAxD,IAAkE,CAACF,YAAYG,QAAZ,CAAqBD,MAA5F,EAAoG;AAClGtE,cAAQgF,WAAR,CAAoB,YAApB;AACAZ,kBAAYU,QAAZ,EAAsB,QAAtB,IAAkC,CAACV,YAAYU,QAAZ,EAAsB,QAAtB,CAAnC;AACA;AACD;AACD,QAAI,CAACV,YAAYK,KAAZ,CAAkBH,MAAnB,IAA6B,CAACF,YAAYM,MAAZ,CAAmBJ,MAAjD,IAA2D,CAACF,YAAYO,QAAZ,CAAqBL,MAArF,EAA6F;AAC3FtE,cAAQgF,WAAR,CAAoB,YAApB;AACAZ,kBAAYU,QAAZ,EAAsB,QAAtB,IAAkC,CAACV,YAAYU,QAAZ,EAAsB,QAAtB,CAAnC;AACA;AACD;AACD;AACA,QAAI,KAAKxD,SAAL,CAAe2D,OAAf,CAAuB,QAAvB,IAAmC,CAAC,CAAxC,EAA2C;AACzC,WAAK3D,SAAL,GAAiB,IAAjB;AACD,KAFD,MAEO;AACL,WAAKA,SAAL,GAAiB,WAAjB;AACD;AACF,GArBD;AAsBD;AACDR,OAAOiB,gBAAP,CAAwB,OAAxB,EAAiC,YAAY;AAC3C;AACAf,kBAAgB,EAAhB;AACAC,gBAAc,EAAd;AACA,OAAK,IAAIgC,EAAT,IAAcmB,WAAd,EAA2B;AACzB,QAAIA,YAAYnB,EAAZ,EAAe,QAAf,CAAJ,EAA8B;AAC5B,UAAI,OAAQmB,YAAYnB,EAAZ,EAAe,OAAf,CAAR,IAAoC,QAAxC,EAAkD;AAChDjC,sBAAckE,IAAd,CAAmBd,YAAYnB,EAAZ,EAAe,OAAf,CAAnB;AACD,OAFD,MAEO,IAAI,OAAQmB,YAAYnB,EAAZ,EAAe,OAAf,CAAR,IAAoC,QAAxC,EAAkD;AACvDhC,oBAAYiE,IAAZ,CAAiBd,YAAYnB,EAAZ,EAAe,OAAf,CAAjB;AACD;AACF;AACF;AACD;AACAjB;AACD,CAfD","file":"tradeRecord.min.js","sourcesContent":["/**\n * Created by administrator on 2016/12/13.\n */\n\n// 引入 message http\nconst message = _require('message');\nconst http = _require('http');\nconst tools = _require('tools');\n// 引入时间选择器\nconst TimePicker = _require('timePicker');\nnew TimePicker('dateFrom');\nnew TimePicker('dateTo');\n// 引入浏览器特性处理\nconst browser = _require('browser');\nbrowser.elastic_touch('list');\n// 定义变量\nlet startDate = document.getElementById('dateFrom');\nlet endDate = document.getElementById('dateTo');\n// 定义变量\nlet query = document.getElementById('query');\nlet unfold = document.getElementById('unfold');\nlet cancel = document.getElementById('cancel');\nlet submit = document.getElementById('submit');\n// 定义初始变量\nlet nowPage = 1;\nlet payStatusCode = ['4'];\nlet payTypeCode = ['H', 'Z', 'B'];\n// 定义加载更多\nlet content = document.getElementById('content');\nlet list = document.createElement('div');\nlet more = document.createElement('div');\nmore.className = 'touch_more';\nmore.innerHTML = '加载更多';\nmore.style.display = 'none';\nmore.style.height = '50px';\nmore.style.lineHeight = '50px';\nmore.style.fontSize = '16px';\nmore.style.color = '#999';\nmore.style.backgroundColor = '#f0eff5';\nmore.addEventListener('touchstart', function () {\n  more.style.backgroundColor = '#d8d7dc';\n});\nmore.addEventListener('touchend', function () {\n  more.style.backgroundColor = '#f0eff5';\n});\nmore.addEventListener('click', function () {\n  getData(null, nowPage + 1);\n});\ncontent.appendChild(more);\n// 定义支付\nconst payStatus = {\n  1: '待支付',\n  3: '支付失败',\n  4: '支付成功'\n};\n// 定义支付方式\nconst payType = {\n  S: '微信扫码',\n  N: '微信二维码',\n  H: '微信扫码', //微信H5收银台\n  B: '快捷收款',\n  Z: '支付宝扫码'\n};\n// 定义ajax事件\nlet getData = function (e, page) {\n  // 检查page 如果page为1 清空content数据\n  nowPage = page || 1;\n  if (nowPage == 1) {\n    list.innerHTML = '';\n  }\n  http.post('/trade/queryMerchantPayOrders', {\n    pageNo: nowPage,\n    pageSize: 20,\n    orderNo: '',  //交易订单号\n    payStatus: payStatusCode,   //支付状态（1：待支付，3：支付失败，4：支付成功）\n    payType: payTypeCode,    //支付方式\n    startDate: startDate.value,\n    endDate: endDate.value\n  }, function (res) {\n    for (let i = 0; i < res.records.length; i++) {\n      let group = document.createElement('a');\n      group.href = '/sqb/tradeDetail/' + res.records[i].orderId;\n      group.className = 'group';\n      let top = document.createElement('div');\n      top.className = 'top';\n      let topLeft = document.createElement('div');\n      topLeft.className = 'left';\n      if (res.records[i].payStatus == '4') {\n        topLeft.innerHTML = payStatus[res.records[i].payStatus] + '-' + payType[res.records[i].payType]\n      } else {\n        topLeft.innerHTML = payStatus[res.records[i].payStatus];\n      }\n      let topRight = document.createElement('div');\n      topRight.className = 'right';\n      topRight.innerHTML = '+' + res.records[i].amount + '元';\n      top.appendChild(topLeft);\n      top.appendChild(topRight);\n      let bottom = document.createElement('div');\n      bottom.className = 'bottom';\n      let bottomLeft = document.createElement('div');\n      bottomLeft.className = 'left';\n      bottomLeft.innerHTML = res.records[i].payStatusValue;\n      let bottomRight = document.createElement('div');\n      bottomRight.className = 'right';\n      bottomRight.innerHTML = tools.dateFormat('YYYY-MM-DD HH:mm:ss', res.records[i].datetime);\n      bottom.appendChild(bottomLeft);\n      bottom.appendChild(bottomRight);\n      group.appendChild(top);\n      group.appendChild(bottom);\n      list.appendChild(group);\n    }\n    // 判断是否还有下一页\n    if (res.hasNextPage) {\n      more.style.display = 'block';\n    } else {\n      more.style.display = 'none';\n    }\n    content.insertBefore(list, content.childNodes[0]);\n    // 根据 e 判断是否为 时间改变的change事件\n    if (!e) {\n      query.className = 'query';\n    }\n  })\n};\n// 初始化数据\ngetData();\nstartDate.addEventListener('change', getData);\nendDate.addEventListener('change', getData);\n\nunfold.addEventListener('click', function () {\n  query.className = 'query flexBox flex-box-column active';\n});\ncancel.addEventListener('click', function () {\n  query.className = 'query';\n});\n// 定义筛选条件\nlet payVariable = {\n  paySuccess: {\n    status: true,\n    value: 4\n  },\n  payError: {\n    status: false,\n    value: 3\n  },\n  payWait: {\n    status: false,\n    value: 1\n  },\n  payWx: {\n    status: true,\n    value: 'H'\n  },\n  payAli: {\n    status: true,\n    value: 'Z'\n  },\n  payQuick: {\n    status: true,\n    value: 'B'\n  }\n};\nlet li = document.getElementsByClassName('li');\nfor (let i = 0; i < li.length; i++) {\n  li[i].addEventListener('click', function () {\n    // 处理变量\n    let variable = this.getAttribute('y-variable');\n    payVariable[variable]['status'] = !payVariable[variable]['status'];\n    // 处理变量唯一性\n    if (!payVariable.paySuccess.status && !payVariable.payError.status && !payVariable.payError.status) {\n      message.prompt_show('至少选择一种支付状态');\n      payVariable[variable]['status'] = !payVariable[variable]['status'];\n      return;\n    }\n    if (!payVariable.payWx.status && !payVariable.payAli.status && !payVariable.payQuick.status) {\n      message.prompt_show('至少选择一种支付方式');\n      payVariable[variable]['status'] = !payVariable[variable]['status'];\n      return;\n    }\n    // 处理样式\n    if (this.className.indexOf('active') > -1) {\n      this.className = 'li';\n    } else {\n      this.className = 'li active';\n    }\n  })\n}\nsubmit.addEventListener('click', function () {\n  // 处理请求数据\n  payStatusCode = [];\n  payTypeCode = [];\n  for (let i in payVariable) {\n    if (payVariable[i]['status']) {\n      if (typeof (payVariable[i]['value']) == 'number') {\n        payStatusCode.push(payVariable[i]['value'])\n      } else if (typeof (payVariable[i]['value']) == 'string') {\n        payTypeCode.push(payVariable[i]['value'])\n      }\n    }\n  }\n  // 唤起请求事件\n  getData();\n});\n"]}