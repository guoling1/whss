'use strict';

/**
 * Created by administrator on 2016/12/13.
 */

// 引入 message http
var message = _require('message');
var http = _require('http');
// 引入时间选择器
var TimePicker = _require('timePicker');
new TimePicker('dateFrom');
new TimePicker('dateTo');
// 引入浏览器特性处理
var browser = _require('browser');
browser.elastic_touch('list');
// 引入分页插件
var Paging = _require('paging');
var pag = new Paging('trade_record', {
  content: 'content',
  url: '/trade/queryMerchantPayOrders',
  size: 20,
  startDate: 'dateFrom',
  endDate: 'dateTo'
});
// 定义变量
var query = document.getElementById('query');
var unfold = document.getElementById('unfold');
var cancel = document.getElementById('cancel');
var submit = document.getElementById('submit');
unfold.addEventListener('click', function () {
  query.className = 'query flexBox flex-box-column active';
});
cancel.addEventListener('click', function () {
  query.className = 'query';
});
// 定义筛选条件
var payVariable = {
  paySuccess: {
    status: true,
    value: 4
  },
  payError: {
    status: false,
    value: 3
  },
  payWait: {
    status: false,
    value: 1
  },
  payWx: {
    status: true,
    value: 'H'
  },
  payAli: {
    status: true,
    value: 'Z'
  },
  payQuick: {
    status: true,
    value: 'B'
  }
};
var li = document.getElementsByClassName('li');
for (var i = 0; i < li.length; i++) {
  li[i].addEventListener('click', function () {
    // 处理变量
    var variable = this.getAttribute('y-variable');
    payVariable[variable]['status'] = !payVariable[variable]['status'];
    // 处理变量唯一性
    if (!payVariable.paySuccess.status && !payVariable.payError.status && !payVariable.payError.status) {
      message.prompt_show('至少选择一种支付状态');
      payVariable[variable]['status'] = !payVariable[variable]['status'];
      console.log(payVariable);
      return;
    }
    if (!payVariable.payWx.status && !payVariable.payAli.status && !payVariable.payQuick.status) {
      message.prompt_show('至少选择一种支付方式');
      payVariable[variable]['status'] = !payVariable[variable]['status'];
      console.log(payVariable);
      return;
    }
    // 处理样式
    if (this.className.indexOf('active') > -1) {
      this.className = 'li';
    } else {
      this.className = 'li active';
    }
  });
}
// 定义传输变量
var payStatus = ['4'];
var payType = ['H', 'Z', 'B'];
submit.addEventListener('click', function () {
  // 处理请求数据
  payStatus = [];
  payType = [];
  for (var _i in payVariable) {
    if (payVariable[_i]['status']) {
      if (typeof payVariable[_i]['value'] == 'number') {
        payStatus.push(payVariable[_i]['value']);
      } else if (typeof payVariable[_i]['value'] == 'string') {
        payType.push(payVariable[_i]['value']);
      }
    }
  }
  // 唤起请求事件
  pag.FunRun(payStatus, payType);
});
//# sourceMappingURL=tradeRecord.min.js.map
