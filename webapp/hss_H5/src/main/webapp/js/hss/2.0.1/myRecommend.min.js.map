{"version":3,"sources":["myRecommend.js"],"names":["message","_require","http","qr","document","getElementById","shareShow","layer","profits","profitsBtn","friends","friendsBtn","directCount","indirectCount","windows","notice","rules","xx","addEventListener","className","setTimeout","style","opacity","browser","elastic_touch","display","left","profitsLastX","profitsTouchX","event","touches","clientX","preventDefault","box","pag_No","pag_box","createElement","pag_more","innerHTML","g","shallId","pageSize","Promise","resolve","reject","post","res","pageModel","c","name","type","date","money","div_list","div_name","span_z","appendChild","span_j","div_date","div_amount","then","data","i","records","length","hasNextPage","console","log","err","friendsLastX","friendsTouchX","recommends","list","span","amount","statusName","QRCode","text","pageData","shareUrl","width","height","colorDark","colorLight","correctLevel","CorrectLevel","H"],"mappings":"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","file":"myRecommend.min.js","sourcesContent":["/**\n * Created by administrator on 2016/12/9.\n */\n\n// 引入http message\nconst message = _require('message');\nconst http = _require('http');\n// 定义变量\nconst qr = document.getElementById('qr');\nconst shareShow = document.getElementById('shareShow');\nconst layer = document.getElementById('layer');\nconst profits = document.getElementById('profits');\nconst profitsBtn = document.getElementById('profitsBtn');\nconst friends = document.getElementById('friends');\nconst friendsBtn = document.getElementById('friendsBtn');\nconst directCount = document.getElementById('directCount');\nconst indirectCount = document.getElementById('indirectCount');\nconst windows = document.getElementById('windows');\nlet notice = document.getElementById('notice');\nlet rules = document.getElementById('rules');\nlet xx = document.getElementById('xx');\nrules.addEventListener('click', function () {\n  notice.className = 'notice flexBox flex-box-column';\n  setTimeout(function () {\n    notice.style.opacity = 1;\n  }, 0);\n});\nxx.addEventListener('click', function () {\n  notice.style.opacity = 0;\n  setTimeout(function () {\n    notice.className = 'notice flexBox flex-box-column miss';\n  }, 400);\n});\n// 引入浏览器特性处理\nconst browser = _require('browser');\nbrowser.elastic_touch();\n\nshareShow.addEventListener('click', function () {\n  layer.style.display = 'block';\n});\n\nlayer.addEventListener('click', function () {\n  layer.style.display = 'none';\n});\n\n// 分润点击\nprofitsBtn.addEventListener('click', function () {\n  windows.style.left = '0';\n  profitsBtn.className = 'space shadow-right';\n  friendsBtn.className = 'space shadow-left disabled';\n});\n// 分润滑动\nlet profitsLastX, profitsTouchX;\nprofits.addEventListener('touchstart', function (event) {\n  profitsLastX = event.touches[0].clientX;\n});\nprofits.addEventListener('touchmove', function (event) {\n  profitsTouchX = event.touches[0].clientX;\n  if (profitsTouchX <= profitsLastX - 100) {\n    windows.style.left = '-100%';\n    profitsBtn.className = 'space shadow-right disabled';\n    friendsBtn.className = 'space shadow-left';\n    event.preventDefault();\n  }\n});\n// 分润的数据获取以及分页\nlet box = document.getElementById('profits');\nlet pag_No = '';\nlet pag_box = document.createElement('div');\nlet pag_more = document.createElement('div');\npag_more.innerHTML = '加载更多。。。';\nlet g = function (shallId, pageSize) {\n  return new Promise((resolve, reject) => {\n    http.post('/merchantInfo/queryShall', {\n      shallId: shallId,\n      pageSize: pageSize\n    }, function (res) {\n      resolve(res.pageModel);\n    });\n  });\n};\nlet c = function (name, type, date, money) {\n  let div_list = document.createElement('div');\n  div_list.className = 'list';\n  let div_name = document.createElement('div');\n  div_name.className = 'name';\n  div_name.innerHTML = name;\n  if (type == 1) {\n    let span_z = document.createElement('span');\n    span_z.className = 'z';\n    span_z.innerHTML = '直接';\n    div_name.appendChild(span_z);\n  } else {\n    let span_j = document.createElement('span');\n    span_j.className = 'j';\n    span_j.innerHTML = '间接';\n    div_name.appendChild(span_j);\n  }\n  let div_date = document.createElement('div');\n  div_date.className = 'date';\n  div_date.innerHTML = date;\n  let div_amount = document.createElement('div');\n  div_amount.className = 'amount';\n  div_amount.innerHTML = money + '元';\n  div_list.appendChild(div_name);\n  div_list.appendChild(div_date);\n  div_list.appendChild(div_amount);\n  return div_list;\n};\n// 初始化数据\ng(pag_No, 1).then(function (data) {\n  // 循环添加数据\n  for (let i = 0; i < data.records.length; i++) {\n    pag_box.appendChild(c(data.records[i].name, data.records[i].type, data.records[i].date, data.records[i].money))\n  }\n  // 判断是否需要加载更多\n  if (!data.hasNextPage) {\n    console.log('下一页消失');\n    pag_more.style.display = 'none';\n  }\n}, function (err) {\n  console.log(err);\n});\n// 加载更多\npag_more.addEventListener('click', function () {\n  g(pag_No, 1).then(function (data) {\n    // 循环添加数据\n    for (let i = 0; i < data.records.length; i++) {\n      pag_box.appendChild(c(data.records[i].name, data.records[i].type, data.records[i].date, data.records[i].money))\n    }\n    // 判断是否需要加载更多\n    if (!data.hasNextPage) {\n      console.log('下一页消失');\n      pag_more.style.display = 'none';\n    }\n  }, function (err) {\n    console.log(err);\n  });\n});\nbox.appendChild(pag_box);\nbox.appendChild(pag_more);\n\n// 推广的好友点击\nfriendsBtn.addEventListener('click', function () {\n  windows.style.left = '-100%';\n  profitsBtn.className = 'space shadow-right disabled';\n  friendsBtn.className = 'space shadow-left';\n});\n// 推广的好友滑动\nlet friendsLastX, friendsTouchX;\nfriends.addEventListener('touchstart', function (event) {\n  friendsLastX = event.touches[0].clientX;\n});\nfriends.addEventListener('touchmove', function (event) {\n  friendsTouchX = event.touches[0].clientX;\n  if (friendsTouchX >= friendsLastX + 100) {\n    windows.style.left = '0';\n    profitsBtn.className = 'space shadow-right';\n    friendsBtn.className = 'space shadow-left disabled';\n    event.preventDefault();\n  }\n});\n// 推广的好友的数据获取\nhttp.post('/wx/myRecommend', {}, function (data) {\n  console.log(data);\n  directCount.innerHTML = data.directCount;\n  indirectCount.innerHTML = data.indirectCount;\n  for (let i = 0; i < data.recommends.length; i++) {\n    let list = document.createElement('div');\n    list.className = 'list';\n    let name = document.createElement('div');\n    name.className = 'name';\n    name.innerHTML = data.recommends[i].name;\n    let span = document.createElement('span');\n    if (data.recommends[i].type == 1) {\n      span.className = 'z';\n      span.innerHTML = '直接';\n    } else {\n      span.className = 'j';\n      span.innerHTML = '间接';\n    }\n    name.appendChild(span);\n    let amount = document.createElement('amount');\n    amount.className = 'amount';\n    amount.innerHTML = data.recommends[i].statusName;\n    list.appendChild(name);\n    list.appendChild(amount);\n    friends.appendChild(list);\n  }\n});\n\nnew QRCode(qr, {\n  text: pageData.shareUrl,\n  width: 210,\n  height: 210,\n  colorDark: \"#000000\",\n  colorLight: \"#ffffff\",\n  correctLevel: QRCode.CorrectLevel.H\n});"]}