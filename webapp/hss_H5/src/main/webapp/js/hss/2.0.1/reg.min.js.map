{"version":3,"sources":["reg.js"],"names":["AnimationCountdown","_require","countdown","validate","message","http","mobile","document","getElementById","sendCode","code","submit","invite","inviteCode","layer","xx","cancel","login","browser","elastic_touch","pageData","qrCode","style","display","readonly","addEventListener","phone","value","check","post","data","prompt_show","submit_start","window","location","href","joint","replace"],"mappings":"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","file":"reg.min.js","sourcesContent":["/**\n * Created by administrator on 2016/12/8.\n */\n\n// 引入动画模版 处理验证码\nconst AnimationCountdown = _require('art-countdown');\nlet countdown = new AnimationCountdown('sendCode', '重新获取');\n// 引入http message\nconst validate = _require('validate');\nconst message = _require('message');\nconst http = _require('http');\n// 定义变量\nconst mobile = document.getElementById('mobile');\nconst sendCode = document.getElementById('sendCode');\nconst code = document.getElementById('code');\nconst submit = document.getElementById('submit');\nconst invite = document.getElementById('invite');\nconst inviteCode = document.getElementById('inviteCode');\nconst layer = document.getElementById('layer');\nconst xx = document.getElementById('xx');\nconst cancel = document.getElementById('cancel');\nconst login = document.getElementById('login');\n// 引入浏览器特性处理\nconst browser = _require('browser');\nbrowser.elastic_touch();\n\nif (!pageData.qrCode || pageData.qrCode == '') {\n  invite.style.display = 'block';\n}\n\nif (!pageData.inviteCode || pageData.inviteCode == '') {\n  inviteCode.readonly = false;\n}\n\nsendCode.addEventListener('click', function () {\n  if (validate.phone(mobile.value)) {\n    if (countdown.check()) {\n      http.post('/wx/getCode', {\n        mobile: mobile.value\n      }, function (data) {\n        if (data === false) {\n          layer.style.display = 'block';\n          return;\n        }\n        message.prompt_show('验证码发送成功');\n        countdown.submit_start();\n      })\n    }\n  }\n});\n\nxx.addEventListener('click', function () {\n  layer.style.display = 'none';\n});\n\ncancel.addEventListener('click', function () {\n  layer.style.display = 'none';\n});\n\nlogin.addEventListener('click', function () {\n  window.location.href = '/sqb/login?phone=' + mobile.value;\n});\n\n// 注册\nsubmit.addEventListener('click', ()=> {\n  if (!pageData.qrCode || pageData.qrCode == '') {\n    if (validate.joint({\n        phone: [mobile.value, inviteCode.value],\n        code: code.value\n      })) {\n      http.post('/wx/login', {\n        mobile: mobile.value,\n        code: code.value,\n        inviteCode: inviteCode.value\n      }, ()=> {\n        window.location.replace(\"/sqb/addInfo\");\n      })\n    }\n  } else {\n    if (validate.joint({\n        phone: mobile.value,\n        code: code.value\n      })) {\n      http.post('/wx/login', {\n        mobile: mobile.value,\n        code: code.value,\n        qrCode: pageData.qrCode,\n        inviteCode: inviteCode.value\n      }, ()=> {\n        window.location.replace(\"/sqb/addInfo\");\n      })\n    }\n  }\n});"]}