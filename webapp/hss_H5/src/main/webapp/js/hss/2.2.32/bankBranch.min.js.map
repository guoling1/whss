{"version":3,"sources":["bankBranch.js"],"names":["http","_require","message","validate","browser","elastic_touch","color","document","getElementById","logo","client_h","body","clientHeight","layer_w","layer_w_list","layer_b","layer_b_list","submit","world","branch","match_ipt","p","c","ct","select","addEventListener","pageData","countyName","prompt_show","localStorage","setItem","JSON","stringify","window","location","href","oemNo","source","Provinces","Citys","Countrys","getQueryString","name","reg","RegExp","r","search","substr","match","unescape","getLocationString","path","pathname","index","lastIndexOf","substring","length","value","provinceName","cityName","branchName","innerHTML","style","fontSize","branchStorage","parse","getItem","console","log","onclick","empty","provinceCode","cityCode","countyCode","post","bankId","branchCode","layer","display","removeItem","data","ProvincesSet","rect_w","getBoundingClientRect","height","top","i","div_Provinces","createElement","aname","className","code","CitysSet","appendChild","div_Citys","CountrysSet","div_Countrys","bankCardBin","bankLogoColor","HasBank","bin"],"mappings":"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","file":"bankBranch.min.js","sourcesContent":["/**\r\n * Created by administrator on 2016/12/8.\r\n */\r\n\r\n// 引入浏览器特性处理\r\nconst http = _require('http');\r\nconst message = _require('message');\r\nconst validate = _require('validate');\r\nconst browser = _require('browser');\r\nbrowser.elastic_touch('layer-w-list');\r\nbrowser.elastic_touch('layer-b-list');\r\n// 定义变量\r\nconst color = document.getElementById('color');\r\nconst logo = document.getElementById('logo');\r\n// 获取屏幕高度 确定搜索栏位置\r\nlet client_h = document.body.clientHeight;\r\nlet layer_w = document.getElementById('layer-w');\r\nlet layer_w_list = document.getElementById('layer-w-list');\r\nlet layer_b = document.getElementById('layer-b');\r\nlet layer_b_list = document.getElementById('layer-b-list');\r\n// 定义输入框\r\nlet submit = document.getElementById('submit');\r\nlet world = document.getElementById('world');\r\nlet branch = document.getElementById('branch');\r\nlet match_ipt = document.getElementById('match_ipt');\r\n// 定义选择框\r\nlet p = document.getElementById('p');\r\nlet c = document.getElementById('c');\r\nlet ct = document.getElementById('ct');\r\n\r\nconst select = document.getElementById('select');\r\n\r\nselect.addEventListener('click',function () {\r\n    if (!pageData.countyName || pageData.countyName == '') {\r\n        message.prompt_show('请先选择支行地区');\r\n        return false;\r\n    }else {\r\n        // localStorage.setItem('cardNo',bankNo.value)\r\n        localStorage.setItem('branch',JSON.stringify(pageData))\r\n        window.location.href = \"/sqb/branchSelect2?oemNo=\" + pageData.oemNo+\"&source=\"+pageData.source;\r\n    }\r\n    /*if(validate.bankNo(bankNo.value)){\r\n        localStorage.setItem('cardNo',bankNo.value)\r\n        window.location.href = \"/sqb/branch2?oemNo=\" + pageData.oemNo+\"&source=\"+pageData.source;\r\n    }*/\r\n})\r\n\r\n\r\n\r\n\r\nlet Provinces = false;\r\nlet Citys = false;\r\nlet Countrys = false;\r\n\r\nfunction getQueryString(name) {\r\n  let reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\", \"i\");\r\n  let r = window.location.search.substr(1).match(reg);\r\n  if (r != null) return unescape(r[2]);\r\n  return null;\r\n}\r\n\r\nfunction getLocationString() {\r\n  let path = window.location.pathname;\r\n  let index = path.lastIndexOf(\"\\/\");\r\n  return path.substring(index + 1, path.length);\r\n}\r\n\r\n// 处理 初始化 的过程\r\n/*if (pageData.provinceCode != '' &&\r\n  pageData.provinceName != '' &&\r\n  pageData.cityCode != '' &&\r\n  pageData.cityName != '' &&\r\n  pageData.countyCode != '' &&\r\n  pageData.countyName != '' &&\r\n  pageData.branchName != '') {\r\n  world.value = pageData.provinceName + pageData.cityName + pageData.countyName;\r\n    select.innerHTML = pageData.branchName;\r\n    select.style.fontSize = '15px';\r\n    select.style.color = '#000';\r\n    let branchStorage = JSON.parse(localStorage.getItem('branch'));\r\n    console.log(branchStorage)\r\n    if(branchStorage!=null){\r\n        if(branchStorage.branchName!=''){\r\n            world.value = branchStorage.provinceName + branchStorage.cityName + branchStorage.countyName;\r\n            select.innerHTML = branchStorage.branchName;\r\n            select.style.fontSize = '15px';\r\n            select.style.color = '#000';\r\n        }\r\n    }\r\n}*/\r\nworld.value = pageData.provinceName + pageData.cityName + pageData.countyName;\r\nif(pageData.branchName!=''){\r\n    select.innerHTML = pageData.branchName;\r\n    select.style.fontSize = '15px';\r\n    select.style.color = '#000';\r\n}\r\nlet branchStorage = JSON.parse(localStorage.getItem('branch'));\r\nconsole.log(branchStorage)\r\nif(branchStorage!=null){\r\n    if(branchStorage.branchName!=''){\r\n        world.value = branchStorage.provinceName + branchStorage.cityName + branchStorage.countyName;\r\n        select.innerHTML = branchStorage.branchName;\r\n        select.style.fontSize = '15px';\r\n        select.style.color = '#000';\r\n    }\r\n}\r\n\r\n\r\nsubmit.onclick = function () {\r\n    if(localStorage.getItem('branch')!=null){\r\n        pageData = JSON.parse(localStorage.getItem('branch'))\r\n    }\r\n  if (validate.empty(pageData.provinceCode, '所在地区') &&\r\n    validate.empty(pageData.provinceName, '所在地区') &&\r\n    validate.empty(pageData.cityCode, '所在地区') &&\r\n    validate.empty(pageData.cityName, '所在地区') &&\r\n    validate.empty(pageData.countyCode, '所在地区') &&\r\n    validate.empty(pageData.countyName, '所在地区') &&\r\n    validate.empty(pageData.branchName, '支行信息')) {\r\n    http.post('/wx/branchInfo', {\r\n      bankId: getLocationString(),\r\n      branchCode: pageData.branchCode,\r\n      branchName: pageData.branchName,\r\n      provinceCode: pageData.provinceCode,\r\n      provinceName: pageData.provinceName,\r\n      cityCode: pageData.cityCode,\r\n      cityName: pageData.cityName,\r\n      countyCode: pageData.countyCode,\r\n      countyName: pageData.countyName\r\n    }, function () {\r\n      if (getQueryString('card')) {\r\n        window.location.href = '/sqb/creditCardAuthen?card=true&oemNo=' + pageData.oemNo;\r\n      } else if (getQueryString('branch')) {\r\n        layer.style.display = 'block';\r\n      } else {\r\n        if(pageData.source==1){\r\n            window.location.href = '/sqb/bank?oemNo=' + pageData.oemNo+'&source='+pageData.source;\r\n        }else if(pageData.source==2){\r\n            window.location.href = '/sqb/collection?oemNo=' + pageData.oemNo;\r\n        }\r\n        localStorage.removeItem('branch');\r\n      }\r\n    })\r\n  }\r\n};\r\n\r\n/*branch.onclick = function () {\r\n  if (!pageData.countyName || pageData.countyName == '') {\r\n    message.prompt_show('请先选择支行地区');\r\n    return false;\r\n  }\r\n  layer_b.style.display = 'block';\r\n  let rect_b = layer_b.getBoundingClientRect();\r\n  layer_b.style.height = (client_h - rect_b.top) + 'px';\r\n  layer_b_list.style.height = (client_h - rect_b.top - 50) + 'px';\r\n  match_ipt.focus();\r\n};*/\r\n\r\n/*match_ipt.addEventListener('input', function (e) {\r\n  let ev = e.target;\r\n  if (/[\\u4e00-\\u9fa5]{2,50}/.test(ev.value)) {\r\n    http.post('/bankBranch/getBankBranch', {\r\n      contions: ev.value,\r\n      provinceName: pageData.provinceName,\r\n      cityName: pageData.cityName\r\n    }, function (data) {\r\n      layer_b_list.innerHTML = '';\r\n      console.log(data);\r\n      for (let i = 0; i < data.length; i++) {\r\n        let div_branch = document.createElement('div');\r\n        div_branch.className = 't';\r\n        div_branch.innerHTML = data[i].branchName;\r\n        div_branch.onclick = function () {\r\n          branch.value = data[i].branchName;\r\n          pageData.branchCode = data[i].branchCode;\r\n          pageData.branchName = data[i].branchName;\r\n          layer_b.style.display = 'none';\r\n        };\r\n        layer_b_list.appendChild(div_branch);\r\n      }\r\n    })\r\n  }\r\n});*/\r\n\r\nworld.onclick = function () {\r\n  // layer_b.style.display = 'none';\r\n  if (!Provinces) {\r\n    // 如果不存在 则去获取数据\r\n    http.post('/district/findAllProvinces', {}, function (data) {\r\n      Provinces = data;\r\n      ProvincesSet();\r\n    })\r\n  } else {\r\n    ProvincesSet();\r\n  }\r\n  select.innerHTML = \"点击选择\";\r\n  select.style.color='#ccc';\r\n  select.style.fontSize= '14px';\r\n  // branch.value = '';\r\n  pageData.branchCode = '';\r\n  pageData.branchName = '';\r\n  // layer_b_list.innerHTML = '';\r\n  layer_w.style.display = 'block';\r\n  let rect_w = layer_w.getBoundingClientRect();\r\n  layer_w.style.height = (client_h - rect_w.top) + 'px';\r\n  layer_w_list.style.height = (client_h - rect_w.top - 100) + 'px';\r\n};\r\n\r\n// Provinces 部署事件\r\nlet ProvincesSet = function () {\r\n  layer_w_list.innerHTML = '';\r\n  for (let i = 0; i < Provinces.length; i++) {\r\n    let div_Provinces = document.createElement('div');\r\n    div_Provinces.innerHTML = Provinces[i].aname;\r\n    div_Provinces.onclick = function () {\r\n      p.className = '';\r\n      p.innerHTML = Provinces[i].aname;\r\n      pageData.provinceCode = Provinces[i].code;\r\n      pageData.provinceName = Provinces[i].aname;\r\n      if (!Citys || !Citys[Provinces[i].code]) {\r\n        http.post('/district/findAllCity', {code: Provinces[i].code}, function (data) {\r\n          Citys = {};\r\n          Citys[Provinces[i].code] = data;\r\n          CitysSet(Provinces[i].code);\r\n        })\r\n      } else {\r\n        CitysSet(Provinces[i].code);\r\n      }\r\n    };\r\n    layer_w_list.appendChild(div_Provinces);\r\n  }\r\n  p.className = 'choose';\r\n  p.style.display = 'inline-block';\r\n};\r\n\r\n// Citys 部署事件\r\nlet CitysSet = function (code) {\r\n  layer_w_list.innerHTML = '';\r\n  for (let i = 0; i < Citys[code].length; i++) {\r\n    let div_Citys = document.createElement('div');\r\n    div_Citys.innerHTML = Citys[code][i].aname;\r\n    div_Citys.onclick = function () {\r\n      c.className = '';\r\n      c.innerHTML = Citys[code][i].aname;\r\n      pageData.cityCode = Citys[code][i].code;\r\n      pageData.cityName = Citys[code][i].aname;\r\n      if (!Countrys || !Countrys[Citys[code][i].code]) {\r\n        http.post('/district/findAllCounty', {code: Citys[code][i].code}, function (data) {\r\n          Countrys = {};\r\n          Countrys[Citys[code][i].code] = data;\r\n          CountrysSet(Citys[code][i].code);\r\n        })\r\n      } else {\r\n        CountrysSet(Citys[code][i].code);\r\n      }\r\n    };\r\n    layer_w_list.appendChild(div_Citys);\r\n  }\r\n  c.className = 'choose';\r\n  c.style.display = 'inline-block';\r\n};\r\n\r\n// Countrys 部署事件\r\nlet CountrysSet = function (code) {\r\n  layer_w_list.innerHTML = '';\r\n  for (let i = 0; i < Countrys[code].length; i++) {\r\n    let div_Countrys = document.createElement('div');\r\n    div_Countrys.innerHTML = Countrys[code][i].aname;\r\n    div_Countrys.onclick = function () {\r\n      ct.className = '';\r\n      ct.innerHTML = Countrys[code][i].aname;\r\n      pageData.countyCode = Countrys[code][i].code;\r\n      pageData.countyName = Countrys[code][i].aname;\r\n      world.value = pageData.provinceName + pageData.cityName + pageData.countyName;\r\n      layer_w.style.display = 'none';\r\n    };\r\n    layer_w_list.appendChild(div_Countrys);\r\n  }\r\n  ct.className = 'choose';\r\n  ct.style.display = 'inline-block';\r\n};\r\n\r\np.onclick = function () {\r\n  c.style.display = 'none';\r\n  ct.style.display = 'none';\r\n  ProvincesSet();\r\n};\r\n\r\nc.onclick = function () {\r\n  ct.style.display = 'none';\r\n  CitysSet(pageData.provinceCode);\r\n};\r\n\r\nct.onclick = function () {\r\n  CitysSet(pageData.cityCode);\r\n};\r\n\r\n// 卡bin和颜色一一对应\r\nlet bankCardBin = ['ABC', 'BANKCOMM', 'BOC', 'CCB', 'CEB', 'CGB', 'CIB', 'CITIC', 'CMB', 'CMBC', 'ICBC', 'PINGAN', 'PSBC', 'SHBANK'];\r\nlet bankLogoColor = ['green', 'blue', 'red', 'blue', 'red', 'red', 'blue', 'red', 'red', 'red', 'red', 'red', 'green', 'red'];\r\n\r\nlet HasBank = () => {\r\n  for (let i = 0; i < bankCardBin.length; i++) {\r\n    if (bankCardBin[i] == pageData.bin) {\r\n      return i;\r\n    }\r\n  }\r\n  return -1;\r\n};\r\n\r\nlet index = HasBank();\r\n\r\nif (index != -1) {\r\n  color.className = 'group ' + bankLogoColor[index];\r\n  logo.className = 'logo ' + pageData.bin;\r\n} else {\r\n  color.className = 'group red';\r\n  logo.className = 'logo DEFAULT';\r\n}"]}