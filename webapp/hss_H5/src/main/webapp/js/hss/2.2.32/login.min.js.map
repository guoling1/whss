{"version":3,"sources":["login.js"],"names":["AnimationCountdown","_require","countdown","validate","message","http","tools","argument","GetUrlArg","console","log","mobile","document","getElementById","sendCode","submit","browser","elastic_touch","addEventListener","phone","value","check","post","prompt_show","submit_start","joint","code","oemNo","pageData","window","location","replace","click"],"mappings":";;AAAA;;;;AAIA;AACA,IAAMA,qBAAqBC,SAAS,eAAT,CAA3B;AACA,IAAIC,YAAY,IAAIF,kBAAJ,CAAuB,UAAvB,EAAmC,MAAnC,CAAhB;AACA;AACA,IAAMG,WAAWF,SAAS,UAAT,CAAjB;AACA,IAAMG,UAAUH,SAAS,SAAT,CAAhB;AACA,IAAMI,OAAOJ,SAAS,MAAT,CAAb;AACA;AACA,IAAMK,QAAQL,SAAS,OAAT,CAAd;AACA,IAAIM,WAAWD,MAAME,SAAN,EAAf;AACAC,QAAQC,GAAR,CAAYH,QAAZ;AACA;AACA,IAAMI,SAASC,SAASC,cAAT,CAAwB,QAAxB,CAAf;AACA,IAAMC,WAAWF,SAASC,cAAT,CAAwB,UAAxB,CAAjB;AACA,IAAME,SAASH,SAASC,cAAT,CAAwB,QAAxB,CAAf;AACA;AACA,IAAMG,UAAUf,SAAS,SAAT,CAAhB;AACAe,QAAQC,aAAR;;AAEAH,SAASI,gBAAT,CAA0B,OAA1B,EAAmC,YAAY;AAC7C,MAAIf,SAASgB,KAAT,CAAeR,OAAOS,KAAtB,CAAJ,EAAkC;AAChC,QAAIlB,UAAUmB,KAAV,EAAJ,EAAuB;AACrBhB,WAAKiB,IAAL,CAAU,kBAAV,EAA8B;AAC5BX,gBAAQA,OAAOS;AADa,OAA9B,EAEG,YAAY;AACbhB,gBAAQmB,WAAR,CAAoB,SAApB;AACArB,kBAAUsB,YAAV;AACD,OALD;AAMD;AACF;AACF,CAXD;;AAaA;AACAT,OAAOG,gBAAP,CAAwB,OAAxB,EAAiC,YAAM;AACrC,MAAIf,SAASsB,KAAT,CAAe;AACfN,WAAOR,OAAOS,KADC;AAEfM,UAAMA,KAAKN;AAFI,GAAf,CAAJ,EAGM;AACJf,SAAKiB,IAAL,CAAU,iBAAV,EAA6B;AAC3BX,cAAQA,OAAOS,KADY;AAE3BM,YAAMA,KAAKN,KAFgB;AAG3BO,aAAOC,SAASD;AAHW,KAA7B,EAIG,YAAM;AACPE,aAAOC,QAAP,CAAgBC,OAAhB,CAAwB,uBAAuBH,SAASD,KAAxD;AACD,KAND;AAOD;AACF,CAbD;;AAeA,IAAIpB,SAASY,KAAb,EAAoB;AAClBR,SAAOS,KAAP,GAAeb,SAASY,KAAxB;AACAL,WAASkB,KAAT;AACD","file":"login.min.js","sourcesContent":["/**\r\n * Created by administrator on 2016/12/8.\r\n */\r\n\r\n// 引入动画模版 处理验证码\r\nconst AnimationCountdown = _require('art-countdown');\r\nlet countdown = new AnimationCountdown('sendCode', '重新获取');\r\n// 引入http message\r\nconst validate = _require('validate');\r\nconst message = _require('message');\r\nconst http = _require('http');\r\n// 引入常用工具\r\nconst tools = _require('tools');\r\nlet argument = tools.GetUrlArg();\r\nconsole.log(argument);\r\n// 定义变量\r\nconst mobile = document.getElementById('mobile');\r\nconst sendCode = document.getElementById('sendCode');\r\nconst submit = document.getElementById('submit');\r\n// 引入浏览器特性处理\r\nconst browser = _require('browser');\r\nbrowser.elastic_touch();\r\n\r\nsendCode.addEventListener('click', function () {\r\n  if (validate.phone(mobile.value)) {\r\n    if (countdown.check()) {\r\n      http.post('/wx/getLoginCode', {\r\n        mobile: mobile.value\r\n      }, function () {\r\n        message.prompt_show('验证码发送成功');\r\n        countdown.submit_start();\r\n      })\r\n    }\r\n  }\r\n});\r\n\r\n// 登录\r\nsubmit.addEventListener('click', () => {\r\n  if (validate.joint({\r\n      phone: mobile.value,\r\n      code: code.value\r\n    })) {\r\n    http.post('/wx/directLogin', {\r\n      mobile: mobile.value,\r\n      code: code.value,\r\n      oemNo: pageData.oemNo\r\n    }, () => {\r\n      window.location.replace(\"/sqb/wallet?oemNo=\" + pageData.oemNo);\r\n    })\r\n  }\r\n});\r\n\r\nif (argument.phone) {\r\n  mobile.value = argument.phone;\r\n  sendCode.click();\r\n}"]}