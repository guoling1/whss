{"version":3,"sources":["tradeRecord.js"],"names":["message","_require","http","tools","TimePicker","browser","elastic_touch","startDate","document","getElementById","endDate","query","unfold","cancel","submit","nowPage","payStatusCode","payTypeCode","content","list","createElement","more","className","innerHTML","style","display","height","lineHeight","fontSize","color","backgroundColor","addEventListener","getData","appendChild","payStatus","payType","e","page","post","pageNo","pageSize","orderNo","value","res","i","records","length","group","href","orderId","top","topLeft","topRight","amount","bottom","bottomLeft","payStatusValue","bottomRight","dateFormat","datetime","hasNextPage","insertBefore","childNodes","payVariable","paySuccess","type","status","payError","payWait","payWx","payAli","payQuick","payQQ","li","getElementsByClassName","variable","getAttribute","prompt_show","indexOf","push"],"mappings":";;AAAA;;;;AAIA;AACA,IAAMA,UAAUC,SAAS,SAAT,CAAhB;AACA,IAAMC,OAAOD,SAAS,MAAT,CAAb;AACA,IAAME,QAAQF,SAAS,OAAT,CAAd;AACA;AACA,IAAMG,aAAaH,SAAS,YAAT,CAAnB;AACA,IAAIG,UAAJ,CAAe,UAAf;AACA,IAAIA,UAAJ,CAAe,QAAf;AACA;AACA,IAAMC,UAAUJ,SAAS,SAAT,CAAhB;AACAI,QAAQC,aAAR,CAAsB,MAAtB;AACA;AACA,IAAIC,YAAYC,SAASC,cAAT,CAAwB,UAAxB,CAAhB;AACA,IAAIC,UAAUF,SAASC,cAAT,CAAwB,QAAxB,CAAd;AACA;AACA,IAAIE,QAAQH,SAASC,cAAT,CAAwB,OAAxB,CAAZ;AACA,IAAIG,SAASJ,SAASC,cAAT,CAAwB,QAAxB,CAAb;AACA,IAAII,SAASL,SAASC,cAAT,CAAwB,QAAxB,CAAb;AACA,IAAIK,SAASN,SAASC,cAAT,CAAwB,QAAxB,CAAb;AACA;AACA,IAAIM,UAAU,CAAd;AACA,IAAIC,gBAAgB,CAAC,GAAD,CAApB;AACA,IAAIC,cAAc,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,CAAlB;AACA;AACA,IAAIC,UAAUV,SAASC,cAAT,CAAwB,SAAxB,CAAd;AACA,IAAIU,OAAOX,SAASY,aAAT,CAAuB,KAAvB,CAAX;AACA,IAAIC,OAAOb,SAASY,aAAT,CAAuB,KAAvB,CAAX;AACAC,KAAKC,SAAL,GAAiB,YAAjB;AACAD,KAAKE,SAAL,GAAiB,MAAjB;AACAF,KAAKG,KAAL,CAAWC,OAAX,GAAqB,MAArB;AACAJ,KAAKG,KAAL,CAAWE,MAAX,GAAoB,MAApB;AACAL,KAAKG,KAAL,CAAWG,UAAX,GAAwB,MAAxB;AACAN,KAAKG,KAAL,CAAWI,QAAX,GAAsB,MAAtB;AACAP,KAAKG,KAAL,CAAWK,KAAX,GAAmB,MAAnB;AACAR,KAAKG,KAAL,CAAWM,eAAX,GAA6B,SAA7B;AACAT,KAAKU,gBAAL,CAAsB,YAAtB,EAAoC,YAAY;AAC9CV,OAAKG,KAAL,CAAWM,eAAX,GAA6B,SAA7B;AACD,CAFD;AAGAT,KAAKU,gBAAL,CAAsB,UAAtB,EAAkC,YAAY;AAC5CV,OAAKG,KAAL,CAAWM,eAAX,GAA6B,SAA7B;AACD,CAFD;AAGAT,KAAKU,gBAAL,CAAsB,OAAtB,EAA+B,YAAY;AACzCC,UAAQ,IAAR,EAAcjB,UAAU,CAAxB;AACD,CAFD;AAGAG,QAAQe,WAAR,CAAoBZ,IAApB;AACA;AACA,IAAMa,YAAY;AAChB,KAAG,KADa;AAEhB,KAAG,MAFa;AAGhB,KAAG;AAHa,CAAlB;AAKA;AACA,IAAMC,UAAU;AACd,KAAG,IADW;AAEd,KAAG,KAFW;AAGd,KAAG,IAHW;AAId,KAAG;AAJW,CAAhB;AAMA;AACA,IAAIH,UAAU,SAAVA,OAAU,CAAUI,CAAV,EAAaC,IAAb,EAAmB;AAC/B;AACAtB,YAAUsB,QAAQ,CAAlB;AACA,MAAItB,WAAW,CAAf,EAAkB;AAChBI,SAAKI,SAAL,GAAiB,EAAjB;AACD;AACDrB,OAAKoC,IAAL,CAAU,+BAAV,EAA2C;AACzCC,YAAQxB,OADiC;AAEzCyB,cAAU,EAF+B;AAGzCC,aAAS,EAHgC,EAG3B;AACdP,eAAWlB,aAJ8B,EAIb;AAC5BmB,aAASlB,WALgC,EAKhB;AACzBV,eAAWA,UAAUmC,KANoB;AAOzChC,aAASA,QAAQgC;AAPwB,GAA3C,EAQG,UAAUC,GAAV,EAAe;AAChB,SAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAID,IAAIE,OAAJ,CAAYC,MAAhC,EAAwCF,GAAxC,EAA6C;AAC3C,UAAIG,QAAQvC,SAASY,aAAT,CAAuB,GAAvB,CAAZ;AACA2B,YAAMC,IAAN,GAAa,mBAAmBL,IAAIE,OAAJ,CAAYD,CAAZ,EAAeK,OAA/C;AACAF,YAAMzB,SAAN,GAAkB,OAAlB;AACA,UAAI4B,MAAM1C,SAASY,aAAT,CAAuB,KAAvB,CAAV;AACA8B,UAAI5B,SAAJ,GAAgB,KAAhB;AACA,UAAI6B,UAAU3C,SAASY,aAAT,CAAuB,KAAvB,CAAd;AACA+B,cAAQ7B,SAAR,GAAoB,MAApB;AACA,UAAIqB,IAAIE,OAAJ,CAAYD,CAAZ,EAAeV,SAAf,IAA4B,GAAhC,EAAqC;AACnCiB,gBAAQ5B,SAAR,GAAoBW,UAAUS,IAAIE,OAAJ,CAAYD,CAAZ,EAAeV,SAAzB,IAAsC,GAAtC,GAA4CS,IAAIE,OAAJ,CAAYD,CAAZ,EAAeT,OAA/E;AACD,OAFD,MAEO;AACLgB,gBAAQ5B,SAAR,GAAoBW,UAAUS,IAAIE,OAAJ,CAAYD,CAAZ,EAAeV,SAAzB,CAApB;AACD;AACD,UAAIkB,WAAW5C,SAASY,aAAT,CAAuB,KAAvB,CAAf;AACAgC,eAAS9B,SAAT,GAAqB,OAArB;AACA8B,eAAS7B,SAAT,GAAqB,MAAMoB,IAAIE,OAAJ,CAAYD,CAAZ,EAAeS,MAArB,GAA8B,GAAnD;AACAH,UAAIjB,WAAJ,CAAgBkB,OAAhB;AACAD,UAAIjB,WAAJ,CAAgBmB,QAAhB;AACA,UAAIE,SAAS9C,SAASY,aAAT,CAAuB,KAAvB,CAAb;AACAkC,aAAOhC,SAAP,GAAmB,QAAnB;AACA,UAAIiC,aAAa/C,SAASY,aAAT,CAAuB,KAAvB,CAAjB;AACAmC,iBAAWjC,SAAX,GAAuB,MAAvB;AACAiC,iBAAWhC,SAAX,GAAuBoB,IAAIE,OAAJ,CAAYD,CAAZ,EAAeY,cAAtC;AACA,UAAIC,cAAcjD,SAASY,aAAT,CAAuB,KAAvB,CAAlB;AACAqC,kBAAYnC,SAAZ,GAAwB,OAAxB;AACAmC,kBAAYlC,SAAZ,GAAwBpB,MAAMuD,UAAN,CAAiB,qBAAjB,EAAwCf,IAAIE,OAAJ,CAAYD,CAAZ,EAAee,QAAvD,CAAxB;AACAL,aAAOrB,WAAP,CAAmBsB,UAAnB;AACAD,aAAOrB,WAAP,CAAmBwB,WAAnB;AACAV,YAAMd,WAAN,CAAkBiB,GAAlB;AACAH,YAAMd,WAAN,CAAkBqB,MAAlB;AACAnC,WAAKc,WAAL,CAAiBc,KAAjB;AACD;AACD;AACA,QAAIJ,IAAIiB,WAAR,EAAqB;AACnBvC,WAAKG,KAAL,CAAWC,OAAX,GAAqB,OAArB;AACD,KAFD,MAEO;AACLJ,WAAKG,KAAL,CAAWC,OAAX,GAAqB,MAArB;AACD;AACDP,YAAQ2C,YAAR,CAAqB1C,IAArB,EAA2BD,QAAQ4C,UAAR,CAAmB,CAAnB,CAA3B;AACA;AACA,QAAI,CAAC1B,CAAL,EAAQ;AACNzB,YAAMW,SAAN,GAAkB,OAAlB;AACD;AACF,GApDD;AAqDD,CA3DD;AA4DA;AACAU;AACAzB,UAAUwB,gBAAV,CAA2B,QAA3B,EAAqCC,OAArC;AACAtB,QAAQqB,gBAAR,CAAyB,QAAzB,EAAmCC,OAAnC;;AAEApB,OAAOmB,gBAAP,CAAwB,OAAxB,EAAiC,YAAY;AAC3CpB,QAAMW,SAAN,GAAkB,sCAAlB;AACD,CAFD;AAGAT,OAAOkB,gBAAP,CAAwB,OAAxB,EAAiC,YAAY;AAC3CpB,QAAMW,SAAN,GAAkB,OAAlB;AACD,CAFD;AAGA;AACA,IAAIyC,cAAc;AAChBC,cAAY;AACVC,UAAM,eADI;AAEVC,YAAQ,IAFE;AAGVxB,WAAO;AAHG,GADI;AAMhByB,YAAU;AACRF,UAAM,eADE;AAERC,YAAQ,KAFA;AAGRxB,WAAO;AAHC,GANM;AAWhB0B,WAAS;AACPH,UAAM,eADC;AAEPC,YAAQ,KAFD;AAGPxB,WAAO;AAHA,GAXO;AAgBhB2B,SAAO;AACLJ,UAAM,aADD;AAELC,YAAQ,IAFH;AAGLxB,WAAO;AAHF,GAhBS;AAqBhB4B,UAAQ;AACNL,UAAM,aADA;AAENC,YAAQ,IAFF;AAGNxB,WAAO;AAHD,GArBQ;AA0BhB6B,YAAU;AACRN,UAAM,aADE;AAERC,YAAQ,IAFA;AAGRxB,WAAO;AAHC,GA1BM;AA+BhB8B,SAAO;AACLP,UAAM,aADD;AAELC,YAAQ,IAFH;AAGLxB,WAAO;AAHF;AA/BS,CAAlB;AAqCA,IAAI+B,KAAKjE,SAASkE,sBAAT,CAAgC,IAAhC,CAAT;AACA,KAAK,IAAI9B,IAAI,CAAb,EAAgBA,IAAI6B,GAAG3B,MAAvB,EAA+BF,GAA/B,EAAoC;AAClC6B,KAAG7B,CAAH,EAAMb,gBAAN,CAAuB,OAAvB,EAAgC,YAAY;AAC1C;AACA,QAAI4C,WAAW,KAAKC,YAAL,CAAkB,YAAlB,CAAf;AACAb,gBAAYY,QAAZ,EAAsB,QAAtB,IAAkC,CAACZ,YAAYY,QAAZ,EAAsB,QAAtB,CAAnC;AACA;AACA,QAAI,CAACZ,YAAYC,UAAZ,CAAuBE,MAAxB,IAAkC,CAACH,YAAYI,QAAZ,CAAqBD,MAAxD,IAAkE,CAACH,YAAYK,OAAZ,CAAoBF,MAA3F,EAAmG;AACjGlE,cAAQ6E,WAAR,CAAoB,YAApB;AACAd,kBAAYY,QAAZ,EAAsB,QAAtB,IAAkC,CAACZ,YAAYY,QAAZ,EAAsB,QAAtB,CAAnC;AACA;AACD;AACD,QAAI,CAACZ,YAAYM,KAAZ,CAAkBH,MAAnB,IAA6B,CAACH,YAAYO,MAAZ,CAAmBJ,MAAjD,IAA2D,CAACH,YAAYQ,QAAZ,CAAqBL,MAAjF,IAA2F,CAACH,YAAYS,KAAZ,CAAkBN,MAAlH,EAA0H;AACxHlE,cAAQ6E,WAAR,CAAoB,YAApB;AACAd,kBAAYY,QAAZ,EAAsB,QAAtB,IAAkC,CAACZ,YAAYY,QAAZ,EAAsB,QAAtB,CAAnC;AACA;AACD;AACD;AACA,QAAI,KAAKrD,SAAL,CAAewD,OAAf,CAAuB,QAAvB,IAAmC,CAAC,CAAxC,EAA2C;AACzC,WAAKxD,SAAL,GAAiB,IAAjB;AACD,KAFD,MAEO;AACL,WAAKA,SAAL,GAAiB,WAAjB;AACD;AACF,GArBD;AAsBD;AACDR,OAAOiB,gBAAP,CAAwB,OAAxB,EAAiC,YAAY;AAC3C;AACAf,kBAAgB,EAAhB;AACAC,gBAAc,EAAd;AACA,OAAK,IAAI2B,EAAT,IAAcmB,WAAd,EAA2B;AACzB,QAAIA,YAAYnB,EAAZ,EAAe,QAAf,CAAJ,EAA8B;AAC5B,UAAImB,YAAYnB,EAAZ,EAAe,MAAf,KAA0B,eAA9B,EAA+C;AAC7C5B,sBAAc+D,IAAd,CAAmBhB,YAAYnB,EAAZ,EAAe,OAAf,CAAnB;AACD,OAFD,MAEO,IAAImB,YAAYnB,EAAZ,EAAe,MAAf,KAA0B,aAA9B,EAA6C;AAClD3B,oBAAY8D,IAAZ,CAAiBhB,YAAYnB,EAAZ,EAAe,OAAf,CAAjB;AACD;AACF;AACF;AACD;AACAZ;AACD,CAfD","file":"tradeRecord.min.js","sourcesContent":["/**\r\n * Created by administrator on 2016/12/13.\r\n */\r\n\r\n// 引入 message http\r\nconst message = _require('message');\r\nconst http = _require('http');\r\nconst tools = _require('tools');\r\n// 引入时间选择器\r\nconst TimePicker = _require('timePicker');\r\nnew TimePicker('dateFrom');\r\nnew TimePicker('dateTo');\r\n// 引入浏览器特性处理\r\nconst browser = _require('browser');\r\nbrowser.elastic_touch('list');\r\n// 定义变量\r\nlet startDate = document.getElementById('dateFrom');\r\nlet endDate = document.getElementById('dateTo');\r\n// 定义变量\r\nlet query = document.getElementById('query');\r\nlet unfold = document.getElementById('unfold');\r\nlet cancel = document.getElementById('cancel');\r\nlet submit = document.getElementById('submit');\r\n// 定义初始变量\r\nlet nowPage = 1;\r\nlet payStatusCode = ['4'];\r\nlet payTypeCode = ['1', '2', '3', '4'];\r\n// 定义加载更多\r\nlet content = document.getElementById('content');\r\nlet list = document.createElement('div');\r\nlet more = document.createElement('div');\r\nmore.className = 'touch_more';\r\nmore.innerHTML = '加载更多';\r\nmore.style.display = 'none';\r\nmore.style.height = '50px';\r\nmore.style.lineHeight = '50px';\r\nmore.style.fontSize = '16px';\r\nmore.style.color = '#999';\r\nmore.style.backgroundColor = '#f0eff5';\r\nmore.addEventListener('touchstart', function () {\r\n  more.style.backgroundColor = '#d8d7dc';\r\n});\r\nmore.addEventListener('touchend', function () {\r\n  more.style.backgroundColor = '#f0eff5';\r\n});\r\nmore.addEventListener('click', function () {\r\n  getData(null, nowPage + 1);\r\n});\r\ncontent.appendChild(more);\r\n// 定义支付\r\nconst payStatus = {\r\n  1: '待支付',\r\n  3: '交易失败',\r\n  4: '交易成功'\r\n};\r\n// 定义支付方式\r\nconst payType = {\r\n  1: '微信',\r\n  2: '支付宝',\r\n  3: '快捷',\r\n  4: 'QQ钱包',\r\n};\r\n// 定义ajax事件\r\nlet getData = function (e, page) {\r\n  // 检查page 如果page为1 清空content数据\r\n  nowPage = page || 1;\r\n  if (nowPage == 1) {\r\n    list.innerHTML = '';\r\n  }\r\n  http.post('/trade/queryMerchantPayOrders', {\r\n    pageNo: nowPage,\r\n    pageSize: 20,\r\n    orderNo: '',  //交易订单号\r\n    payStatus: payStatusCode,   //支付状态（1：待支付，3：支付失败，4：支付成功）\r\n    payType: payTypeCode,    //支付方式\r\n    startDate: startDate.value,\r\n    endDate: endDate.value\r\n  }, function (res) {\r\n    for (let i = 0; i < res.records.length; i++) {\r\n      let group = document.createElement('a');\r\n      group.href = '/trade/detail/' + res.records[i].orderId;\r\n      group.className = 'group';\r\n      let top = document.createElement('div');\r\n      top.className = 'top';\r\n      let topLeft = document.createElement('div');\r\n      topLeft.className = 'left';\r\n      if (res.records[i].payStatus == '4') {\r\n        topLeft.innerHTML = payStatus[res.records[i].payStatus] + '-' + res.records[i].payType;\r\n      } else {\r\n        topLeft.innerHTML = payStatus[res.records[i].payStatus];\r\n      }\r\n      let topRight = document.createElement('div');\r\n      topRight.className = 'right';\r\n      topRight.innerHTML = '+' + res.records[i].amount + '元';\r\n      top.appendChild(topLeft);\r\n      top.appendChild(topRight);\r\n      let bottom = document.createElement('div');\r\n      bottom.className = 'bottom';\r\n      let bottomLeft = document.createElement('div');\r\n      bottomLeft.className = 'left';\r\n      bottomLeft.innerHTML = res.records[i].payStatusValue;\r\n      let bottomRight = document.createElement('div');\r\n      bottomRight.className = 'right';\r\n      bottomRight.innerHTML = tools.dateFormat('YYYY-MM-DD HH:mm:ss', res.records[i].datetime);\r\n      bottom.appendChild(bottomLeft);\r\n      bottom.appendChild(bottomRight);\r\n      group.appendChild(top);\r\n      group.appendChild(bottom);\r\n      list.appendChild(group);\r\n    }\r\n    // 判断是否还有下一页\r\n    if (res.hasNextPage) {\r\n      more.style.display = 'block';\r\n    } else {\r\n      more.style.display = 'none';\r\n    }\r\n    content.insertBefore(list, content.childNodes[0]);\r\n    // 根据 e 判断是否为 时间改变的change事件\r\n    if (!e) {\r\n      query.className = 'query';\r\n    }\r\n  })\r\n};\r\n// 初始化数据\r\ngetData();\r\nstartDate.addEventListener('change', getData);\r\nendDate.addEventListener('change', getData);\r\n\r\nunfold.addEventListener('click', function () {\r\n  query.className = 'query flexBox flex-box-column active';\r\n});\r\ncancel.addEventListener('click', function () {\r\n  query.className = 'query';\r\n});\r\n// 定义筛选条件\r\nlet payVariable = {\r\n  paySuccess: {\r\n    type: 'payStatusCode',\r\n    status: true,\r\n    value: 4\r\n  },\r\n  payError: {\r\n    type: 'payStatusCode',\r\n    status: false,\r\n    value: 3\r\n  },\r\n  payWait: {\r\n    type: 'payStatusCode',\r\n    status: false,\r\n    value: 1\r\n  },\r\n  payWx: {\r\n    type: 'payTypeCode',\r\n    status: true,\r\n    value: 1\r\n  },\r\n  payAli: {\r\n    type: 'payTypeCode',\r\n    status: true,\r\n    value: 2\r\n  },\r\n  payQuick: {\r\n    type: 'payTypeCode',\r\n    status: true,\r\n    value: 3\r\n  },\r\n  payQQ: {\r\n    type: 'payTypeCode',\r\n    status: true,\r\n    value: 4\r\n  }\r\n};\r\nlet li = document.getElementsByClassName('li');\r\nfor (let i = 0; i < li.length; i++) {\r\n  li[i].addEventListener('click', function () {\r\n    // 处理变量\r\n    let variable = this.getAttribute('y-variable');\r\n    payVariable[variable]['status'] = !payVariable[variable]['status'];\r\n    // 处理变量唯一性\r\n    if (!payVariable.paySuccess.status && !payVariable.payError.status && !payVariable.payWait.status) {\r\n      message.prompt_show('至少选择一种支付状态');\r\n      payVariable[variable]['status'] = !payVariable[variable]['status'];\r\n      return;\r\n    }\r\n    if (!payVariable.payWx.status && !payVariable.payAli.status && !payVariable.payQuick.status && !payVariable.payQQ.status) {\r\n      message.prompt_show('至少选择一种支付方式');\r\n      payVariable[variable]['status'] = !payVariable[variable]['status'];\r\n      return;\r\n    }\r\n    // 处理样式\r\n    if (this.className.indexOf('active') > -1) {\r\n      this.className = 'li';\r\n    } else {\r\n      this.className = 'li active';\r\n    }\r\n  })\r\n}\r\nsubmit.addEventListener('click', function () {\r\n  // 处理请求数据\r\n  payStatusCode = [];\r\n  payTypeCode = [];\r\n  for (let i in payVariable) {\r\n    if (payVariable[i]['status']) {\r\n      if (payVariable[i]['type'] == 'payStatusCode') {\r\n        payStatusCode.push(payVariable[i]['value'])\r\n      } else if (payVariable[i]['type'] == 'payTypeCode') {\r\n        payTypeCode.push(payVariable[i]['value'])\r\n      }\r\n    }\r\n  }\r\n  // 唤起请求事件\r\n  getData();\r\n});\r\n"]}