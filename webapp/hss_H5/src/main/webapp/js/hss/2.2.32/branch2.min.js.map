{"version":3,"sources":["branch2.js"],"names":["http","_require","message","validate","browser","elastic_touch","client_h","document","body","clientHeight","layer_b_list","getElementById","match_ipt","p","c","ct","Provinces","Citys","Countrys","bankList","getQueryString","name","reg","RegExp","r","window","location","search","substr","match","unescape","getLocationString","path","pathname","index","lastIndexOf","substring","length","dataStorage","JSON","parse","localStorage","getItem","searchFun","currentPage","nowPage","innerHTML","post","contions","value","bankNo","districtCode","cityCode","pageNo","pageSize","data","console","log","result","records","style","display","i","weuiCell","createElement","className","cellBd","appendChild","branchName","onclick","branchCode","setItem","stringify","href","pageData","oemNo","source","totalPage","more","addEventListener","ev","writeBranch","textAlign","height","lineHeight","fontSize","color","backgroundColor","pathName"],"mappings":"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","file":"branch2.min.js","sourcesContent":["/**\r\n * Created by administrator on 2016/12/8.\r\n */\r\n\r\n// 引入浏览器特性处理\r\nconst http = _require('http');\r\nconst message = _require('message');\r\nconst validate = _require('validate');\r\nconst browser = _require('browser');\r\nbrowser.elastic_touch('layer-w-list');\r\nbrowser.elastic_touch('layer-b-list');\r\n// 定义变量\r\n// const color = document.getElementById('color');\r\n// const logo = document.getElementById('logo');\r\n// 获取屏幕高度 确定搜索栏位置\r\nlet client_h = document.body.clientHeight;\r\n// let layer_w = document.getElementById('layer-w');\r\n// let layer_w_list = document.getElementById('layer-w-list');\r\n// let layer_b = document.getElementById('layer-b');\r\nlet layer_b_list = document.getElementById('layer-b-list');\r\n// 定义输入框\r\n// let submit = document.getElementById('submit');\r\n// let world = document.getElementById('world');\r\n// let branch = document.getElementById('branch');\r\nlet match_ipt = document.getElementById('match_ipt');\r\n// 定义选择框\r\nlet p = document.getElementById('p');\r\nlet c = document.getElementById('c');\r\nlet ct = document.getElementById('ct');\r\n\r\nlet Provinces = false;\r\nlet Citys = false;\r\nlet Countrys = false;\r\nlet bankList = document.getElementById('cellList');\r\n\r\nfunction getQueryString(name) {\r\n  let reg = new RegExp(\"(^|&)\" + name + \"=([^&]*)(&|$)\", \"i\");\r\n  let r = window.location.search.substr(1).match(reg);\r\n  if (r != null) return unescape(r[2]);\r\n  return null;\r\n}\r\n\r\nfunction getLocationString() {\r\n  let path = window.location.pathname;\r\n  let index = path.lastIndexOf(\"\\/\");\r\n  return path.substring(index + 1, path.length);\r\n}\r\n\r\n// 处理 初始化 的过程\r\nlet dataStorage = JSON.parse(localStorage.getItem('branch'));\r\nlet search = document.getElementById('search');\r\nlet searchFun = function (currentPage) {\r\n    if (nowPage == 1) {\r\n        bankList.innerHTML = '';\r\n    }\r\n    http.post('/bankBranch/getBankBranch', {\r\n        contions: document.getElementById('match_ipt').value,\r\n        bankNo: dataStorage.bankNo,\r\n        districtCode: dataStorage.cityCode,\r\n        pageNo:currentPage,\r\n        pageSize:10\r\n    }, function (data) {\r\n        console.log(data)\r\n        data = JSON.parse(data)\r\n        if(data.result.records.length == 0){\r\n            document.getElementById('toWrite').style.display = 'block';\r\n        }else {\r\n            document.getElementById('toWrite').style.display = 'none';\r\n            for (let i = 0; i < data.result.records.length; i++) {\r\n                let weuiCell = document.createElement('div');\r\n                weuiCell.className = 'weui-cell';\r\n                let cellBd = document.createElement('div');\r\n                cellBd.className = 'weui-cell__bd';\r\n                weuiCell.appendChild(cellBd);\r\n                let p = document.createElement('p');\r\n                p.innerHTML = data.result.records[i].branchName\r\n                cellBd.appendChild(p);\r\n                weuiCell.onclick = function () {\r\n                    dataStorage.branchCode = data.result.records[i].branchCode;\r\n                    dataStorage.branchName = data.result.records[i].branchName;\r\n                    localStorage.setItem('branch',JSON.stringify(dataStorage))\r\n                    window.location.href = '/sqb/bankBranch/'+localStorage.getItem('bankId')+'?oemNo='+pageData.oemNo+'&source='+pageData.source;\r\n                }\r\n                /*let div_branch = document.createElement('div');\r\n                 div_branch.className = 't';\r\n                 div_branch.innerHTML = data[i].branchName;\r\n                 div_branch.onclick = function () {\r\n                 branch.value = data[i].branchName;\r\n                 pageData.branchCode = data[i].branchCode;\r\n                 pageData.branchName = data[i].branchName;\r\n                 layer_b.style.display = 'none';\r\n                 };*/\r\n                // weuiCell.appendChild(bankList);\r\n                bankList.appendChild(weuiCell)\r\n            }\r\n        }\r\n        if (data.result.totalPage != nowPage&&data.result.totalPage!=0) {\r\n            more.style.display = 'block';\r\n        } else {\r\n            more.style.display = 'none';\r\n        }\r\n    })\r\n}\r\nsearch.addEventListener('click',function (ev) {\r\n    nowPage = 1\r\n    searchFun(1)\r\n})\r\nlet writeBranch = document.getElementById('writeBranch');\r\nlet nowPage = 1;\r\nlet more = document.createElement('div');\r\nmore.className = 'touch_more';\r\nmore.innerHTML = '加载更多';\r\nmore.style.display = 'none';\r\nmore.style.textAlign = 'center';\r\nmore.style.height = '50px';\r\nmore.style.lineHeight = '50px';\r\nmore.style.fontSize = '16px';\r\nmore.style.color = '#999';\r\nmore.style.backgroundColor = '#f4f5f8';\r\nlet pathName = window.location.pathname;\r\nmore.addEventListener('touchstart', function () {\r\n    more.style.backgroundColor = '#d8d7dc';\r\n});\r\nmore.addEventListener('touchend', function () {\r\n    more.style.backgroundColor = '#f4f5f8';\r\n});\r\nmore.addEventListener('click', function () {\r\n    nowPage = nowPage+1\r\n    console.log(nowPage)\r\n    searchFun(nowPage);\r\n});\r\nwriteBranch.appendChild(more);\r\n"]}