{"version":3,"sources":["reg.js"],"names":["AnimationCountdown","_require","countdown","validate","message","http","mobile","document","getElementById","sendCode","code","submit","invite","inviteCode","layer","cancel","login","browser","elastic_touch","pageData","qrCode","style","display","readonly","addEventListener","phone","value","check","post","oemNo","data","prompt_show","submit_start","window","location","href","joint","replace"],"mappings":"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","file":"reg.min.js","sourcesContent":["/**\r\n * Created by administrator on 2016/12/8.\r\n */\r\n\r\n// 引入动画模版 处理验证码\r\nconst AnimationCountdown = _require('art-countdown');\r\nlet countdown = new AnimationCountdown('sendCode', '重新获取');\r\n// 引入http message\r\nconst validate = _require('validate');\r\nconst message = _require('message');\r\nconst http = _require('http');\r\n// 定义变量\r\nconst mobile = document.getElementById('mobile');\r\nconst sendCode = document.getElementById('sendCode');\r\nconst code = document.getElementById('code');\r\nconst submit = document.getElementById('submit');\r\nconst invite = document.getElementById('invite');\r\nconst inviteCode = document.getElementById('inviteCode');\r\nconst layer = document.getElementById('layer');\r\nconst cancel = document.getElementById('cancel');\r\nconst login = document.getElementById('login');\r\n// 引入浏览器特性处理\r\nconst browser = _require('browser');\r\nbrowser.elastic_touch();\r\n\r\nif (!pageData.qrCode || pageData.qrCode == '') {\r\n  invite.style.display = 'block';\r\n}\r\n\r\nif (!pageData.inviteCode || pageData.inviteCode == '') {\r\n  inviteCode.readonly = false;\r\n}\r\n\r\nsendCode.addEventListener('click', function () {\r\n  if (validate.phone(mobile.value)) {\r\n    if (countdown.check()) {\r\n      http.post('/wx/getCode', {\r\n        mobile: mobile.value,\r\n        oemNo: pageData.oemNo\r\n      }, function (data) {\r\n        if (data === false) {\r\n          layer.style.display = 'block';\r\n          return;\r\n        }\r\n        message.prompt_show('验证码发送成功');\r\n        countdown.submit_start();\r\n      })\r\n    }\r\n  }\r\n});\r\n\r\ncancel.addEventListener('click', function () {\r\n  layer.style.display = 'none';\r\n});\r\n\r\nlogin.addEventListener('click', function () {\r\n  window.location.href = '/sqb/login?phone=' + mobile.value + \"&oemNo=\" + pageData.oemNo;\r\n});\r\n\r\n// 注册\r\nsubmit.addEventListener('click', () => {\r\n  if (!pageData.qrCode || pageData.qrCode == '') {\r\n    if (validate.joint({\r\n        phone: mobile.value,\r\n        code: code.value\r\n      })) {\r\n      http.post('/wx/login', {\r\n        mobile: mobile.value,\r\n        code: code.value,\r\n        oemNo: pageData.oemNo,\r\n        inviteCode: inviteCode.value\r\n      }, () => {\r\n        window.location.replace(\"/sqb/addInfo?oemNo=\" + pageData.oemNo);\r\n      })\r\n    }\r\n  } else {\r\n    if (validate.joint({\r\n        phone: mobile.value,\r\n        code: code.value\r\n      })) {\r\n      http.post('/wx/login', {\r\n        mobile: mobile.value,\r\n        code: code.value,\r\n        qrCode: pageData.qrCode,\r\n        oemNo: pageData.oemNo,\r\n        inviteCode: inviteCode.value\r\n      }, () => {\r\n        window.location.replace(\"/sqb/addInfo?oemNo=\" + pageData.oemNo);\r\n      })\r\n    }\r\n  }\r\n});"]}