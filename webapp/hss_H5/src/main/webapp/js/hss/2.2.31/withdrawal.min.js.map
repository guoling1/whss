{"version":3,"sources":["withdrawal.js"],"names":["Animation","_require","animation","validate","message","http","next","document","getElementById","layer","layer_x","submit","sendCode","code","addEventListener","style","display","browser","elastic_touch","amount","bank","ipt","fee","come","mobile","reFee","toFee","toBank","toAmount","toCome","reAcconut","post","data","innerHTML","available","toFixed","bankName","bankNo","withdrawFee","setAttribute","e","ev","target","val","value","sendcode","url","btn","prompt_show","click","load_show","channel","load_hide","window","location","replace","encodeURIComponent","pageData","oemNo"],"mappings":"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","file":"withdrawal.min.js","sourcesContent":["/**\r\n * Created by administrator on 2016/12/8.\r\n */\r\n\r\n// 引入动画模版 处理验证码\r\nconst Animation = _require('animation');\r\nconst animation = new Animation();\r\n// 引入http validate message\r\nconst validate = _require('validate');\r\nconst message = _require('message');\r\nconst http = _require('http');\r\n// 定义变量\r\nconst next = document.getElementById('next');\r\nconst layer = document.getElementById('layer');\r\nconst layer_x = document.getElementById('layer-x');\r\nconst submit = document.getElementById('submit');\r\nconst sendCode = document.getElementById('sendCode');\r\nconst code = document.getElementById('code');\r\n\r\nlayer_x.addEventListener('click', function () {\r\n  layer.style.display = 'none';\r\n});\r\n// 引入浏览器特性处理\r\nconst browser = _require('browser');\r\nbrowser.elastic_touch();\r\n\r\n// 定义变量\r\nlet amount = document.getElementById('amount');\r\nlet bank = document.getElementById('bank');\r\nlet ipt = document.getElementById('ipt');\r\nlet fee = document.getElementById('fee');\r\nlet come = document.getElementById('come');\r\nlet mobile = document.getElementById('mobile');\r\nlet reFee = '';\r\nlet toFee = '';\r\nlet toBank = '';\r\nlet toAmount = '';\r\nlet toCome = '';\r\nlet reAcconut = '';\r\n// 获取数据\r\nhttp.post('/account/info', {}, function (data) {\r\n  amount.innerHTML = data.available.toFixed(2);\r\n  bank.innerHTML = data.bankName + '(' + data.bankNo + ')';\r\n  fee.innerHTML = data.withdrawFee.toFixed(2);\r\n  mobile.innerHTML = data.mobile;\r\n  toBank = data.bankName + ' ' + data.bankNo;\r\n  reFee = data.withdrawFee;\r\n  reAcconut = data.available;\r\n  if (data.available <= data.withdrawFee) {\r\n    next.setAttribute('disabled', 'true');\r\n  }\r\n});\r\n\r\nipt.addEventListener('input', function (e) {\r\n  let ev = e.target;\r\n  let val = ev.value;\r\n  come.innerHTML = (val - reFee) > 0 ? (val - reFee).toFixed(2) : '0.00';\r\n  toFee = reFee.toFixed(2);\r\n  toAmount = (val / 1).toFixed(2);\r\n  toCome = (val - reFee).toFixed(2);\r\n});\r\n\r\n// 定义验证码\r\nanimation.sendcode({\r\n  url: '/account/sendVerifyCode',\r\n  btn: 'sendCode'\r\n});\r\n\r\nnext.addEventListener('click', function () {\r\n  // 校验输入的值是否合法\r\n  if (ipt.value > reAcconut) {\r\n    message.prompt_show('可提现金额不足');\r\n    return;\r\n  }\r\n  if (ipt.value <= reFee) {\r\n    message.prompt_show('提现金额必须大于手续费');\r\n    return;\r\n  }\r\n  layer.style.display = 'block';\r\n  sendCode.click();\r\n});\r\n\r\nsubmit.addEventListener('click', function () {\r\n  if (validate.code(code.value)) {\r\n    message.load_show('正在校验');\r\n    http.post('/account/withdraw', {\r\n      amount: ipt.value,\r\n      channel: 101,\r\n      code: code.value\r\n    }, function () {\r\n      message.load_hide();\r\n      window.location.replace('/account/toHssWithdrawSuccess?toFee=' + toFee + '&toBank=' + encodeURIComponent(toBank) + '&toAmount=' + toAmount + '&toCome=' + toCome + '&oemNo=' + pageData.oemNo);\r\n    })\r\n  }\r\n});"]}