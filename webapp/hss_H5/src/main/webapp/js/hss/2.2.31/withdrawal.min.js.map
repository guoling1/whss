{"version":3,"sources":["withdrawal.js"],"names":["Animation","_require","animation","validate","message","http","next","document","getElementById","layer","layer_x","submit","sendCode","code","addEventListener","style","display","browser","elastic_touch","amount","bank","ipt","fee","come","mobile","reFee","toFee","toBank","toAmount","toCome","reAcconut","post","data","innerHTML","available","toFixed","bankName","bankNo","withdrawFee","setAttribute","e","ev","target","val","value","sendcode","url","btn","prompt_show","click","load_show","channel","load_hide","window","location","replace","encodeURIComponent","pageData","oemNo"],"mappings":"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","file":"withdrawal.min.js","sourcesContent":["/**\n * Created by administrator on 2016/12/8.\n */\n\n// 引入动画模版 处理验证码\nconst Animation = _require('animation');\nconst animation = new Animation();\n// 引入http validate message\nconst validate = _require('validate');\nconst message = _require('message');\nconst http = _require('http');\n// 定义变量\nconst next = document.getElementById('next');\nconst layer = document.getElementById('layer');\nconst layer_x = document.getElementById('layer-x');\nconst submit = document.getElementById('submit');\nconst sendCode = document.getElementById('sendCode');\nconst code = document.getElementById('code');\n\nlayer_x.addEventListener('click', function () {\n  layer.style.display = 'none';\n});\n// 引入浏览器特性处理\nconst browser = _require('browser');\nbrowser.elastic_touch();\n\n// 定义变量\nlet amount = document.getElementById('amount');\nlet bank = document.getElementById('bank');\nlet ipt = document.getElementById('ipt');\nlet fee = document.getElementById('fee');\nlet come = document.getElementById('come');\nlet mobile = document.getElementById('mobile');\nlet reFee = '';\nlet toFee = '';\nlet toBank = '';\nlet toAmount = '';\nlet toCome = '';\nlet reAcconut = '';\n// 获取数据\nhttp.post('/account/info', {}, function (data) {\n  amount.innerHTML = data.available.toFixed(2);\n  bank.innerHTML = data.bankName + '(' + data.bankNo + ')';\n  fee.innerHTML = data.withdrawFee.toFixed(2);\n  mobile.innerHTML = data.mobile;\n  toBank = data.bankName + ' ' + data.bankNo;\n  reFee = data.withdrawFee;\n  reAcconut = data.available;\n  if (data.available <= data.withdrawFee) {\n    next.setAttribute('disabled', 'true');\n  }\n});\n\nipt.addEventListener('input', function (e) {\n  let ev = e.target;\n  let val = ev.value;\n  come.innerHTML = (val - reFee) > 0 ? (val - reFee).toFixed(2) : '0.00';\n  toFee = reFee.toFixed(2);\n  toAmount = (val / 1).toFixed(2);\n  toCome = (val - reFee).toFixed(2);\n});\n\n// 定义验证码\nanimation.sendcode({\n  url: '/account/sendVerifyCode',\n  btn: 'sendCode'\n});\n\nnext.addEventListener('click', function () {\n  // 校验输入的值是否合法\n  if (ipt.value > reAcconut) {\n    message.prompt_show('可提现金额不足');\n    return;\n  }\n  if (ipt.value <= reFee) {\n    message.prompt_show('提现金额必须大于手续费');\n    return;\n  }\n  layer.style.display = 'block';\n  sendCode.click();\n});\n\nsubmit.addEventListener('click', function () {\n  if (validate.code(code.value)) {\n    message.load_show('正在校验');\n    http.post('/account/withdraw', {\n      amount: ipt.value,\n      channel: 101,\n      code: code.value\n    }, function () {\n      message.load_hide();\n      window.location.replace('/account/toHssWithdrawSuccess?toFee=' + toFee + '&toBank=' + encodeURIComponent(toBank) + '&toAmount=' + toAmount + '&toCome=' + toCome + '&oemNo=' + pageData.oemNo);\n    })\n  }\n});"]}