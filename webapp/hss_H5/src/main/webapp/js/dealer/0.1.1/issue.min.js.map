{"version":3,"sources":["issue.js"],"names":["validate","_require","message","http","browser","elastic_touch","number1","document","getElementById","number2","number3","number4","count1","count3","check1","value","length","check3","query1","post","startCode","endCode","data","innerHTML","count","query3","addEventListener","title","ownTitle","content","ownContent","className","mobile","listId","dealerId1","oldVal","time","setInterval","val","post_form","condition","console","log","style","display","_loop","i","li","createElement","name","dealerId","c_name","c_mobile","appendChild","clearInterval","submit1","empty","submit","prompt_show","submit2"],"mappings":"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","file":"issue.min.js","sourcesContent":["/**\n * Created by wangl on 2016/12/16.\n */\n\n// 引入http message validate\nconst validate = _require('validate');\nconst message = _require('message');\nconst http = _require('http');\n// 引入浏览器特性处理\nconst browser = _require('browser');\nbrowser.elastic_touch();\n\n// 定义变量\nlet number1 = document.getElementById('number1');\nlet number2 = document.getElementById('number2');\nlet number3 = document.getElementById('number3');\nlet number4 = document.getElementById('number4');\nlet count1 = document.getElementById('count1');\nlet count3 = document.getElementById('count3');\n\n// 输入框校验\nconst check1 = function () {\n  return (number1.value.length == 12 && number2.value.length == 12);\n};\nconst check3 = function () {\n  return (number3.value.length == 12 && number4.value.length == 12);\n};\n\n// 查询有效二维码个数\nconst query1 = function () {\n  if (check1()) {\n    http.post('/dealer/findCodeCount', {\n      startCode: number1.value,\n      endCode: number2.value\n    }, function (data) {\n      count1.innerHTML = data.count;\n    })\n  }\n};\nconst query3 = function () {\n  if (check3()) {\n    http.post('/dealer/findCodeCount', {\n      startCode: number3.value,\n      endCode: number4.value\n    }, function (data) {\n      count3.innerHTML = data.count;\n    })\n  }\n};\n\n// 查询剩余个数\nnumber1.addEventListener('input', query1);\nnumber2.addEventListener('input', query1);\nnumber3.addEventListener('input', query3);\nnumber4.addEventListener('input', query3);\n\n// teb切换\nlet title = document.getElementById('title');\nlet ownTitle = document.getElementById('ownTitle');\nlet content = document.getElementById('content');\nlet ownContent = document.getElementById('ownContent');\n\ntitle.addEventListener('click', function () {\n  title.className = 'active';\n  ownTitle.className = '';\n  content.className = 'content show';\n  ownContent.className = 'ownContent';\n});\n\nownTitle.addEventListener('click', function () {\n  title.className = '';\n  ownTitle.className = 'active';\n  content.className = 'content';\n  ownContent.className = 'ownContent show';\n});\n\n// 二级代理模糊匹配\nlet mobile = document.getElementById('mobile');\nlet listId = document.getElementById('listId');\nlet dealerId1 = document.getElementById('dealerId1');\nmobile.addEventListener('focus', function () {\n    var oldVal = null;\n    time = setInterval(function () {\n        var val = mobile.value;\n        if(val!=oldVal||val.length==1){\n            if (val!=\"\") {\n                http.post_form('/dealer/find', {\n                    condition: val\n                }, function (data) {\n                    listId.innerHTML = '';\n                    if (data.length != 0) {\n                        console.log(val,oldVal)\n                        console.log(1)\n                        listId.style.display = \"block\";\n                        oldVal=val;\n                        var _loop = function _loop(i) {\n                            var li = document.createElement('li');\n                            li.addEventListener('click', function () {\n                                listId.style.display = \"none\";\n                                mobile.value = data[i].name + ' ' + data[i].mobile;\n                                dealerId1.value = dealerId1.dealerId;\n                            });\n                            var c_name = document.createElement('span');\n                            c_name.innerHTML = data[i].name;\n                            var c_mobile = document.createElement('span');\n                            c_mobile.innerHTML = data[i].mobile;\n                            li.appendChild(c_name);\n                            li.appendChild(c_mobile);\n                            listId.appendChild(li);\n                        };\n                        for (var i = 0; i < data.length; i++) {\n                            _loop(i);\n                        }\n                    } else {\n                        listId.style.display = \"none\";\n                    }\n                });\n            }else {\n                listId.style.display = \"none\";\n            }\n        }\n    },100)\n});\nmobile.addEventListener('blur',function () {\n\n    clearInterval(time)\n    var val = mobile.value;\n    listId.style.display = \"none\";\n    console.log(val)\n    if(val!=''){\n        http.post_form('/dealer/find', {\n            condition: val\n        }, function (data) {\n            listId.innerHTML = '';\n            console.log(data)\n            if (data.length !=0) {\n                console.log(2)\n                mobile.value = data[0].name + ' ' + data[0].mobile;\n                dealerId1.value = dealerId1.dealerId;\n                listId.style.display = \"none\";\n            }\n        })\n    }\n})\n\n// 提交前的校验\nlet submit1 = document.getElementById('submit1');\nsubmit1.addEventListener('click', function () {\n  if (!validate.empty(dealerId1.value, '二级代理商')) {\n    return false;\n  }\n  if (count1.innerHTML > 0) {\n    submit1.submit();\n  } else {\n    message.prompt_show('请输入正确的分配码段');\n    return false;\n  }\n});\n\nlet submit2 = document.getElementById('submit2');\nsubmit2.addEventListener('click', function () {\n  if (count3.innerHTML > 0) {\n    submit2.submit();\n  } else {\n    message.prompt_show('请输入正确的分配码段');\n    return false;\n  }\n});"]}