{"version":3,"sources":["consumeList.js"],"names":["message","_require","tools","weuiCells","document","getElementById","query","GetUrlArg","record","more","nowPage","className","innerHTML","style","display","textAlign","height","lineHeight","fontSize","color","location","pathname","backgroundColor","pathName","window","getData","e","page","type","ajax","mid","url","dataType","alert","data","i","list","length","success","div_list","createElement","div_list_left","shopname","left_title","left_date","appendChild","div_list_right","span","amount","span1"],"mappings":"YAAA,IAAMA,SAAUC,SAAS,WACnBC,MAAQD,SAAS,SAAjBC,MAAQD,MAAAA,YACdE,UAAAC,SAAAC,eAAA,cACIC,OAAQJ,SAAMK,eAAlB,UACIJ,QAAAA,EACAK,KAAAA,SAASJ,cAASC,MACtBI,MAAIC,UAAJ,aACAD,KAAIA,UAAOL,OACXK,KAAKE,MAAAA,QAAY,OACjBF,KAAKG,MAAAA,UAAL,SACAH,KAAKI,MAAMC,OAAX,OACAL,KAAKI,MAAME,WAAY,OACvBN,KAAKI,MAAMG,SAAS,OACpBP,KAAKI,MAAMI,MAAAA,OACXR,KAAKI,MAAMK,gBAAX,SACAT,IAAAA,UAAWU,OAAQC,SAAnBC,QACAZ,MAAKI,iBAAMS,aAAkB,WACzBC,KAAAA,MAAWC,gBAAgBH,YAE3BZ,KAAAA,iBAAWa,WAAkB,WADjCb,KAAAI,MAAAS,gBAAA,YAIIb,KAAAA,iBAAWa,QAAX,WADJG,QAAA,KAAAf,QAAA,KAIIe,OAAAA,YAAcf,KACjB,IAFDe,SAAA,SAAAC,EAAAC,GAIIF,QAAUE,GAAA,EACV,GAAAjB,UACAA,UAAUiB,UAAV,IAEIxB,EAAAA,MACHyB,KAAA,MACCC,IAAK,qCAAAvB,MAAAwB,IAAA,gBAAApB,QACHkB,SAAM,OACNG,MAAK,WACLC,MAAU,SAENC,QAAAA,SAAAC,GALD,IAAA,GAAAC,GAAA,EAAAA,EAAAD,EAAAE,KAAAC,OAAAF,IAAA,CAOHG,GAASC,GAAAnC,SAAgBoC,cAAA,MACrBD,GAAa5B,UAAYyB,WACrB,IAAIG,GAAWnC,SAASoC,cAAT,MACfD,GAAS5B,UAAY,eACrB,IAAI8B,GAAAA,SAAgBrC,cAASoC,IAC7BC,GAAAA,UAAAP,EAA0BE,KAAAD,GAAAO,QAC1B,IAAIC,GAAAA,SAAavC,cAAA,IACjBuC,GAAAA,UAAA,OACAC,EAAIA,UAAYxC,EAASoC,KAAAA,GAAAA,WACzBI,EAAUjC,YAAYgC,GACtBC,EAAUhC,YAAYsB,EACtBO,IAAAA,GAAcI,SAAYF,cAA1B,MACAF,GAAcI,UAAYD,eAC1B,IAAIE,GAAAA,SAAAA,cAA0BN,OAC9BM,GAAAA,UAAenC,GACf,IAAIoC,GAAO3C,SAASoC,cAAc,OAClCO,GAAKnC,UAALsB,EAAAE,KAAAD,GAAAa,OACAF,EAAY1C,YAASoC,GACrBS,EAAAJ,YAAgBI,GAChBH,EAAAA,YAAeD,GACfC,EAAAA,YAAeD,GAEfN,UAASM,YAAYC,GAErB3C,EAAAA,KAAU0C,WAAYN,QACzB9B,KAAAI,MAAAC,QAAA,QAEGL,KAAKI,MAAMC,QAAU,UAMpCW","file":"consumeList.min.js","sourcesContent":["const message = _require('message');\nconst tools = _require('tools');\n// 定义ajax事件\nlet query = tools.GetUrlArg();\nlet weuiCells = document.getElementById('weui-cells');\nlet record = document.getElementById('record');\nlet nowPage = 1;\nlet more = document.createElement('div');\nmore.className = 'touch_more';\nmore.innerHTML = '加载更多';\nmore.style.display = 'none';\nmore.style.textAlign = 'center';\nmore.style.height = '50px';\nmore.style.lineHeight = '50px';\nmore.style.fontSize = '16px';\nmore.style.color = '#999';\nmore.style.backgroundColor = '#f4f5f8';\nlet pathName = window.location.pathname;\nmore.addEventListener('touchstart', function () {\n    more.style.backgroundColor = '#d8d7dc';\n});\nmore.addEventListener('touchend', function () {\n    more.style.backgroundColor = '#f4f5f8';\n});\nmore.addEventListener('click', function () {\n    getData(null, nowPage + 1);\n});\nrecord.appendChild(more);\nlet getData = function (e, page) {\n    // 检查page 如果page为1 清空content数据\n    nowPage = page || 1;\n    if (nowPage == 1) {\n        weuiCells.innerHTML = '';\n    }\n    $.ajax({\n        type: \"get\",\n        url: '/membership/consumeListByPage?mid='+query.mid+'&currentPage='+nowPage,\n        dataType: \"json\",\n        error: function () {\n            alert(\"请求失败\")\n        },\n        success: function (data) {\n            for (let i = 0; i < data.list.length; i++) {\n                let div_list = document.createElement('div');\n                div_list.className = 'weui-cell';\n                let div_list_left = document.createElement('div');\n                div_list_left.className = 'weui-cell__bd';\n                let left_title = document.createElement('p');\n                left_title.innerHTML = data.list[i].shopname;\n                let left_date = document.createElement('p');\n                left_date.className = 'time';\n                left_date.innerHTML = data.list[i].createTime;\n                div_list_left.appendChild(left_title);\n                div_list_left.appendChild(left_date);\n                let div_list_right = document.createElement('div');\n                div_list_right.className = 'weui-cell__ft';\n                let span = document.createElement('span');\n                span.innerHTML=\"￥\";\n                let span1 = document.createElement('span');\n                span1.innerHTML=data.list[i].amount;\n                div_list_right.appendChild(span)\n                div_list_right.appendChild(span1)\n                div_list.appendChild(div_list_left);\n                div_list.appendChild(div_list_right);\n                // weuiCells.insertBefore(div_list, weuiCells.childNodes[0]);\n                weuiCells.appendChild(div_list);\n            }\n            if (data.page.totalPage != nowPage) {\n                more.style.display = 'block';\n            } else {\n                more.style.display = 'none';\n            }\n        }\n    });\n};\n// 初始化数据\ngetData();"]}