"use strict";var http=_require("http"),message=_require("message"),recharge=document.getElementById("recharge"),onWeixinJSBridge=function(e){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:e.appId,timeStamp:e.timeStamp,nonceStr:e.nonceStr,package:e.package,signType:e.signType,paySign:e.paySign},function(e){"get_brand_wcpay_request:cancel"==e.err_msg?console.log("取消支付"):"get_brand_wcpay_request:ok"==e.err_msg?location.href="/membership/createMemberSuccess?mid="+pageData.mid+"&source="+pageData.source:alert(e.err_code+e.err_desc+e.err_msg)})},onAlipayJSBridge=function(e){AlipayJSBridge.call("tradePay",{tradeNO:e.tradeNO},function(e){9e3!=e.resultCode&&8e3!=e.resultCode||(location.href="/membership/createMemberSuccess?mid="+pageData.mid+"&source="+pageData.source)})};recharge.addEventListener("click",function(){var e=pageData.source;if(e)switch(e){case"WX":$.ajax({type:"get",url:"/membership/recharge",data:{type:pageData.type,source:pageData.source,mid:pageData.mid},dataType:"json",error:function(){alert("请求失败")},success:function(e){"memberInfo"==e.flag?document.getElementById("iosDialog2").style.display="block":"fail"==e.flag?message.prompt_show(e.result):(message.load_show("正在支付"),http.post(e.payResponse.url,{},function(e){console.log(e),message.load_hide(),onWeixinJSBridge(e)}))}});break;case"ZFB":$.ajax({type:"get",url:"/membership/recharge",data:{type:pageData.type,source:pageData.source,mid:pageData.mid},dataType:"json",error:function(){alert("请求失败")},success:function(e){"memberInfo"==e.flag?document.getElementById("iosDialog2").style.display="block":"fail"==e.flag?message.prompt_show(e.result):(message.load_show("正在支付"),http.get(e.payResponse.url,{},function(e){message.load_hide(),onAlipayJSBridge(e)}))}})}});
//# sourceMappingURL=needRecharge.min.js.map
