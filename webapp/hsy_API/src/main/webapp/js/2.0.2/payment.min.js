"use strict";function getValue(){var e=boxInput.getBoxInputValue();boxInput.setValue(),maskPay.style.opacity=0,maskPay.style.display="none",message.load_show("正在支付");var t=document.getElementById("realNum").innerHTML,a=document.getElementById("key-span").innerHTML;http.post("/trade/scReceipt",{totalFee:a,hsyOrderId:pageData.hsyOrderId,isMemberCardPay:1,discountFee:t,cid:pageData.cid,mcid:pageData.mcid,mid:pageData.id,consumerCellphone:e},function(e){message.load_hide(),window.location.href="/trade/success/"+jsonData.orderId})}var message=_require("message"),Keyboard=_require("keyboard"),http=_require("http");new Keyboard({spanId:"key-span",inputId:"key-input",keyboardId:"keyboard",pageData:pageData});var choose=document.getElementById("choose"),close=document.getElementById("close"),mask=document.getElementById("iosDialog1"),maskPay=document.getElementById("iosDialog2"),val=document.getElementById("key-input"),memberPay=document.getElementById("memberPay"),wrap=document.getElementById("wrap"),closePay=document.getElementById("closePay"),container=document.getElementById("inputBoxContainer"),boxInput={maxLength:"",realInput:"",bogusInput:"",bogusInputArr:"",callback:"",init:function(e){var t=this;this.callback=e,t.realInput=container.children[0],t.bogusInput=container.children[1],t.bogusInputArr=t.bogusInput.children,t.maxLength=t.bogusInputArr[0].getAttribute("maxlength"),t.realInput.oninput=function(){t.setValue()},t.realInput.onpropertychange=function(){t.setValue()}},setValue:function(){this.realInput.value=this.realInput.value.replace(/\D/g,""),console.log(this.realInput.value.replace(/\D/g,""));for(var e=this.realInput.value,t=0;t<this.maxLength;t++)this.bogusInputArr[t].value=e[t]?e[t]:"";e.length>=this.maxLength&&(this.realInput.value="",this.callback())},getBoxInputValue:function(){var e="";for(var t in this.bogusInputArr){if(!this.bogusInputArr[t].value)break;e+=this.bogusInputArr[t].value}return e}};boxInput.init(function(){getValue()}),choose.addEventListener("click",function(){val.value>0?(mask.style.opacity=1,mask.style.display="block"):message.prompt_show("请输入正确的支付金额")}),close.addEventListener("click",function(){mask.style.opacity=0,mask.style.display="none"}),memberPay.addEventListener("click",function(e){var t=document.getElementById("realNum").innerHTML;parseInt(pageData.remainingSum)<parseInt(t)?(mask.style.opacity=0,mask.style.display="none",message.prompt_show("余额不足，请先充值")):(document.getElementById("paymenyPrice").innerHTML="￥"+t,mask.style.opacity=0,mask.style.display="none",maskPay.style.opacity=1,maskPay.style.display="block",document.getElementsByClassName("realInput")[0].focus())}),closePay.addEventListener("click",function(){maskPay.style.opacity=0,maskPay.style.display="none"});
//# sourceMappingURL=payment.min.js.map
