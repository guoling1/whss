{"version":3,"sources":["createMember.js"],"names":["AnimationCountdown","_require","countdown","message","validate","http","getElementById","sendCode","document","mobile","code","submit","cancel","browser","elastic_touch","mySwiper","Swiper","mcid","isDeposited","effect","slidesPerView","centeredSlides","coverflow","rotate","stretch","depth","slideShadows","prompt","getElementsByTagName","swip","swiper","i","length","activeIndex","style","display","value","console","log","onSlideChangeStart","getElementsByClassName","getAttribute","pageData","consumeCellphone","readOnly","addEventListener","phone","check","ajax","type","url","data","alert","error","prompt_show","submit_start","joint","dataType","consumerCellphone","openID","$","val","userID","source","cid","flag","status","location","href","mid","result"],"mappings":"YAKA,IAAMA,oBAAqBC,SAAS,iBADpCC,UAAA,GAAAF,oBAAA,WAAA,QAEIE,SAAYD,SAAID,YACpBG,QAAAF,SAAA,WACMG,KAAAA,SAAWH,QAEXI,OAAOJ,SAASK,eAAtB,UACAC,SAAAC,SAAAF,eAAA,YACMG,KAASD,SAASF,eAAe,QACjCC,OAAWC,SAASF,eAAe,UACnCI,MAAOF,SAASF,eAAe,SAC/BK,OAASH,SAASF,eAAe,UAEjCM,QAASJ,SAASF,UACxBO,SAAAC,eAEAD,IAAAA,MAAQC,YAGJC,SAAW,GAAIC,QAAO,qBADtBC,OAAKC,YACLH,cAAeC,KACfG,gBAAS,EACTC,WACAC,OAAAA,EACAC,SAAW,GACPC,MAAAA,IACAC,SAAU,EACVC,cAHO,GAKPC,OAAAA,SAAAA,GAGA,IAAIC,GAZmCA,GAAAnB,SAAAF,eAAA,UAAAsB,qBAAA,KAWnCC,EAAArB,SAASsB,uBAAO,aAChBH,EAAAA,EAAAA,EAASnB,EAAAA,OAASF,IAClBuB,GAAAA,EAAOrB,aACPmB,EAAJI,GAAYA,MAAEJ,QAAOK,QACdD,KAAGD,EAAOG,GAAAA,MACTN,YAAUO,EAAMC,GAAAA,aAAhB,eACAlB,QAAOY,IAAKE,KAAGK,cAEfC,EAAAA,GAAQC,MAARH,QAAiBjB,QAIxBqB,mBAAA,SAAAT,GAAAO,QAAAC,IAAAR,EAAAG,YAEgCI,KAAAA,GAzBMV,GAAAnB,SAAAF,eAAA,UAAAsB,qBAAA,KAyB3CW,EAAAA,SAAmBC,uBAAA,aAA0BF,EAAAA,EAAIR,EAAAA,EAAOG,OAAAA,IAChDN,GAAAA,EAASnB,aACTqB,EAAOrB,GAAAA,MAASgC,QAAAA,QAChBvB,KAAJY,EAAcF,GAAAA,MACPI,YAAUE,EAAAA,GAAAA,aAAY,eACrBN,QAAAW,IAAUJ,KAAMC,cAEhBjB,EAAAA,GAAAA,MAAcW,QAAQY,SAMjC,KAAAC,SAAAC,kBAtCLlC,OAAA2B,MAAAM,SAAAC,iBA2CIlC,OAAOmC,SAAW,QADlBnC,OAAO2B,MAAQM,GAKfnC,SAAAsC,iBAAA,QAAA,WACHzC,SAAA0C,MAAArC,OAAA2B,QAIWlC,UAAU6C,SAFbF,EAAAA,MACDzC,KAAA,OACIF,IAAAA,wBACE8C,SAAK,OACHC,MACAC,UAFGzC,OAAA2B,OAIHe,MAAM,WACFC,MAAA,SAEJC,QAAO,SAAAF,GACHC,QAAME,YAAN,WARDpD,UAAAqD,oBAgBd5C,OAAAkC,iBAAA,QAAA,WAnBLzC,SAAAoD,OAwBgBV,MAAOrC,OAAO2B,MAFvBS,KAAAA,KAAiBT,SAERU,EAAAA,MACMpC,KAAK0B,OACXc,IAAA,2BACGO,SAAA,OACHR,MACKS,kBAAAjD,OAFF2B,MAGHqB,MAHG/C,KAAA0B,MAIGuB,OAAAC,EAAA,WAAAC,MACFC,OAAAF,EAAA,WAA6BxB,MAC7B2B,OAAe3B,EAAAA,WAFbyB,MAGFG,IAAaJ,EAAA,QAAFC,MACX5C,KAAaA,KACbC,YAAaA,aAEbmC,MAAA,WACAD,MAAA,SAEJC,QAAO,SAAAF,GACH,WAAMA,EAANc,KAfD,GAAAd,EAAAe,OAiBMC,SAAAC,KAAA,uCAAgBjB,EAAAkB,IAEdlB,SAAAiB,KACCD,yBAAchB,EAAAkB,IAAA,cAAA5D,OAAA2B,MAAuCe,WAErDgB,EAAAA,WAAAN,MACY,cAAXV,EAAKc,KACVE,SAAAC,KAAgB,8BAA8BjB,EAAKkB,IAAI,WAAvCT,EAAkDA,WAAAC,MAxB9ET,MAAAD,EAAAmB","file":"createMember.min.js","sourcesContent":["/**\n * Created by administrator on 2016/12/8.\n */\n\n// 引入动画模版 处理验证码\nconst AnimationCountdown = _require('art-countdown');\nlet countdown = new AnimationCountdown('sendCode', '重新获取');\n// 引入http message\nconst validate = _require('validate');\nconst message = _require('message');\nconst http = _require('http');\n// 定义变量\nconst mobile = document.getElementById('mobile');\nconst sendCode = document.getElementById('sendCode');\nconst code = document.getElementById('code');\nconst submit = document.getElementById('submit');\nconst layer = document.getElementById('layer');\nconst cancel = document.getElementById('cancel');\n// 引入浏览器特性处理\nconst browser = _require('browser');\nbrowser.elastic_touch();\n\nvar mcid,isDeposited;\nvar mySwiper = new Swiper('.swiper-container', {\n    effect : 'coverflow',\n    slidesPerView: 1.35,\n    centeredSlides: true,\n    coverflow: {\n        rotate: 0,\n        stretch: -50,\n        depth: 200,\n        modifier: 1,\n        slideShadows : false\n    },\n    onInit: function(swiper){\n        var prompt = document.getElementById('prompt').getElementsByTagName('p');\n        var swip = document.getElementsByClassName('swiperInp');\n        for(var i=0;i<prompt.length;i++){\n            if(i==swiper.activeIndex){\n                prompt[i].style.display='block';\n                mcid = swip[i].value;\n                isDeposited = swip[i].getAttribute('isDeposited');\n                console.log(mcid,isDeposited)\n            }else {\n                prompt[i].style.display='none'\n            }\n        }\n    },\n    onSlideChangeStart:function(swiper){ console.log(swiper.activeIndex);\n        var prompt = document.getElementById('prompt').getElementsByTagName('p');\n        var swip = document.getElementsByClassName('swiperInp');\n        for(var i=0;i<prompt.length;i++){\n            if(i==swiper.activeIndex){\n                prompt[i].style.display='block';\n                mcid = swip[i].value;\n                isDeposited = swip[i].getAttribute('isDeposited');\n                console.log(mcid,isDeposited)\n            }else {\n                prompt[i].style.display='none'\n            }\n        }\n    }\n})\n\nif(pageData.consumeCellphone!=''){\n    mobile.value = pageData.consumeCellphone;\n    mobile.readOnly = 'true'\n}else {\n    mobile.value = '';\n    // mobile.removeAttribute('readOnly')\n    // mobile.readOnly = 'false'\n}\n\nsendCode.addEventListener('click', function () {\n    if (validate.phone(mobile.value)) {\n        if (countdown.check()) {\n            $.ajax({\n                type: \"post\",\n                url: \"/membership/sendVcode\",\n                dataType: \"json\",\n                data: {\n                    \"cellphone\"          :   mobile.value\n                },\n                error: function () {\n                    alert(\"请求失败\")\n                },\n                success: function (data) {\n                    message.prompt_show('验证码发送成功');\n                    countdown.submit_start();\n                }\n            });\n        }\n    }\n});\n\nsubmit.addEventListener('click', ()=> {\n        if (validate.joint({\n                phone: mobile.value,\n                code: code.value\n            })) {\n            $.ajax({\n                type: \"post\",\n                url: \"/membership/createMember\",\n                dataType: \"json\",\n                data: {\n                    \"consumerCellphone\" : mobile.value,\n                    \"vcode\" : code.value,\n                    \"openID\" : $(\"#openID\").val(),\n                    \"userID\" : $(\"#userID\").val(),\n                    \"source\" : $(\"#source\").val(),\n                    \"cid\" : $(\"#cid\").val(),\n                    \"mcid\" : mcid,\n                    \"isDeposited\" : isDeposited\n                },\n                error: function () {\n                    alert(\"请求失败\")\n                },\n                success: function (data) {\n                    if(data.flag==\"success\") {\n                        if(data.status==1)\n                            location.href=\"/membership/createMemberSuccess?mid=\"+data.mid;\n                        else\n                            location.href=\"/sqb/needRecharge?mid=\"+data.mid+\"&cellphone=\"+mobile.value+\"&source=\"+$(\"#source\").val();\n                    }else if(data.flag==\"memberInfo\"){\n                        location.href = \"/membership/memberInfo?mid=\"+data.mid+\"&source=\"+$(\"#source\").val();\n                    }\n                    else\n                        alert(data.result);\n                }\n            });\n        }\n});"]}