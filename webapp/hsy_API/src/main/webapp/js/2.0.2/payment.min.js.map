{"version":3,"sources":["payment.js"],"names":["getValue","boxInput","getBoxInputValue","maskPay","val","setValue","message","_require","Keyboard","spanId","inputId","keyboardId","getElementById","close","document","choose","mask","memberPay","closePay","container","maxLength","realInput","bogusInput","bogusInputArr","fun","callback","that","this","children","getAttribute","oninput","onpropertychange","value","replace","log","console","i","real_str","length","realValue","init","display","addEventListener","style","opacity","focus","getElementsByClassName"],"mappings":"YAoEA,SAAAA,YACAC,SAAAC,kBACAD,UAASD,WACLG,QAAIC,MAAMH,QAASC,EACnBD,QAAAA,MAASI,QAAT,OArEJ,GAAMC,SAAUC,SAAS,WACnBC,SAAWD,SAAS,WAD1B,IAAMD,WACNG,OAAMD,WACNE,QAAIF,YACFC,WAAQ,YAERE,IAAAA,QAAAA,SAAYC,eAAA,UAHdC,MAAAC,SAAAF,eAAA,SAKIG,KAAAA,SAASD,eAASF,cAClBC,QAAQC,SAASF,eAAe,cAChCI,IAAAA,SAAOF,eAAA,aACPX,UAAUW,SAASF,eAAe,aAClCR,KAAMU,SAASF,eAAe,QAC9BK,SAAAA,SAAYH,eAAA,YAEZI,UAAWJ,SAASF,eAAe,qBAG/BX,UADAkB,UAAYL,GACZb,UAAW,GACXmB,WADW,GAEXC,cAFW,GAGXC,SAAW,GACXC,KAAAA,SAJWC,GAKXC,GALWC,GAAAC,IAMNA,MAAAF,SAAAD,EACGE,EAAAA,UAAJP,UAAAS,SAAA,GACAF,EAAKD,WAALN,UAAAS,SAAA,GACAF,EAAKL,cAAYF,EAAUS,WAA3BA,SACAF,EAAKJ,UAAaH,EAAAA,cAAlB,GAAAU,aAAA,aACAH,EAAKH,UAALO,QAA0BR,WACrBF,EAAAA,YAEDM,EAAKrB,UAAL0B,iBAAA,WADJL,EAAArB,aAKCA,SAFD,WAhBOsB,KAAAN,UAAAW,MAAAL,KAAAN,UAAAW,MAAAC,QAAA,MAAA,IAoBX5B,QAAS6B,IAAAP,KAAAN,UAAUW,MAAAC,QAAA,MAAA,IAEfE,KAAQD,GADHb,GAAUW,KAAQX,UAAKA,MAChBe,EAAA,EAAKf,EAAAA,KAAUW,UAAcI,IACrCC,KAAAA,cAAgBhB,GAAUW,MAA9BK,EAAAD,GAAAC,EAAAD,GAAA,EAEIC,GAAKd,QAAiBS,KAAtBZ,YACHO,KAAAN,UAAAW,MAAA,GACEK,KAASC,aAGXpC,iBAAA,WA9BM,GAAAqC,GAAA,EAgCXrC,KAAAA,GAAAA,KAAiByB,MAAAJ,cAAA,CACTgB,IAAAA,KAAYhB,cAAhBa,GAAAJ,MACA,KAEQO,IAAAZ,KAAAJ,cAAAa,GAAAJ,MAEJO,MAAAA,IAtCGtC,UAAfuC,KAAA,WA6CAxC,aASAG,OAAAA,iBAAcsC,QAAU,WAC3BrC,IAAA4B,MAAA,GACMU,KAAAA,MAAAA,QAAiB,EACjBtC,KAAI4B,MAAJS,QAAc,SAEbzB,QAAK2B,YAAL,gBAGH9B,MAAA6B,iBAAA,QAAA,WANL1B,KAAA2B,MAAAC,QAAA,EAQA/B,KAAM6B,MAAAA,QAAiB,SAEnB1B,UAAK2B,iBAAgB,QAArB,WAFJvC,IAAA4B,MAAA,GAIAf,KAAUyB,MAAAA,QAAiB,EACpBtC,KAAI4B,MAAJS,QAAc,OACbzB,QAAK2B,MAAMC,QAAX,EACA5B,QAAK2B,MAAMF,QAAU,QACrBtC,SAAQwC,uBAAR,aAAA,GAAAE,SAEA/B,QAAAA,YAASgC,gBAGZ5B,SAAAwB,iBAAA,QAAA,WATLvC,QAAAwC,MAAAC,QAAA,EAWA1B,QAASwB,MAAAA,QAAiB","file":"payment.min.js","sourcesContent":["/**\r\n * Created by administrator on 2016/12/8.\r\n */\r\nconst message = _require('message');\r\nconst Keyboard = _require('keyboard');\r\nnew Keyboard({\r\n  spanId: 'key-span',\r\n  inputId: 'key-input',\r\n  keyboardId: 'keyboard'\r\n});\r\nlet choose = document.getElementById('choose');\r\nlet close = document.getElementById('close');\r\nlet mask = document.getElementById('iosDialog1');\r\nlet maskPay = document.getElementById('iosDialog2');\r\nlet val = document.getElementById('key-input');\r\nlet memberPay = document.getElementById('memberPay');\r\nlet wrap = document.getElementById('wrap');\r\nlet closePay = document.getElementById('closePay');\r\n\r\n    var container = document.getElementById(\"inputBoxContainer\");\r\n    var boxInput = {\r\n        maxLength:\"\",\r\n        realInput:\"\",\r\n        bogusInput:\"\",\r\n        bogusInputArr:\"\",\r\n        callback:\"\",\r\n        init:function(fun){\r\n            var that = this;\r\n            this.callback = fun;\r\n            that.realInput = container.children[0];\r\n            that.bogusInput = container.children[1];\r\n            that.bogusInputArr = that.bogusInput.children;\r\n            that.maxLength = that.bogusInputArr[0].getAttribute(\"maxlength\");\r\n            that.realInput.oninput = function(){\r\n                that.setValue();\r\n            }\r\n            that.realInput.onpropertychange = function(){\r\n                that.setValue();\r\n            }\r\n        },\r\n        setValue:function(){\r\n            this.realInput.value = this.realInput.value.replace(/\\D/g,\"\");\r\n            console.log(this.realInput.value.replace(/\\D/g,\"\"))\r\n            var real_str = this.realInput.value;\r\n            for(var i = 0 ; i < this.maxLength ; i++){\r\n                this.bogusInputArr[i].value = real_str[i]?real_str[i]:\"\";\r\n            }\r\n            if(real_str.length >= this.maxLength){\r\n                this.realInput.value = '';\r\n                this.callback();\r\n            }\r\n        },\r\n        getBoxInputValue:function(){\r\n            var realValue = \"\";\r\n            for(var i in this.bogusInputArr){\r\n                if(!this.bogusInputArr[i].value){\r\n                    break;\r\n                }\r\n                realValue += this.bogusInputArr[i].value;\r\n            }\r\n            return realValue;\r\n        }\r\n    }\r\n\r\nboxInput.init(function(){\r\n    getValue();\r\n});\r\n// document.getElementById(\"confirmButton\").onclick = function(){\r\n//     getValue();\r\n// }\r\nfunction getValue(){\r\n    var val = boxInput.getBoxInputValue();\r\n    boxInput.setValue();\r\n    maskPay.style.opacity = 0;\r\n    maskPay.style.display = 'none';\r\n}\r\nchoose.addEventListener('click',function () {\r\n    if(val.value > 0){\r\n        mask.style.opacity = 1;\r\n        mask.style.display = 'block';\r\n    }else {\r\n        message.prompt_show('请输入正确的支付金额');\r\n    }\r\n});\r\nclose.addEventListener('click',function () {\r\n    mask.style.opacity = 0;\r\n    mask.style.display = 'none';\r\n});\r\nmemberPay.addEventListener('click',function () {\r\n    if(val.value > 0){\r\n        mask.style.opacity = 0;\r\n        mask.style.display = 'none';\r\n        maskPay.style.opacity = 1;\r\n        maskPay.style.display = 'block';\r\n        document.getElementsByClassName('realInput')[0].focus();\r\n    }else {\r\n        message.prompt_show('请输入正确的支付金额');\r\n    }\r\n});\r\nclosePay.addEventListener('click',function () {\r\n    maskPay.style.opacity = 0;\r\n    maskPay.style.display = 'none';\r\n});"]}