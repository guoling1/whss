"use strict";var AnimationCountdown=_require("art-countdown"),countdown=new AnimationCountdown("sendCode","重新获取"),validate=_require("validate"),message=_require("message"),http=_require("http"),mobile=document.getElementById("mobile"),sendCode=document.getElementById("sendCode"),code=document.getElementById("code"),submit=document.getElementById("submit"),layer=document.getElementById("layer"),cancel=document.getElementById("cancel"),browser=_require("browser");browser.elastic_touch();var mcid,isDeposited,mySwiper=new Swiper(".swiper-container",{effect:"coverflow",slidesPerView:1.35,centeredSlides:!0,coverflow:{rotate:0,stretch:-50,depth:200,modifier:1,slideShadows:!1},onInit:function(e){for(var t=document.getElementById("prompt").getElementsByTagName("p"),o=document.getElementsByClassName("swiperInp"),n=0;n<t.length;n++)n==e.activeIndex?(t[n].style.display="block",mcid=o[n].value,isDeposited=o[n].getAttribute("isDeposited"),console.log(mcid,isDeposited)):t[n].style.display="none"},onSlideChangeStart:function(e){console.log(e.activeIndex);for(var t=document.getElementById("prompt").getElementsByTagName("p"),o=document.getElementsByClassName("swiperInp"),n=0;n<t.length;n++)n==e.activeIndex?(t[n].style.display="block",mcid=o[n].value,isDeposited=o[n].getAttribute("isDeposited"),console.log(mcid,isDeposited)):t[n].style.display="none"}});""!=pageData.consumeCellphone||null!=pageData.consumeCellphone?(mobile.value=pageData.consumeCellphone,mobile.readonly="true"):(mobile.value="",mobile.readonly="false"),sendCode.addEventListener("click",function(){validate.phone(mobile.value)&&countdown.check()&&$.ajax({type:"post",url:"/membership/sendVcode",dataType:"json",data:{cellphone:mobile.value},error:function(){alert("请求失败")},success:function(e){message.prompt_show("验证码发送成功"),countdown.submit_start()}})}),submit.addEventListener("click",function(){validate.joint({phone:mobile.value,code:code.value})&&$.ajax({type:"post",url:"/membership/createMember",dataType:"json",data:{consumerCellphone:mobile.value,vcode:code.value,openID:$("#openID").val(),userID:$("#userID").val(),source:$("#source").val(),cid:$("#cid").val(),mcid:mcid,isDeposited:isDeposited},error:function(){alert("请求失败")},success:function(e){"success"==e.flag?1==e.status?location.href="/membership/createMemberSuccess?mid="+e.mid:location.href="/sqb/needRecharge?mid="+e.mid+"&cellphone="+mobile.value+"&source="+$("#source").val():alert(e.result)}})});
//# sourceMappingURL=createMember.min.js.map
