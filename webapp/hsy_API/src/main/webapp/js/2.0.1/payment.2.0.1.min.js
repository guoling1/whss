"use strict";function _require(t){var e=_require.resolve(t),n=_require.modules[e];if(!n)throw new Error('failed to require "'+t+'"');return n.exports||(n.exports={},n.call(n.exports,n,n.exports,_require.relative(e),global)),n.exports}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var global={__allow:!0,__lockUrl:[],__lockCheck:function(t){for(var e=!0,n=0;n<this.__lockUrl.length;n++)t==this.__lockUrl[n]&&(e=!1);return e},__lockNum:function(t){for(var e=-1,n=0;n<this.__lockUrl.length;n++)t.indexOf(this.__lockUrl[n])>1&&(e=n);return e},__lockRemove:function(t){if(isNaN(t)||t>this.__lockUrl.length)return!1;for(var e=0,n=0;e<this.__lockUrl.length;e++)this.__lockUrl[e]!=this.__lockUrl[t]&&(this.__lockUrl[n++]=this.__lockUrl[e]);this.__lockUrl.length-=1}};_require.modules={},_require.resolve=function(t){var e=t,n=t+".js",o=t+"/index.js";return _require.modules[n]&&n||_require.modules[o]&&o||e},_require.register=function(t,e){_require.modules[t]=e},_require.relative=function(t){return function(e){if("."!=e.charAt(0))return _require(e);var n=t.split("/"),o=e.split("/");n.pop();for(var r=0;r<o.length;r++){var i=o[r];".."==i?n.pop():"."!=i&&n.push(i)}return _require(n.join("/"))}};var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();_require.register("message",function(t,e,n,o){var r=function(){function t(){_classCallCheck(this,t),o.__allow=!0;var e=document.body;this.prompt=document.createElement("div"),this.prompt.id="prompt",this.prompt.style.display="none",this.prompt.style.width="auto",this.prompt.style.minWidth="200px",this.prompt.style.height="auto",this.prompt.style.fontSize="16px",this.prompt.style.color="#FFF",this.prompt.style.position="fixed",this.prompt.style.top="40%",this.prompt.style.left="50%",this.prompt.style.zIndex="19999",this.prompt.style.transform="translate3d(-50%,-50%,0)",this.prompt.style.padding="5px 10px",this.prompt.style.backgroundColor="#373737",this.prompt.style.borderRadius="5px",this.prompt.style.whiteSpace="normal",e.appendChild(this.prompt),this.load=document.createElement("div"),this.load.id="loadingToast",this.load.style.opacity="0",this.load.style.display="none";var n=document.createElement("div");n.className="weui-mask_transparent";var r=document.createElement("div");r.className="weui-toast";var i=document.createElement("i");i.className="weui-loading weui-icon_toast",this.load_p=document.createElement("p"),this.load_p.className="weui-toast__content",this.load_p.innerHTML="正在加载",r.appendChild(i),r.appendChild(this.load_p),this.load.appendChild(n),this.load.appendChild(r),e.appendChild(this.load),this.toast=document.createElement("div"),this.toast.id="toast",this.toast.style.opacity="0",this.toast.style.display="none";var a=document.createElement("div");a.className="weui-mask_transparent";var s=document.createElement("div");s.className="weui-toast";var c=document.createElement("i");c.className="weui-icon-success-no-circle weui-icon_toast",this.toast_p=document.createElement("p"),this.toast_p.className="weui-toast__content",this.toast_p.innerHTML="已完成",s.appendChild(c),s.appendChild(this.toast_p),this.toast.appendChild(a),this.toast.appendChild(s),e.appendChild(this.toast),this.timer="",console.log("message 构造成功...")}return _createClass(t,[{key:"prompt_show",value:function(t){var e=this;clearTimeout(this.timer),this.prompt.innerHTML=t,this.prompt.style.display="block",this.timer=setTimeout(function(){e.prompt.style.display="none"},1e3)}},{key:"load_show",value:function(t){this.load_p.innerHTML=t||"正在加载",this.load.style.opacity="1",this.load.style.display="block"}},{key:"load_hide",value:function(){this.load.style.opacity="0",this.load.style.display="none"}},{key:"toast_show",value:function(t){this.toast_p.innerHTML=t||"已完成",this.toast.style.opacity="1",this.toast.style.display="block"}}]),t}();t.exports=new r});var _createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}();_require.register("http",function(module,exports,_require,global){var message=_require("message"),Http=function(){function Http(){_classCallCheck(this,Http),this.onchange=function(xmlhttp,fun){xmlhttp.onreadystatechange=function(){if(4==this.readyState)if(global.__lockRemove(global.__lockNum(this.responseURL)),200==this.status)try{var response=eval("("+this.responseText+")");if(-2==response.code)return void(window.location.href="/sqb/reg");if(1!=response.code)return message.load_hide(),void message.prompt_show(response.msg||"抱歉!服务器异常");fun(response.result)}catch(t){fun(this.responseText)}else 504==this.status?(message.load_hide(),message.prompt_show("请求超时!")):(message.load_hide(),message.prompt_show("抱歉!服务器异常"))}},this.creathttp=function(){return window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},this.objTOstr=function(t){var e="";for(var n in t)e+=n+"="+t[n]+"&";return e=e.substr(0,e.length-1)}}return _createClass(Http,[{key:"get",value:function(t,e){if(global.__lockCheck(t)){global.__lockUrl.push(t);var n=this.creathttp();this.onchange(n,e),n.open("get",t,!0),n.send()}}},{key:"post",value:function(t,e,n){if(global.__lockCheck(t)){global.__lockUrl.push(t);var o=this.creathttp();this.onchange(o,n),o.open("post",t,!0),o.setRequestHeader("Content-type","application/json"),o.send(JSON.stringify(e))}}},{key:"post_form",value:function(t,e,n){if(global.__lockCheck(t)){global.__lockUrl.push(t),e=this.objTOstr(e);var o=this.creathttp();this.onchange(o,n),o.open("post",t,!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.send(e)}}},{key:"syncGet",value:function(t){var e=this.creathttp();return e.open("get",t,!1),e.send(),e.responseText}},{key:"syncPost",value:function(t,e){var n=this.creathttp();return n.open("post",t,!1),n.setRequestHeader("Content-type","application/json"),n.send(JSON.stringify(e)),n.responseText}},{key:"syncPost_form",value:function(t,e){e=this.objTOstr(e);var n=this.creathttp();return n.open("post",t,!1),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send(e),n.responseText}},{key:"formatData",value:function(t){var e="";for(var n in t)e+=n+"="+t[n]+"&";return e.substring(0,e.length-1)}}]),Http}();module.exports=new Http}),_require.register("fastclick",function(t,e,n,o){function r(t,e){var n;if(e=e||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=e.touchBoundary||10,this.layer=t,this.tapDelay=e.tapDelay||200,this.tapTimeout=e.tapTimeout||700,!r.notNeeded(t)){for(var o=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],i=this,s=0,c=o.length;s<c;s++)i[o[s]]=function(t,e){return function(){return t.apply(e,arguments)}}(i[o[s]],i);a&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,n,o){var r=Node.prototype.removeEventListener;"click"===e?r.call(t,e,n.hijacked||n,o):r.call(t,e,n,o)},t.addEventListener=function(e,n,o){var r=Node.prototype.addEventListener;"click"===e?r.call(t,e,n.hijacked||(n.hijacked=function(t){t.propagationStopped||n(t)}),o):r.call(t,e,n,o)}),"function"==typeof t.onclick&&(n=t.onclick,t.addEventListener("click",function(t){n(t)},!1),t.onclick=null)}}var i=navigator.userAgent.indexOf("Windows Phone")>=0,a=navigator.userAgent.indexOf("Android")>0&&!i,s=/iP(ad|hone|od)/.test(navigator.userAgent)&&!i,c=s&&/OS 4_\d(_\d)?/.test(navigator.userAgent),l=s&&/OS [6-7]_\d/.test(navigator.userAgent),u=navigator.userAgent.indexOf("BB10")>0;r.prototype.needsClick=function(t){switch(t.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(t.disabled)return!0;break;case"input":if(s&&"file"===t.type||t.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(t.className)},r.prototype.needsFocus=function(t){switch(t.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!a;case"input":switch(t.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!t.disabled&&!t.readOnly;default:return/\bneedsfocus\b/.test(t.className)}},r.prototype.sendClick=function(t,e){var n,o;document.activeElement&&document.activeElement!==t&&document.activeElement.blur(),o=e.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(t),!0,!0,window,1,o.screenX,o.screenY,o.clientX,o.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,t.dispatchEvent(n)},r.prototype.determineEventType=function(t){return a&&"select"===t.tagName.toLowerCase()?"mousedown":"click"},r.prototype.focus=function(t){var e;s&&t.setSelectionRange&&0!==t.type.indexOf("date")&&"time"!==t.type&&"month"!==t.type?(e=t.value.length,t.setSelectionRange(e,e)):t.focus()},r.prototype.updateScrollParent=function(t){var e,n;if(!(e=t.fastClickScrollParent)||!e.contains(t)){n=t;do{if(n.scrollHeight>n.offsetHeight){e=n,t.fastClickScrollParent=n;break}n=n.parentElement}while(n)}e&&(e.fastClickLastScrollTop=e.scrollTop)},r.prototype.getTargetElementFromEventTarget=function(t){return t.nodeType===Node.TEXT_NODE?t.parentNode:t},r.prototype.onTouchStart=function(t){var e,n,o;if(t.targetTouches.length>1)return!0;if(e=this.getTargetElementFromEventTarget(t.target),n=t.targetTouches[0],s){if(o=window.getSelection(),o.rangeCount&&!o.isCollapsed)return!0;if(!c){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return t.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(e)}}return this.trackingClick=!0,this.trackingClickStart=t.timeStamp,this.targetElement=e,this.touchStartX=n.pageX,this.touchStartY=n.pageY,t.timeStamp-this.lastClickTime<this.tapDelay&&t.preventDefault(),!0},r.prototype.touchHasMoved=function(t){var e=t.changedTouches[0],n=this.touchBoundary;return Math.abs(e.pageX-this.touchStartX)>n||Math.abs(e.pageY-this.touchStartY)>n},r.prototype.onTouchMove=function(t){return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(t.target)||this.touchHasMoved(t))&&(this.trackingClick=!1,this.targetElement=null),!0)},r.prototype.findControl=function(t){return void 0!==t.control?t.control:t.htmlFor?document.getElementById(t.htmlFor):t.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},r.prototype.onTouchEnd=function(t){var e,n,o,r,i,u=this.targetElement;if(!this.trackingClick)return!0;if(t.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(t.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=t.timeStamp,n=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,l&&(i=t.changedTouches[0],u=document.elementFromPoint(i.pageX-window.pageXOffset,i.pageY-window.pageYOffset)||u,u.fastClickScrollParent=this.targetElement.fastClickScrollParent),"label"===(o=u.tagName.toLowerCase())){if(e=this.findControl(u)){if(this.focus(u),a)return!1;u=e}}else if(this.needsFocus(u))return t.timeStamp-n>100||s&&window.top!==window&&"input"===o?(this.targetElement=null,!1):(this.focus(u),this.sendClick(u,t),s&&"select"===o||(this.targetElement=null,t.preventDefault()),!1);return!(!s||c||!(r=u.fastClickScrollParent)||r.fastClickLastScrollTop===r.scrollTop)||(this.needsClick(u)||(t.preventDefault(),this.sendClick(u,t)),!1)},r.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},r.prototype.onMouse=function(t){return!this.targetElement||(!!t.forwardedTouchEvent||(!t.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(t.stopImmediatePropagation?t.stopImmediatePropagation():t.propagationStopped=!0,t.stopPropagation(),t.preventDefault(),!1))))},r.prototype.onClick=function(t){var e;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===t.target.type&&0===t.detail||(e=this.onMouse(t),e||(this.targetElement=null),e)},r.prototype.destroy=function(){var t=this.layer;a&&(t.removeEventListener("mouseover",this.onMouse,!0),t.removeEventListener("mousedown",this.onMouse,!0),t.removeEventListener("mouseup",this.onMouse,!0)),t.removeEventListener("click",this.onClick,!0),t.removeEventListener("touchstart",this.onTouchStart,!1),t.removeEventListener("touchmove",this.onTouchMove,!1),t.removeEventListener("touchend",this.onTouchEnd,!1),t.removeEventListener("touchcancel",this.onTouchCancel,!1)},r.notNeeded=function(t){var e,n,o;if(void 0===window.ontouchstart)return!0;if(n=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!a)return!0;if(e=document.querySelector("meta[name=viewport]")){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(n>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(u&&(o=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),o[1]>=10&&o[2]>=3&&(e=document.querySelector("meta[name=viewport]")))){if(-1!==e.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===t.style.msTouchAction||"manipulation"===t.style.touchAction||(!!(+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]>=27&&(e=document.querySelector("meta[name=viewport]"))&&(-1!==e.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))||("none"===t.style.touchAction||"manipulation"===t.style.touchAction))},r.attach=function(t,e){return new r(t,e)},t.exports=r}),_require.register("keyboard",function(t,e,n,o){var r=n("message"),i=n("http");n("fastclick").attach(document.body);var a=function t(e){var n=this;_classCallCheck(this,t),this.value="",this.span=document.getElementById(e.spanId),this.input=document.getElementById(e.inputId),this.keyboard=document.getElementById(e.keyboardId);var o=function(t,e){for(var n=t.getAttribute(e);!n&&"keyboard"!=t.id;)t=t.parentNode,n=t.getAttribute(e);return n},a=function(t,e){var n="";if(""===t&&(t="0"),-1!=t.indexOf(".")){if(t.length-t.indexOf(".")>2)return t;if("."===e)return t}return n="0"===t&&"."!==e?e:t+e,n>=2e4&&(n=2e4,r.prompt_show("收款金额不能超过20000")),n},s=function(t){var e=t.target;"true"==e.getAttribute("touch")&&(e.style.backgroundColor="#f4f5f8")},c=function(t){var e=t.target;"true"==e.getAttribute("touch")&&(e.style.backgroundColor="#FFF");var s=n.input.value,c=o(e,"keyNum");if(c){var l=a(s,c);return n.input.value=l,void(n.span.innerHTML=l)}var u=function(t){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:t.appId,timeStamp:t.timeStamp,nonceStr:t.nonceStr,package:t.package,signType:t.signType,paySign:t.paySign},function(e){"get_brand_wcpay_request:cancel"==e.err_msg?window.location.href="${pageContext.request.contextPath}/v1/app/qr/showPayResult/"+t.orderNo+"?status=cancel":"get_brand_wcpay_request:ok"==e.err_msg?window.location.href="${pageContext.request.contextPath}/v1/app/qr/showPayResult/"+t.orderNo:alert(e.err_code+e.err_desc+e.err_msg)})},p=function(t){AlipayJSBridge.call("tradePay",{tradeNO:2.0170425210010046e27},function(t){alert(JSON.stringify(t))})},h=o(e,"keyCtrl");if(h)switch(h){case"delete":var d=s.substr(0,s.length-1);n.input.value=d,n.span.innerHTML=d;break;case"wx-pay":s>0?(r.load_show("正在支付"),i.post("/trade/scReceipt",{totalFee:s,payChannel:"801",memberId:pageData.memberId,merchantId:pageData.merchantId},function(t){i.post(t.payUrl,{},function(t){r.load_hide(),u(t)})})):r.prompt_show("请输入正确的支付金额");break;case"ali-pay":s>0?(r.load_show("正在支付"),i.post("/trade/scReceipt",{totalFee:s,payChannel:"802",memberId:pageData.memberId,merchantId:pageData.merchantId},function(t){i.post(t.payUrl,{},function(t){r.load_hide(),p()})})):r.prompt_show("请输入正确的支付金额")}};this.keyboard.addEventListener("touchstart",s),this.keyboard.addEventListener("touchend",c)};t.exports=a});var Keyboard=_require("keyboard");new Keyboard({spanId:"key-span",inputId:"key-input",keyboardId:"keyboard"});
//# sourceMappingURL=payment.2.0.1.min.js.map
