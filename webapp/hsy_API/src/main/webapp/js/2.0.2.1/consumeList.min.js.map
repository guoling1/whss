{"version":3,"sources":["consumeList.js"],"names":["message","_require","tools","weuiCells","document","getElementById","query","GetUrlArg","record","nowPage","more","empty","className","innerHTML","style","display","textAlign","height","lineHeight","fontSize","color","location","pathname","backgroundColor","pathName","window","getData","e","page","type","ajax","mid","url","dataType","alert","data","list","length","success","i","createElement","div_list","div_list_left","shopname","left_title","left_date","appendChild","div_list_right","span","amount","span1"],"mappings":"YAAA,IAAMA,SAAUC,SAAS,WACnBC,MAAQD,SAAS,SAAjBC,MAAQD,MAAAA,YACdE,UAAAC,SAAAC,eAAA,cACIC,OAAQJ,SAAMK,eAAlB,UACIJ,QAAAA,EACAK,KAAAA,SAASJ,cAASC,OAClBI,MAAAA,SAAJJ,eAAA,QACAK,MAAIA,UAAON,aACXM,KAAIC,UAAQP,OACZM,KAAKE,MAAAA,QAAY,OACjBF,KAAKG,MAAAA,UAAL,SACAH,KAAKI,MAAMC,OAAX,OACAL,KAAKI,MAAME,WAAY,OACvBN,KAAKI,MAAMG,SAAS,OACpBP,KAAKI,MAAMI,MAAAA,OACXR,KAAKI,MAAMK,gBAAX,SACAT,IAAAA,UAAWU,OAAQC,SAAnBC,QACAZ,MAAKI,iBAAMS,aAAkB,WACzBC,KAAAA,MAAWC,gBAAgBH,YAE3BZ,KAAAA,iBAAWa,WAAkB,WADjCb,KAAAI,MAAAS,gBAAA,YAIIb,KAAAA,iBAAWa,QAAX,WADJG,QAAA,KAAAjB,QAAA,KAIIiB,OAAAA,YAAcjB,KACjB,IAFDiB,SAAA,SAAAC,EAAAC,GAIIF,QAAUE,GAAA,EACV,GAAAnB,UACAA,UAAUmB,UAAV,IAEIzB,EAAAA,MACH0B,KAAA,MACCC,IAAK,qCAAAxB,MAAAyB,IAAA,gBAAAtB,QACHoB,SAAM,OACNG,MAAK,WACLC,MAAU,SAENC,QAAAA,SAAAC,GALD,GAAA,GAAAA,EAAAC,KAAAC,OAOHC,MAASxB,MAAAC,QAAUoB,QACZA,KAAKC,MAAKC,QAAV,WACC1B,CACAD,MAAKI,MAAMC,QAAX,MAFJ,KAGM,GAAAwB,GAAA,EAAAA,EAAAJ,EAAAC,KAAAC,OAAAE,IAAA,CACF5B,GAAMG,GAANV,SAAAoC,cAAA,MACAC,GAAa7B,UAAYwB,WACrB,IAAIK,GAAWrC,SAASoC,cAAT,MACfC,GAAS7B,UAAY,eACrB,IAAI8B,GAAAA,SAAgBtC,cAASoC,IAC7BE,GAAAA,UAAAP,EAA0BC,KAAAG,GAAAI,QAC1B,IAAIC,GAAAA,SAAaxC,cAAA,IACjBwC,GAAAA,UAAA,OACAC,EAAIA,UAAYzC,EAASoC,KAAAA,GAAAA,WACzBK,EAAUjC,YAAYgC,GACtBC,EAAUhC,YAAYsB,EACtBO,IAAAA,GAAcI,SAAYF,cAA1B,MACAF,GAAcI,UAAYD,eAC1B,IAAIE,GAAAA,SAAAA,cAA0BP,OAC9BO,GAAAA,UAAenC,GACf,IAAIoC,GAAO5C,SAASoC,cAAc,OAClCQ,GAAKnC,UAALsB,EAAAC,KAAAG,GAAAU,OACAF,EAAY3C,YAASoC,GACrBU,EAAAJ,YAAgBI,GAChBH,EAAAA,YAAeD,GACfC,EAAAA,YAAeD,GAEfL,UAASK,YAAYC,GAErB5C,EAAAA,KAAU2C,WAAYL,QACzB/B,KAAAI,MAAAC,QAAA,QAEGL,KAAKI,MAAMC,QAAU,WASzCW","file":"consumeList.min.js","sourcesContent":["const message = _require('message');\r\nconst tools = _require('tools');\r\n// 定义ajax事件\r\nlet query = tools.GetUrlArg();\r\nlet weuiCells = document.getElementById('weui-cells');\r\nlet record = document.getElementById('record');\r\nlet nowPage = 1;\r\nlet more = document.createElement('div');\r\nlet empty = document.getElementById('empty');\r\nmore.className = 'touch_more';\r\nmore.innerHTML = '加载更多';\r\nmore.style.display = 'none';\r\nmore.style.textAlign = 'center';\r\nmore.style.height = '50px';\r\nmore.style.lineHeight = '50px';\r\nmore.style.fontSize = '16px';\r\nmore.style.color = '#999';\r\nmore.style.backgroundColor = '#f4f5f8';\r\nlet pathName = window.location.pathname;\r\nmore.addEventListener('touchstart', function () {\r\n    more.style.backgroundColor = '#d8d7dc';\r\n});\r\nmore.addEventListener('touchend', function () {\r\n    more.style.backgroundColor = '#f4f5f8';\r\n});\r\nmore.addEventListener('click', function () {\r\n    getData(null, nowPage + 1);\r\n});\r\nrecord.appendChild(more);\r\nlet getData = function (e, page) {\r\n    // 检查page 如果page为1 清空content数据\r\n    nowPage = page || 1;\r\n    if (nowPage == 1) {\r\n        weuiCells.innerHTML = '';\r\n    }\r\n    $.ajax({\r\n        type: \"get\",\r\n        url: '/membership/consumeListByPage?mid='+query.mid+'&currentPage='+nowPage,\r\n        dataType: \"json\",\r\n        error: function () {\r\n            alert(\"请求失败\")\r\n        },\r\n        success: function (data) {\r\n            if(data.list.length==0){\r\n                empty.style.display='block';\r\n                more.style.display='none';\r\n            }else {\r\n                empty.style.display='none';\r\n                for (let i = 0; i < data.list.length; i++) {\r\n                    let div_list = document.createElement('div');\r\n                    div_list.className = 'weui-cell';\r\n                    let div_list_left = document.createElement('div');\r\n                    div_list_left.className = 'weui-cell__bd';\r\n                    let left_title = document.createElement('p');\r\n                    left_title.innerHTML = data.list[i].shopname;\r\n                    let left_date = document.createElement('p');\r\n                    left_date.className = 'time';\r\n                    left_date.innerHTML = data.list[i].createTime;\r\n                    div_list_left.appendChild(left_title);\r\n                    div_list_left.appendChild(left_date);\r\n                    let div_list_right = document.createElement('div');\r\n                    div_list_right.className = 'weui-cell__ft';\r\n                    let span = document.createElement('span');\r\n                    span.innerHTML=\"￥\";\r\n                    let span1 = document.createElement('span');\r\n                    span1.innerHTML=data.list[i].amount;\r\n                    div_list_right.appendChild(span)\r\n                    div_list_right.appendChild(span1)\r\n                    div_list.appendChild(div_list_left);\r\n                    div_list.appendChild(div_list_right);\r\n                    // weuiCells.insertBefore(div_list, weuiCells.childNodes[0]);\r\n                    weuiCells.appendChild(div_list);\r\n                }\r\n                if (data.page.totalPage != nowPage) {\r\n                    more.style.display = 'block';\r\n                } else {\r\n                    more.style.display = 'none';\r\n                }\r\n            }\r\n\r\n        }\r\n    });\r\n};\r\n// 初始化数据\r\ngetData();"]}