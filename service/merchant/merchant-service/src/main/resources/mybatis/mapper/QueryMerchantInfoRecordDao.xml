<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.jkm.hss.merchant.dao.QueryMerchantInfoRecordDao">

    <select id="getAll" resultType="com.jkm.hss.merchant.entity.MerchantInfoResponse">

        SELECT id,identity_face_pic,identity_opposite_pic,identity_hand_pic
        ,bank_hand_pic,bank_pic,reserve_mobile,merchant_name,address,source
        ,name,identity,bank_no,dealer_id,status,bank_name,first_dealer_id
        ,create_time,mobile,authentication_time,checked_time,second_dealer_id,
        (select d.proxy_name from tb_dealer as d where d.id=first_dealer_id) as proxy_name,
        (select d.proxy_name from tb_dealer as d where d.id=second_dealer_id) as proxy_name1,source

        FROM tb_merchant_info a
        WHERE
				a.id=#{id}
    </select>

    <!--审核记录-->
    <select id="getLog" resultType="com.jkm.hss.merchant.entity.LogResponse">

        SELECT
            descr,
            status,
            create_time
        FROM
            tb_merchant_info_check_record
        WHERE
            merchant_id = #{id}
    </select>

    <select id="getLevel" resultType="com.jkm.hss.merchant.entity.MerchantInfoResponse">
        SELECT proxy_name,first_level_dealer_id FROM tb_dealer WHERE id=#{dealerId}

    </select>

    <select id="getResults" resultType="com.jkm.hss.merchant.entity.MerchantInfoResponse">
        SELECT proxy_name FROM tb_dealer WHERE id=#{dealerId} AND level=#{level}

    </select>

    <select id="getFirstLevel" resultType="com.jkm.hss.merchant.entity.MerchantInfoResponse">
        SELECT proxy_name FROM tb_dealer WHERE id=#{firstLevelDealerId}

    </select>



</mapper>