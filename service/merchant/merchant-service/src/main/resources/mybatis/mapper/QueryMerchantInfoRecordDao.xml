<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.jkm.hss.merchant.dao.QueryMerchantInfoRecordDao">

    <select id="getAll" resultType="com.jkm.hss.merchant.entity.MerchantInfoResponse">

        SELECT a.id,a.identity_face_pic,a.identity_opposite_pic,a.identity_hand_pic
        ,a.bank_hand_pic,a.bank_pic,a.reserve_mobile,a.merchant_name,a.address
        ,a.name,a.identity,a.bank_no,a.dealer_id,a.status
        ,a.create_time,a.mobile,
				(SELECT b.level FROM tb_dealer b WHERE a.dealer_id=b.id) AS level,
				(SELECT b.id AS dealerId FROM tb_dealer b WHERE a.dealer_id=b.id) AS dealerId

        FROM tb_merchant_info a
        WHERE
				a.id=#{id}
    </select>

    <select id="getLevel" resultType="com.jkm.hss.merchant.entity.MerchantInfoResponse">
        SELECT proxy_name,first_level_dealer_id FROM tb_dealer WHERE id=#{dealerId}

    </select>

    <select id="getResults" resultType="com.jkm.hss.merchant.entity.MerchantInfoResponse">
        SELECT proxy_name FROM tb_dealer WHERE id=#{dealerId} AND level=#{level}

    </select>

    <select id="getFirstLevel" resultType="com.jkm.hss.merchant.entity.MerchantInfoResponse">
        SELECT proxy_name FROM tb_dealer WHERE id=#{firstLevelDealerId}

    </select>



</mapper>