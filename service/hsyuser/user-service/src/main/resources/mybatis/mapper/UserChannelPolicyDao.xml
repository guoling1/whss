<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.jkm.hsy.user.dao.UserChannelPolicyDao">

    <sql id="Base_Column_List">
        id,	user_id,channel_name,channel_type_sign,settle_type,net_status,net_marks,
        open_product_status,open_product_marks,exchannel_code,app_id,exchannel_event_code,status,
        create_time,update_time
    </sql>

    <insert id="insert" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO app_user_channel_policy(user_id,channel_name,channel_type_sign,settle_type,net_status,net_marks,open_product_status,open_product_marks,exchannel_code,app_id,exchannel_event_code,status)
        VALUES(#{userId},#{channelName},#{channelTypeSign},#{settleType},#{netStatus},#{netMarks},#{openProductStatus},#{openProductMarks},#{exchannelCode},#{appId},#{exchannelEventCode},#{status})
    </insert>

    <update id="updateInit">
        UPDATE app_user_channel_policy
        SET
        user_id = #{userId},
        channel_name = #{channelName},
        channel_type_sign = #{channelTypeSign},
        settle_type = #{settleType},
        net_status = #{netStatus},
        open_product_status = #{openProductStatus},
        status = #{status}
        WHERE id = #{id}
    </update>

    <select id="selectByChannelTypeSign" resultType="com.jkm.hsy.user.entity.UserChannelPolicy">
        SELECT <include refid="Base_Column_List"/> FROM app_user_channel_policy
        WHERE channel_type_sign=#{channelTypeSign} and status = 1;
    </select>

    <update id="updateByUserIdAndChannelTypeSign">
        UPDATE app_user_channel_policy
        SET
        net_status = #{netStatus},
        net_marks = #{netMarks},
        open_product_status = #{openProductStatus},
        open_product_marks = #{openProductMarks},
        exchannel_code = #{exchannelCode},
        exchannel_event_code = #{exchannelEventCode}
        WHERE user_id = #{userId} and channel_type_sign = #{channelTypeSign}
    </update>

    <update id="updateHxNetInfo">
        UPDATE app_user_channel_policy
        SET
        net_status = #{netStatus},
        net_marks = #{netMarks},
        exchannel_code = #{exchannelCode}
        WHERE user_id = #{userId} and channel_type_sign in(801,802)
    </update>

    <update id="updateHxOpenProduct">
        UPDATE app_user_channel_policy
        SET
        open_product_status = #{openProductStatus},
        open_product_marks = #{openProductMarks},
        exchannel_event_code = #{exchannelEventCode}
        WHERE user_id = #{userId} and channel_type_sign in(801,802)
    </update>
</mapper>