<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.jkm.hss.admin.dao.AdminRoleDao">

    <sql id="Base_Column_List">
        id,role_name,descr,type,status,create_time,update_time
    </sql>

    <sql id="Base_Column_List1">
        id,parent_id,menu_name,menu_url,descr,sn,type,status,create_time,update_time
    </sql>


    <insert id="insert" useGeneratedKeys="true" keyProperty="id">
        INSERT INTO tb_admin_role
        (
        role_name,
        descr,
        type,
        status
        )
        VALUES
        (
        #{roleName},
        #{descr},
        #{type},
        #{status}
        );
    </insert>

    <update id="update">
        UPDATE tb_admin_role
        SET
        role_name = #{roleName}
        WHERE id = #{id}
    </update>

    <update id="enableRole">
        UPDATE tb_admin_role
        SET
        status = 1
        WHERE id = #{id}
    </update>

    <update id="disableRole">
        UPDATE tb_admin_role
        SET
        status = 2
        WHERE id = #{id}
    </update>

    <select id="selectAdminRoleCountByPageParams" resultType="java.lang.Long">
        SELECT COUNT(1) FROM tb_admin_role
        <where>
            type=#{type}
            <if test="roleName != null and roleName!=''">
                AND `role_name` LIKE "%"#{roleName}"%"
            </if>
        </where>
    </select>

    <select id="selectAdminRoleListByPageParams" resultType="com.jkm.hss.admin.entity.AdminRole">
        SELECT <include refid="Base_Column_List" /> FROM tb_admin_role
        <where>
            type=#{type}
            <if test="roleName != null and roleName!=''">
                AND `role_name` LIKE "%"#{roleName}"%"
            </if>
            ORDER BY create_time DESC LIMIT #{offset},#{count}
        </where>
    </select>

    <select id="selectAdminRoleList" resultType="com.jkm.hss.admin.helper.responseparam.AdminRoleListResponse">
        SELECT id,role_name FROM tb_admin_role where type=#{type} and status=1
    </select>

    <select id="selectById" resultType="com.jkm.hss.admin.entity.AdminRole">
        SELECT <include refid="Base_Column_List" /> FROM tb_admin_role WHERE  id=#{id}
    </select>

    <select id="getMenuByParentId" resultType="com.jkm.hss.admin.entity.AdminMenu">
        SELECT <include refid="Base_Column_List1" /> FROM tb_admin_menu WHERE  parent_id=#{parentId} ORDER by sn asc
    </select>
</mapper>